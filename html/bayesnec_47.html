<div class="container">

<table style="width: 100%;"><tr>
<td>model.frame</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Model.frame methods in bayesnec.</h2>

<h3>Description</h3>

<p>Retrieve data.frame used to fit models via <code>bnec</code>, or directly
from a <code>bayesnecformula</code>.
<code>formula</code> should be of class <code>bayesnecfit</code>,
<code>bayesmanecfit</code> or <code>bayesnecformula</code>.
</p>


<h3>Usage</h3>

<pre><code class="language-R">## S3 method for class 'bayesnecfit'
model.frame(formula, ...)

## S3 method for class 'bayesmanecfit'
model.frame(formula, model, ...)

## S3 method for class 'bayesnecformula'
model.frame(formula, data, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>formula</code></td>
<td>
<p>An model object of class <code>bayesnecfit</code>,
<code>bayesmanecfit</code>, or a formula of class
<code>bayesnecformula</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Unused if <code>formula</code> is a <code>bayesnecfit</code> or a
<code>bayesmanecfit</code>. Else, if <code>formula</code> is a
<code>bayesnecformula</code>, additional arguments to be passed to
<code>check_formula</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>model</code></td>
<td>
<p>A valid model string.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>data</code></td>
<td>
<p>A <code>data.frame</code> containing the variables
specified in <code>formula</code>.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>If <code>formula</code> is a <code>bayesnecformula</code> and it
contains transformations to variables x and y, these are evaluated and
returned as part of the <code>data.frame</code>.
</p>


<h3>Value</h3>

<p>If <code>formula</code> is a <code>bayesnecfit</code> or a
<code>bayesmanecfit</code>, a <code>data.frame</code> containing
the data used to fit the model.
</p>
<p>If, instead, <code>formula</code> is a <code>bayesnecformula</code>,
a <code>data.frame</code> with additional attributes
detailing the population-level variables (attribute <code>"bnec_pop"</code>)
(response y, predictor x, and, if binomial a formula, trials) and, if
applicable, the group-level variables (attribute <code>"bnec_group"</code>).
</p>


<h3>Examples</h3>

<pre><code class="language-R">
library(bayesnec)
# if input is of class `bayesnecfit` or `bayesmanecfit`
model.frame(manec_example, model = "nec4param")
nec4param &lt;- pull_out(manec_example, "nec4param")
model.frame(nec4param)
# if input is of class `bayesnecformula`
nec3param &lt;- function(beta, nec, top, x) {
  top * exp(-exp(beta) * (x - nec) *
    ifelse(x - nec &lt; 0, 0, 1))
}

data &lt;- data.frame(x = seq(1, 20, length.out = 10), tr = 100, wght = c(1, 2),
                   group_1 = sample(c("a", "b"), 10, replace = TRUE),
                   group_2 = sample(c("c", "d"), 10, replace = TRUE))
data$y &lt;- nec3param(beta = -0.2, nec = 4, top = 100, data$x)

f_1 &lt;- y ~ crf(x, "nec3param")
f_2 &lt;- "y | trials(tr) ~ crf(sqrt(x), \"nec3param\")"
f_3 &lt;- y | trials(tr) ~ crf(x, "nec3param") + ogl(group_1) + pgl(group_2)
f_4 &lt;- y | trials(tr) ~ crf(x, "nec3param") + (nec + top | group_1)

m_1 &lt;- model.frame(bnf(f_1), data)
attr(m_1, "bnec_pop")
model.frame(bnf(f_2), data)
m_3 &lt;- model.frame(bnf(f_3), data)
attr(m_3, "bnec_group")
model.frame(bnf(f_4), data)

</code></pre>


</div>