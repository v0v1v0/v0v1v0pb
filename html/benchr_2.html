<div class="container">

<table style="width: 100%;"><tr>
<td>benchmark</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>High Precise Measurement of R Expressions Execution Time</h2>

<h3>Description</h3>

<p><code>benchmark</code> serves as a more accurate replacement of the often
seen <code>system.time(replicate(1000, expr))</code> expression. It tries hard to
accurately measure only the time it takes to evaluate <code>expr</code>.
To achieve this, the sub-millisecond (supposedly nanosecond) accurate
timing functions most modern operating systems provide are used.
Additionally all evaluations of the expressions are done in C++ code to
minimize any measurment error.
</p>


<h3>Usage</h3>

<pre><code class="language-R">benchmark(
  ...,
  times = 100L,
  order = c("random", "inorder", "block"),
  envir = parent.frame(),
  progress = TRUE,
  gcFirst = TRUE,
  gcDuring = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Captures any number of unevaluated expressions passed to
benchmark as named or unnamed arguments.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>times</code></td>
<td>
<p>Integer. Number of times to evaluate each expression.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>order</code></td>
<td>
<p>Character. The order in which the expressions are evaluated.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>envir</code></td>
<td>
<p>The environment in which the expressions will be evaluated.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>progress</code></td>
<td>
<p>Logical. Show progress bar during expressions evaluation.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>gcFirst</code></td>
<td>
<p>Logical. Should a garbage collection be performed immediately
before the timing?</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>gcDuring</code></td>
<td>
<p>Logical. Should a garbage collection be performed immediately
before each iteration, as produced by <code>times</code>? (very slow)</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>Before evaluating each expression <code>times</code> times, the overhead of
calling the timing functions and the C++ function call overhead are
estimated. This estimated overhead is subtracted from each measured
evaluation time. Should the resulting timing be negative, a warning
is thrown and the respective value is replaced by <code>0</code>. If the timing
is zero, a warning is also raised. Should all evaluations result in one of
the two error conditions described above, an error is raised.
</p>


<h3>Value</h3>

<p>Object of class <code>benchmark</code>, which is a <code>data.frame</code> with
a number of additional attributes and contains the following columns:
</p>
<table>
<tr style="vertical-align: top;">
<td><code>expr</code></td>
<td>
<p>The deparsed expression as passed to
<code>benchmark</code> or the name of the argument if the expression was
passed as a named argument.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>time</code></td>
<td>
<p>The measured execution time of the expression in seconds.
The order of the observations in the data frame is the order in which they
were executed.</p>
</td>
</tr>
</table>
<p>An object of class benchmark also contains the following attributes:
</p>
<table>
<tr style="vertical-align: top;">
<td><code>precision</code></td>
<td>
<p>Timer precision in seconds.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>error</code></td>
<td>
<p>Timer error (overhead) in seconds.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>units</code></td>
<td>
<p>Units for time intervals (by default, "s" – seconds).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>times</code></td>
<td>
<p>Number of repeats for each measurement.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>order</code></td>
<td>
<p>Execution regime.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>gc</code></td>
<td>
<p>Whether garbage collection took place before each execution.</p>
</td>
</tr>
</table>
<h3>The order in which the expressions are evaluated</h3>


<dl>
<dt>“random”</dt>
<dd>
<p>(the default) randomizes the execution order</p>
</dd>
<dt>“inorder”</dt>
<dd>
<p>executes each expression in order</p>
</dd>
<dt>“block”</dt>
<dd>
<p>executes all repetitions of each expression
as one block.</p>
</dd>
</dl>
<h3>Author(s)</h3>

<p>Artem Klevtsov <a href="mailto:a.a.klevtsov@gmail.com">a.a.klevtsov@gmail.com</a>
</p>


<h3>See Also</h3>

<p><code>summary.benchmark()</code>,
<code>mean.benchmark()</code>,
<code>print.benchmark()</code>,
<code>plot.benchmark()</code>,
<code>boxplot.benchmark()</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">## Measure the time it takes to dispatch a simple function call
## compared to simply evaluating the constant NULL
f &lt;- function() NULL
res &lt;- benchmark(NULL, f(), times = 1000L)

## Print results:
print(res)

## Plot results
boxplot(res)
</code></pre>


</div>