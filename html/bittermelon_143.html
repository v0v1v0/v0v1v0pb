<div class="container">

<table style="width: 100%;"><tr>
<td>bm_mask</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Modify bitmaps via masking with a 'mask' bitmap</h2>

<h3>Description</h3>

<p><code>bm_mask()</code> modifies bitmaps by using a binary bitmap “mask”
to set certain elements to a background value.
</p>


<h3>Usage</h3>

<pre><code class="language-R">bm_mask(
  x,
  mask = NULL,
  base = NULL,
  mode = c("luminance", "alpha"),
  hjust = "center-left",
  vjust = "center-top"
)

## S3 method for class 'bm_bitmap'
bm_mask(
  x,
  mask = NULL,
  base = NULL,
  mode = c("luminance", "alpha"),
  hjust = "center-left",
  vjust = "center-top"
)

## S3 method for class 'bm_pixmap'
bm_mask(
  x,
  mask = NULL,
  base = NULL,
  mode = c("luminance", "alpha"),
  hjust = "center-left",
  vjust = "center-top"
)

## S3 method for class ''magick-image''
bm_mask(
  x,
  mask = NULL,
  base = NULL,
  mode = c("luminance", "alpha"),
  hjust = "center-left",
  vjust = "center-top"
)

## S3 method for class 'nativeRaster'
bm_mask(
  x,
  mask = NULL,
  base = NULL,
  mode = c("luminance", "alpha"),
  hjust = "center-left",
  vjust = "center-top"
)

## S3 method for class 'raster'
bm_mask(
  x,
  mask = NULL,
  base = NULL,
  mode = c("luminance", "alpha"),
  hjust = "center-left",
  vjust = "center-top"
)

## S3 method for class 'bm_list'
bm_mask(
  x,
  mask = NULL,
  base = NULL,
  mode = c("luminance", "alpha"),
  hjust = "center-left",
  vjust = "center-top"
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>Either a <code>bm_bitmap()</code>, <code>bm_font()</code>, <code>bm_list()</code>, "magick-image", "nativeRaster", <code>bm_pixmap()</code>, or "raster"  object.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>mask</code></td>
<td>
<p>An object to use as a binary bitmap “mask”.
Only one of <code>mask</code> or <code>base</code> may be set.
Will be coerced to a <code>bm_bitmap()</code> object by <code>as_bm_bitmap()</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>base</code></td>
<td>
<p>A bitmap/pixmap object which will be “masked” by <code>mask</code>.
Only one of <code>mask</code> or <code>base</code> may be set.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>mode</code></td>
<td>
<p>Either "luminance" (default) or "alpha".</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>hjust</code></td>
<td>
<p>One of "left", "center-left", "center-right", "right".
"center-left" and "center-right" will attempt to
place in "center" if possible but if not possible will bias
it one pixel left or right respectively.
"centre", "center", and "centre-left" are aliases for "center-left".
"centre-right" is an alias for "center-right".</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>vjust</code></td>
<td>
<p>One of "bottom", "center-bottom", "center-top", "top".
"center-bottom" and "center-top" will attempt to
place in "center" if possible but if not possible will bias
it one pixel down or up respectively.
"centre", "center", and "centre-top" are aliases for "center-top".
"centre-bottom" is an alias for "center-bottom".</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>If necessary bitmaps will be extended by <code>bm_extend()</code> such that
they are the same size.
If necessary the <code>mask</code> will be coerced into a “binary” mask
by <code>bm_clamp(as_bm_bitmap(mask))</code>.
If <code>mode</code> is "luminance" then where the <code>mask</code> is <code>1L</code>
the corresponding pixel in <code>base</code> will be coerced to the background value.
If <code>mode</code> is "alpha" then where the <code>mask</code> is <code>0L</code>
the corresponding pixel in <code>base</code> will be coerced to the background value.
</p>


<h3>Value</h3>

<p>A bitmap/pixmap object that is the same type as <code>x</code> (if <code>base</code> is <code>NULL</code>) or <code>base</code>.
</p>


<h3>Examples</h3>

<pre><code class="language-R">if (require("grid", quietly = TRUE) &amp;&amp; capabilities("png")) {
  font_file &lt;- system.file("fonts/spleen/spleen-8x16.hex.gz", package = "bittermelon")
  font &lt;- read_hex(font_file)
  one &lt;- font[[str2ucp("1")]]
  circle_large &lt;- as_bm_bitmap(circleGrob(r = 0.50), width = 16L, height = 16L)
  circle_small &lt;- as_bm_bitmap(circleGrob(r = 0.40), width = 16L, height = 16L)
  circle_outline &lt;- bm_mask(circle_large, circle_small)
  print(circle_outline)
}
if (capabilities("png")) {
  # U+2776 "Dingbat Negative Circled Digit One"
  circle_minus_one &lt;- bm_mask(circle_large, one)
  print(circle_minus_one)
}
# Can also do "alpha" mask
square_full &lt;- bm_bitmap(matrix(1L, nrow = 16L, ncol = 16L))
square_minus_lower_left &lt;- square_full
square_minus_lower_left[1:8, 1:8] &lt;- 0L
print(square_minus_lower_left)
if (capabilities("png")) {
  circle_minus_lower_left &lt;- bm_mask(circle_large, square_minus_lower_left, mode = "alpha")
  print(circle_minus_lower_left)
}

if (capabilities("png")) {
  m &lt;- matrix(grDevices::rainbow(8L), byrow = TRUE, ncol = 8L, nrow = 8L)
  rainbow &lt;- bm_expand(as_bm_pixmap(m), 2L)
  circle_rainbow &lt;- bm_mask(rainbow, circle_large, mode = "alpha")
}
if (cli::is_utf8_output() &amp;&amp; 
    cli::num_ansi_colors() &gt;= 256L &amp;&amp;
    capabilities("png")) {
  print(circle_rainbow, compress = "v")
}
</code></pre>


</div>