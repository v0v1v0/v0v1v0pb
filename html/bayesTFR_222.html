<div class="container">

<table style="width: 100%;"><tr>
<td>tfr.raftery.diag</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>
Raftery Diagnostics for Parameters of the Total Fertility Rate
</h2>

<h3>Description</h3>

<p>The functions compute the Raftery diagnostics for each parameter of MCMCs of phase II (<code>tfr.raftery.diag</code>) and phase III (<code>tfr3.raftery.diag</code>), taking median over all chains.</p>


<h3>Usage</h3>

<pre><code class="language-R">tfr.raftery.diag(mcmc = NULL, 
    sim.dir = file.path(getwd(), "bayesTFR.output"), 
    burnin = 0, country = NULL,
    par.names = NA, par.names.cs = NA,
    country.sampling.prop = 1, verbose=TRUE, ...)

tfr3.raftery.diag(mcmc = NULL, 
    sim.dir = file.path(getwd(), "bayesTFR.output"), 
    burnin = 0, country = NULL,
    par.names = NA, par.names.cs = NA,
    country.sampling.prop = 1, verbose=TRUE, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>mcmc</code></td>
<td>

<p>A <code>bayesTFR.mcmc</code> or <code>bayesTFR.mcmc.set</code> object.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>sim.dir</code></td>
<td>

<p>Directory with the MCMC simulation results. Only used if <code>mcmc</code> is <code>NULL</code>.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>burnin</code></td>
<td>

<p>Burnin.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>country</code></td>
<td>
<p>Name or code of a country. If it is given, country-specific parameters are reduced to parameters of that country.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>par.names</code></td>
<td>

<p>Names of country-independent parameters for which the Raftery diagnostics should be computed. By default all parameters are used.
If it is <code>NULL</code>, no country-independent parameters are used.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>par.names.cs</code></td>
<td>

<p>Names of country-specific parameters for which the Raftery diagnostics should be computed. By default all parameters are used.
If it is <code>NULL</code>, no country-specific parameters are used.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>country.sampling.prop</code></td>
<td>
<p>Proportion of countries that are included in the diagnostics. It should be between 0 and 1. If it is smaller than 1, the countries are randomly sampled. It is only relevant if <code>par.names.cs</code> is not <code>NULL</code>. </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>verbose</code></td>
<td>
<p>Logical switching log messages on and off.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Additional arguments passed to the <code>coda.list.mcmc</code> function.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>The Raftery diagnostics is computed for each parameter, using <span class="pkg">coda</span>'s <code>raftery.diag</code> with r=0.0125, q=0.025 and q=0.975. Values of <code class="reqn">N</code> and burnin are taken as the median over chains. For each country-specific parameter, the maximum over all included countries of such medians is taken. 
</p>


<h3>Value</h3>

<p>List with the components:
</p>
<table>
<tr style="vertical-align: top;">
<td><code>Nmedian</code></td>
<td>
<p>2-d array of <code class="reqn">N</code>  values (processed as described in Details) with two rows: first corresponding to q=0.025, second corresponding to q=0.975. Each column corresponds to one parameter.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>burnin</code></td>
<td>
<p>2-d array of the same structure as <code>Nmedian</code>, containing the burnin values (processed as described in Details).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>not.converged.parameters</code></td>
<td>
<p>List with two elements, each of which is a data frame containing columns “parameter.name”, “chain.id”, and “N”. These are parameters for which the computed value of Raftery diagnostics <code class="reqn">N</code> is larger than the total number of finished iterations summed over all chains. The first element of the list corresponds to q=0.025, second corresponds to q=0.975.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>not.converged.inchain.parameters</code></td>
<td>
<p>List of the same structure as <code>not.converged.parameters</code>. The parameters included are those for which the computed value of Raftery diagnostics <code class="reqn">N</code> is larger than the number of finished iterations in the corresponding chain.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>N.country.indep</code></td>
<td>
<p>Data frame containing columns “parameter.name”, “chain.id”, “N0.025”, and “N0.975”. Each row gives <code class="reqn">N</code> computed with the two different <code class="reqn">q</code> for each country-independent parameter and chain.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>N.country.spec</code></td>
<td>
<p>The same as <code>N.country.indep</code>, but here the country-specific parameters are considered.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>Nmedian.country.spec</code></td>
<td>
<p>2-d array of <code class="reqn">N</code> values for country-specific parameters containing medians over chains.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>thin.ind</code></td>
<td>
<p>List with elements '0.025', '0.975' and <code>median</code>. The first two elements are matrices with one row per chain and one column per parameter. They contain values of <code>thin</code> that makes the MCMC independent, for  q=0.025 and q=0.975, respectively. The <code>median</code> element is of the same structure as <code>Nmedian</code>, containing medians ove rows in the two matrices in this list.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>nr.countries</code></td>
<td>
<p>Vector with elements <code>used</code> (number of countries used in this diagnostics) and <code>total</code> (number of countries that this <code>mcmc</code> object was estimated on).</p>
</td>
</tr>
</table>
<h3>Author(s)</h3>

<p>Hana Sevcikova, Adrian Raftery
</p>


<h3>See Also</h3>

<p><code>raftery.diag</code>
</p>


</div>