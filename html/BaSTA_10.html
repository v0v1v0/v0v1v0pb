<div class="container">

<table style="width: 100%;"><tr>
<td>DataCheck</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>
Error checking for BaSTA input data.
</h2>

<h3>Description</h3>

<p>A function to check the input data file for a Bayesian Survival Trajectory Analysis (BaSTA) for capture-mark-recapture (CMR) or census data.
</p>


<h3>Usage</h3>

<pre><code class="language-R">DataCheck (object, dataType = "CMR", studyStart = NULL, studyEnd = NULL,  silent = TRUE)</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code> object </code></td>
<td>
<p>A <code>data.frame</code> to be used as an input data file for BaSTA. Note: BaSTA can take two types of datasets, namely capture-mark-recapture (<code>CMR</code>) or census data.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>dataType </code></td>
<td>
<p>A <code>character string</code> indicating if the data are capture-mark-recapture (CMR) or census. Options are “<code>CMR</code>” (default) or “<code>census</code>”.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>studyStart </code></td>
<td>
<p>Only required for <code>dataType =</code> “<code>CMR</code>”, an integer indicating the first year of the study.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>studyEnd </code></td>
<td>
<p>Only required for <code>dataType =</code> “<code>CMR</code>”, an integer indicating the last year of the study.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code> silent </code></td>
<td>
<p>Logical to indicate whether the results should be printed to the console.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>The function checks for inconsistencies in the dataset and reports them back. See <code>value</code> section for details on the types of errors detected by the function. 
</p>
<p><code>DATA SPECIFICATIONS:</code>
</p>
<p><code>1) CMR data:</code>
The input data <code>object</code> requires the following structure: the first column should be a vector of individual unique IDs, the second and third columns are birth and death years respectively. Columns <code class="reqn">4, \dots, T+3</code> represent the observation window (i.e., recapture matrix) of <code class="reqn">T</code> years.  This is followed (optionally) by columns for categorical and continuous covariates.
</p>
<p><code>2) census data:</code>
The input data <code>object</code> requires at least five dates columns, namely “Birth.Date”, “Min.Birth.Date”, “Max.Birth.Date”, “Entry.Date”, and “Depart.Date”. All dates need to be format as “%Y-%m-%d”. In addition, a “Depart.Type” column is required with two types of departures “C” for Censored and “D” for dead.
</p>


<h3>Value</h3>

<p><code>1) CMR data:</code>
</p>
<table>
<tr style="vertical-align: top;">
<td><code>newData </code></td>
<td>
<p>The original data frame (for consistency with previous versions of BaSTA).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>type1 </code></td>
<td>
<p>A vector of row numbers in the original data frame where there are deaths occurring before the study starts.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>type2 </code></td>
<td>
<p>A vector of row numbers in the original data frame where there are no birth/death AND no obervations.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>type3 </code></td>
<td>
<p>A vector of row numbers in the original data frame where there are births recorded after death.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>type4 </code></td>
<td>
<p>A vector of row numbers in the original data frame where there are observations (i.e. recaptures) after death.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>type5 </code></td>
<td>
<p>A vector of row numbers in the original data frame where there are observations (i.e. recaptures) before birth.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>type6 </code></td>
<td>
<p>A vector of row numbers in the original data frame where the year of birth is not a zero in the recapture matrix.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>summary </code></td>
<td>
<p>List with summary information, e.g., sample size, number of records with known birth, number of records with known death, etc. </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>stopExec </code></td>
<td>
<p>Logical that indicates if the data are free of errors or not. i.e. <code>TRUE</code> = the data have no apparent errors, and <code>FALSE</code> = there is at leat one error.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>probDescr </code></td>
<td>
<p>Character vector explaining the six types of problems the <code>DataCheck</code> functions looks for.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>dataType </code></td>
<td>
<p>Type of dataset, i.e., “<code>CMR</code>”.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>studyStart </code></td>
<td>
<p>Integer indicating the study start time.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>studyEnd </code></td>
<td>
<p>Integer indicating the study end time.</p>
</td>
</tr>
</table>
<p><code>2) census data:</code>
</p>
<table>
<tr style="vertical-align: top;">
<td><code>n </code></td>
<td>
<p>Integer for the number of rows (i.e., records) in the dataset.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>stopExec </code></td>
<td>
<p>Logical that indicates if the data are free of errors or not. i.e. <code>TRUE</code> = the data have no apparent errors, and <code>FALSE</code> = there is at leat one error.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>nas </code></td>
<td>
<p>List organised by column indicating whether <code>NA</code>s were detected in a given column.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>DateRan </code></td>
<td>
<p>Matrix of dates ranges (as character strings) for each date column in the dataset.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>probDescr </code></td>
<td>
<p>Character vector explaining the seven types of problems the <code>DataCheck</code> functions looks for.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>MinBBirth </code></td>
<td>
<p>Vector of indices of rows where “<code>Min.Birth.Date</code>” was larger than “<code>Birth.Date</code>”.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>BirthMaxB </code></td>
<td>
<p>Vector of indices of rows where “<code>Birth.Date</code>” was larger than “<code>Max.Birth.Date</code>”.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>MinBMaxB </code></td>
<td>
<p>Vector of indices of rows where “<code>Min.Birth.Date</code>” was larger than  “<code>Max.Birth.Date</code>”.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>BirthEntr </code></td>
<td>
<p>Vector of indices of rows where “<code>Birth.Date</code>” was larger than “<code>Endtry.Date</code>”.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>MinBEntr </code></td>
<td>
<p>Vector of indices of rows where “<code>Min.Birth.Date</code>” was larger than  “<code>Entry.Date</code>”.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>MaxBEntr </code></td>
<td>
<p>Vector of indices of rows where “<code>Max.Birth.Date</code>” was larger than  “<code>Entry.Date</code>”.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>EntrDep </code></td>
<td>
<p>Vector of indices of rows where “<code>Entry.Date</code>” was larger than  “<code>Depart.Date</code>”.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>DepartType </code></td>
<td>
<p>Vector of indices of rows where “<code>Depart.Type</code>” does not fall within the “<code>C</code>” (i.e., censored) or “<code>D</code>” (i.e., uncensored or death) categories.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>idUnCens </code></td>
<td>
<p>Vector of indices of rows for uncensored (i.e., death) records.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>nUnCens </code></td>
<td>
<p>Integer indicating the number of uncensored records.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>idCens </code></td>
<td>
<p>Vector of indices of rows for censored records.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>nCens </code></td>
<td>
<p>Integer indicating the number of uncensored records.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>idNoBirth </code></td>
<td>
<p>Vector of indices of rows for records with uncertain birth date.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>nNoBirth </code></td>
<td>
<p>Integer indicating the number of records with uncertain birth date.</p>
</td>
</tr>
</table>
<h3>Author(s)</h3>

<p>Fernando Colchero <a href="mailto:fernando_colchero@eva.mpg.de">fernando_colchero@eva.mpg.de</a></p>


<h3>See Also</h3>

<p><code>FixCMRdata</code> to fix potential issues for capture-mark-recapture data.</p>


<h3>Examples</h3>

<pre><code class="language-R">## CMR data:
## --------- #
## Load data:
data("bastaCMRdat", package = "BaSTA")

## Check data consistency:
checkedData  &lt;- DataCheck(bastaCMRdat, dataType = "CMR", studyStart = 51, 
                          studyEnd = 70)

## census data:
## ------------ #
## Load data:
data("bastaCensDat", package = "BaSTA")

## Check data consistency:
checkedData  &lt;- DataCheck(object = bastaCensDat, dataType = "census")

## Printed output:
## --------------- #
## Print DataCheck results:
print(checkedData)

</code></pre>


</div>