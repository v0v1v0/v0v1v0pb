<div class="container">

<table style="width: 100%;"><tr>
<td>linLogTrans</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Animation for transition from linear to logarithmic axis</h2>

<h3>Description</h3>

<p>draw images that gradually transform from a linear to a logarithmic axis
</p>


<h3>Usage</h3>

<pre><code class="language-R">linLogTrans(
  x,
  y,
  log = "x",
  steps = 100,
  base = 1,
  las = 1,
  plot = TRUE,
  xlim = range(x, finite = TRUE),
  ylim = range(y, finite = TRUE),
  box = TRUE,
  parexpr,
  endexpr,
  sleep = 0,
  firstplot = TRUE,
  lastplot = TRUE,
  write_t = TRUE,
  values_t = NULL,
  pointsarg = NULL,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>x values to be plotted in animation</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>y</code></td>
<td>
<p>Vector with corresponding y values</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>log</code></td>
<td>
<p>Which axis is logarithmic, "x" or "y". DEFAULT: "x"</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>steps</code></td>
<td>
<p>Number of steps (images) in transition (About 30% are taken out). DEFAULT: 100</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>base</code></td>
<td>
<p>Base passed to <code>logVals</code>. DEFAULT: 1</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>las</code></td>
<td>
<p><code>par</code> LabelAxisStyle (numbers upright). DEFAULT: 1</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>plot</code></td>
<td>
<p>Plot animations at all? False to just get the t-vector (used in <code>linLogHist</code>). DEFAULT: TRUE</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>xlim</code></td>
<td>
<p>xlim range in non-log units. DEFAULT: range(x, finite=TRUE)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ylim</code></td>
<td>
<p>ylim range in non-log units. DEFAULT: range(y, finite=TRUE)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>box</code></td>
<td>
<p>Draw box at the end to overplot <code>ablines</code> crossing the box? DEFAULT: TRUE</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>parexpr</code></td>
<td>
<p>Characterized Expression to set <code>par</code>, eg. <code>parexpr='par(mar=c(2,0.5,1.5,0.5), mpg=c(1.8,1,0))'</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>endexpr</code></td>
<td>
<p>Characterized Expression executed at the end of the plot, eg.
<code>endexpr='mtext("Probability density", line=-1, adj=0.03, outer=T)'</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>sleep</code></td>
<td>
<p>Pause time between frames, in seconds, passed to <code>Sys.sleep</code>. DEFAULT: 0</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>firstplot</code></td>
<td>
<p>Plot data on linear axis as additional first image? DEFAULT: TRUE</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>lastplot</code></td>
<td>
<p>Plot data on logarithmic axis as additional last image? DEFAULT: TRUE</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>write_t</code></td>
<td>
<p>Write transformation value in lower right corner? DEFAULT: TRUE</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>values_t</code></td>
<td>
<p>Supply vector with values for transformation (1/t). Overrides steps. If you have a better algorithm than I do, please let me know! DEFAULT: NULL for internal calculation based on size of steps.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>pointsarg</code></td>
<td>
<p>List of further arguments passed to points, like pch, cex, col. DEFAULT: NULL</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Further arguments passed only to plot, like main, xlim, ylab. Excluded: x, y, las, xaxt, type</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>Returned invisibly: transformation values used. Plotted: <code>steps</code> number of images.
</p>


<h3>Note</h3>

<p>if(steps&gt;1000) steps &lt;- 1000. In the unlikely case you need more steps, please let me know and I'll change the code.<br>
It's best to save the plots into a pdf (see the example) or wrap it within<br><code>png("Transition%03d"); linLogTrans(x,y); dev.off()</code>
</p>


<h3>Author(s)</h3>

<p>Berry Boessenkool, <a href="mailto:berry-b@gmx.de">berry-b@gmx.de</a>, June 2014
</p>


<h3>References</h3>

<p>x^(1/t) is based on the first comment on <a href="https://stackoverflow.com/questions/15994442/">https://stackoverflow.com/questions/15994442/</a><br>
besides the nice graphic properties of logtransformations, check this page for the implications on rates of change: <br><code>https://sfew.websitetoolbox.com/post/show_single_post?pid=1282690259&amp;postcount=4</code><br><code>https://sfew.websitetoolbox.com/post/show_single_post?pid=1282691799&amp;postcount=5</code>
</p>


<h3>See Also</h3>

<p><code>logVals</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">
set.seed(42);  x &lt;- 10^rnorm(100, 3);  y &lt;- runif(100)
linLogTrans(x,y, steps=15, sleep=0.05)
linLogTrans(x,y, steps=15, log="y", ylim=c(0.1, 0.8), base=c(1,2,5))

## Not run: 
## Rcmd check --as-cran doesn't like to open external devices such as pdf,
## so this example is excluded from running in the checks.
pdf("LinLogTransitionAnimation.pdf")
linLogTrans(x,y, main="Example Transition")
dev.off()

# if you have FFmpeg installed, you can use the animation package like this:
library2(animation)
saveVideo(linLogTrans(x,y, steps=300), video.name="linlog_anim.mp4", interval=0.01,
    ffmpeg="C:/ffmpeg-20150424-git-cd69c0e-win64-static/bin/ffmpeg.exe")


# old t values were dependent on the value of steps
findt &lt;- function(steps) {
  # t-values for x^(1/t):
  allt &lt;- 10^(seq(0,2.5,len=1e4) )
  # selection at upper half of these values;
  # Otherwise, the animation slows down too much at the end
  f &lt;- 1.4 # multiplication factor due to length loss by unique
  sel &lt;- round(seq(1, 10, len=f*steps)^4)   #0.5*seq(1, 100, len=1.3*steps)^2 + 0.5*
  sel2 &lt;- unique(round(log10(seq(1, 10, len=f*steps))*f*steps))
  sel2[1] &lt;- 1
  sel &lt;- sel[sel2]
  # final t-values for transition:
  allt &lt;- unique(round(allt[sel], 2))
  data.frame(x=seq(1,1000,len=length(allt)), t=allt)
  }

plot(findt(1000), type="l", log="y", las=1)
for(i in 5:999) lines(findt(i), col=rainbow2(1000)[i])
d &lt;- findt(300)
lines(d) # good average

plot(d$x[-1], diff(d$t), type="l", ylim=c(3e-3,10), yaxt="n", log="y", main="t value growth rate")
logAxis(2) ; lines(d$x[-1], diff(d$t))
d2 &lt;- findt(1000)
lines(d2$x[-1], diff(d2$t), col=2)
lines(2:1000, diff(linLogTrans(1,1, steps=1000, plot=F)), col=4)


d &lt;- findt(300)
cf &lt;- coef(lm(t ~  poly(x,17, raw=T), data=d)) # these are currently used in the function
x &lt;- 1:1000
y &lt;- rowSums(sapply(1:18, function(i) cf[i]*x^(i-1)), na.rm=TRUE)
lines(x, y, lwd=3)
y[1] &lt;- 1
plot(x, round(y, 3), ylim=c(1,3), xlim=c(0,500), type="l", log="")
dput(round(y, 3))

findn &lt;- function(steps) nrow(findt(steps))
plot(1:1000, sapply(1:1000, findn), type="l")
abline(b=1, a=0)


## End(Not run)

</code></pre>


</div>