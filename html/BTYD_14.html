<div class="container">

<table style="width: 100%;"><tr>
<td>bgbb.PlotRecVsConditionalExpectedFrequency</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>BG/BB Plot Recency vs Conditional Expected Frequency</h2>

<h3>Description</h3>

<p>Plots the actual and conditional expected number of transactions made by
customers in the holdout period, binned according to calibration period
recencies. Also returns a matrix with this comparison and the number of
customers in each bin.
</p>


<h3>Usage</h3>

<pre><code class="language-R">bgbb.PlotRecVsConditionalExpectedFrequency(
  params,
  n.star,
  rf.matrix,
  x.star,
  trunc = NULL,
  xlab = "Calibration period recency",
  ylab = "Holdout period transactions",
  xticklab = NULL,
  title = "Conditional Expected Transactions by Recency"
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>params</code></td>
<td>
<p>BG/BB parameters - a vector with alpha, beta, gamma, and delta,
in that order. Alpha and beta are unobserved parameters for the
beta-Bernoulli transaction process. Gamma and delta are unobserved
parameters for the beta-geometric dropout process.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>n.star</code></td>
<td>
<p>number of transaction opportunities in the holdout period.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>rf.matrix</code></td>
<td>
<p>recency-frequency matrix. It must contain columns for
frequency ("x"), recency ("t.x"), number of transaction opportunities in
the calibration period ("n.cal"), and the number of customers with this
combination of recency, frequency and transaction opportunities in the
calibration period ("custs"). Note that recency must be the time between
the start of the calibration period and the customer's last transaction,
not the time between the customer's last transaction and the end of the
calibration period.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>x.star</code></td>
<td>
<p>a vector containing the number of transactions made in the
holdout period by the groups of customers with the same recency and
frequency in the calibration period. It must be in the same order as the
rf.matrix.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>trunc</code></td>
<td>
<p>optional integer used to truncate the plot. In the plot, all
calibration period frequencies above the truncation number will be removed.
If the truncation number is greater than the maximum frequency, R will warn
you and change it to the maximum frequency.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>xlab</code></td>
<td>
<p>descriptive label for the x axis.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ylab</code></td>
<td>
<p>descriptive label for the y axis.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>xticklab</code></td>
<td>
<p>vector containing a label for each tick mark on the x axis.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>title</code></td>
<td>
<p>title placed on the top-center of the plot.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>Holdout period transaction frequency comparison matrix (actual vs.
expected), binned by calibration period recency.
</p>


<h3>References</h3>

<p>Fader, Peter S., Bruce G.S. Hardie, and Jen Shang.
"Customer-Base Analysis in a Discrete-Time Noncontractual Setting."
<em>Marketing Science</em> 29(6), pp. 1086-1108. 2010. INFORMS.
<a href="http://www.brucehardie.com/papers/020/">Web.</a>
</p>


<h3>Examples</h3>

<pre><code class="language-R">data(donationsSummary)

rf.matrix &lt;- donationsSummary$rf.matrix
# donationsSummary$rf.matrix already has appropriate column names

# starting-point parameters
startingparams &lt;- c(1, 1, 0.5, 3)
# estimated parameters
est.params &lt;- bgbb.EstimateParameters(rf.matrix, startingparams)

# get the holdout period transactions
x.star &lt;- donationsSummary$x.star

# number of transaction opportunities in the holdout period
n.star &lt;- 5

# Compare holdout period transactions.
bgbb.PlotRecVsConditionalExpectedFrequency(est.params, n.star, rf.matrix, x.star, trunc=6)
</code></pre>


</div>