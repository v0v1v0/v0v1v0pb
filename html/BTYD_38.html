<div class="container">

<table style="width: 100%;"><tr>
<td>bgnbd.PlotRecVsConditionalExpectedFrequency</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>BG/NBD Plot Actual vs. Conditional Expected Frequency by Recency</h2>

<h3>Description</h3>

<p>Plots the actual and conditional expected number of transactions made by
customers in the holdout period, binned according to calibration period
recencies. Also returns a matrix with this comparison and the number of
customers in each bin.
</p>


<h3>Usage</h3>

<pre><code class="language-R">bgnbd.PlotRecVsConditionalExpectedFrequency(
  params,
  cal.cbs,
  T.star,
  x.star,
  xlab = "Calibration period recency",
  ylab = "Holdout period transactions",
  xticklab = NULL,
  title = "Actual vs. Conditional Expected Transactions by Recency"
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>params</code></td>
<td>
<p>BG/NBD parameters - a vector with r, alpha, a, and b, in that
order. r and alpha are unobserved parameters for the NBD transaction
process. a and b are unobserved parameters for the Beta geometric dropout
process.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cal.cbs</code></td>
<td>
<p>calibration period CBS (customer by sufficient statistic).
It must contain columns for frequency ("x"), recency ("t.x"), and total
time observed ("T.cal"). Note that recency must be the time between the
start of the calibration period and the customer's last transaction, not
the time between the customer's last transaction and the end of the
calibration period.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>T.star</code></td>
<td>
<p>length of then holdout period.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>x.star</code></td>
<td>
<p>vector of transactions made by each customer in the holdout
period.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>xlab</code></td>
<td>
<p>descriptive label for the x axis.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ylab</code></td>
<td>
<p>descriptive label for the y axis.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>xticklab</code></td>
<td>
<p>vector containing a label for each tick mark on the x axis.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>title</code></td>
<td>
<p>title placed on the top-center of the plot.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>This function does bin customers exactly according to recency; it bins
customers according to integer units of the time period of cal.cbs.
Therefore, if you are using weeks in your data, customers will be binned as
follows: customers with recencies between the start of the calibration period
(inclusive) and the end of week one (exclusive); customers with recencies
between the end of week one (inclusive) and the end of week two (exclusive);
etc.
</p>
<p>The matrix and plot will contain the actual number of transactions made by
each bin in the holdout period, as well as the expected number of
transactions made by that bin in the holdout period, conditional on that
bin's behavior during the calibration period.
</p>


<h3>Value</h3>

<p>Matrix comparing actual and conditional expected transactions in the
holdout period.
</p>


<h3>Examples</h3>

<pre><code class="language-R">data(cdnowSummary)

cal.cbs &lt;- cdnowSummary$cbs 
# cal.cbs already has column names required by method

# number of transactions by each customer in the 39 weeks following 
# the calibration period 
x.star &lt;- cal.cbs[,"x.star"]

# parameters estimated using bgnbd.EstimateParameters 
est.params &lt;- c(0.243, 4.414, 0.793, 2.426)

# plot conditional expected holdout period transactions, 
# binned according to calibration period recencies
bgnbd.PlotRecVsConditionalExpectedFrequency(est.params, 
                                            cal.cbs, 
                                            T.star = 39,
                                            x.star)
</code></pre>


</div>