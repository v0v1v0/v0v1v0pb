<div class="container">

<table style="width: 100%;"><tr>
<td>PPC-censoring</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>PPC censoring</h2>

<h3>Description</h3>

<p>Compare the empirical distribution of censored data <code>y</code> to the
distributions of simulated/replicated data <code>yrep</code> from the posterior
predictive distribution. See the <strong>Plot Descriptions</strong> section, below, for
details.
</p>
<p>Although some of the other <span class="pkg">bayesplot</span> plots can be used with censored
data, <code>ppc_km_overlay()</code> is currently the only plotting function designed
<em>specifically</em> for censored data. We encourage you to suggest or contribute
additional plots at
<a href="https://github.com/stan-dev/bayesplot">github.com/stan-dev/bayesplot</a>.
</p>


<h3>Usage</h3>

<pre><code class="language-R">ppc_km_overlay(y, yrep, ..., status_y, size = 0.25, alpha = 0.7)

ppc_km_overlay_grouped(y, yrep, group, ..., status_y, size = 0.25, alpha = 0.7)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>y</code></td>
<td>
<p>A vector of observations. See <strong>Details</strong>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>yrep</code></td>
<td>
<p>An <code>S</code> by <code>N</code> matrix of draws from the posterior (or prior)
predictive distribution. The number of rows, <code>S</code>, is the size of the
posterior (or prior) sample used to generate <code>yrep</code>. The number of columns,
<code>N</code> is the number of predicted observations (<code>length(y)</code>). The columns of
<code>yrep</code> should be in the same order as the data points in <code>y</code> for the plots
to make sense. See the <strong>Details</strong> and <strong>Plot Descriptions</strong> sections for
additional advice specific to particular plots.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Currently only used internally.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>status_y</code></td>
<td>
<p>The status indicator for the observations from <code>y</code>. This must
be a numeric vector of the same length as <code>y</code> with values in {0, 1} (0 =
right censored, 1 = event).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>size, alpha</code></td>
<td>
<p>Passed to the appropriate geom to control the appearance of
the <code>yrep</code> distributions.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>group</code></td>
<td>
<p>A grouping variable of the same length as <code>y</code>.
Will be coerced to factor if not already a factor.
Each value in <code>group</code> is interpreted as the group level pertaining
to the corresponding observation.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>A ggplot object that can be further customized using the <strong>ggplot2</strong> package.
</p>


<h3>Plot Descriptions</h3>


<dl>
<dt><code>ppc_km_overlay()</code></dt>
<dd>
<p>Empirical CCDF estimates of each dataset (row) in <code>yrep</code> are overlaid,
with the Kaplan-Meier estimate (Kaplan and Meier, 1958) for <code>y</code> itself on
top (and in a darker shade). This is a PPC suitable for right-censored
<code>y</code>. Note that the replicated data from <code>yrep</code> is assumed to be
uncensored.
</p>
</dd>
<dt><code>ppc_km_overlay_grouped()</code></dt>
<dd>
<p>The same as <code>ppc_km_overlay()</code>, but with separate facets by <code>group</code>.
</p>
</dd>
</dl>
<h3>References</h3>

<p>Gelman, A., Carlin, J. B., Stern, H. S., Dunson, D. B., Vehtari,
A., and Rubin, D. B. (2013). <em>Bayesian Data Analysis.</em> Chapman &amp; Hall/CRC
Press, London, third edition. (Ch. 6)
</p>
<p>Kaplan, E. L. and Meier, P. (1958). Nonparametric estimation
from incomplete observations.
<em>Journal of the American Statistical Association</em>. 53(282), 457â€“481.
doi:10.1080/01621459.1958.10501452.
</p>


<h3>See Also</h3>

<p>Other PPCs: 
<code>PPC-discrete</code>,
<code>PPC-distributions</code>,
<code>PPC-errors</code>,
<code>PPC-intervals</code>,
<code>PPC-loo</code>,
<code>PPC-overview</code>,
<code>PPC-scatterplots</code>,
<code>PPC-test-statistics</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">color_scheme_set("brightblue")
y &lt;- example_y_data()
# For illustrative purposes, (right-)censor values y &gt; 110:
status_y &lt;- as.numeric(y &lt;= 110)
y &lt;- pmin(y, 110)
# In reality, the replicated data (yrep) would be obtained from a
# model which takes the censoring of y properly into account. Here,
# for illustrative purposes, we simply use example_yrep_draws():
yrep &lt;- example_yrep_draws()
dim(yrep)

ppc_km_overlay(y, yrep[1:25, ], status_y = status_y)

# With separate facets by group:
group &lt;- example_group_data()

ppc_km_overlay_grouped(y, yrep[1:25, ], group = group, status_y = status_y)

</code></pre>


</div>