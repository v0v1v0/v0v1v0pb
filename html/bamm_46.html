<div class="container">

<table style="width: 100%;"><tr>
<td>predict,bam-method</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Predict method of the package <span class="pkg">bamm</span>.</h2>

<h3>Description</h3>

<p>predicts species' distribution under suitability changes
</p>


<h3>Usage</h3>

<pre><code class="language-R">## S4 method for signature 'bam'
predict(
  object,
  niche_layers,
  nbgs_vec = NULL,
  nsteps_vec,
  stochastic_dispersal = FALSE,
  disp_prop2_suitability = TRUE,
  disper_prop = 0.5,
  animate = FALSE,
  period_names = NULL,
  fmt = "GIF",
  filename,
  bg_color = "#F6F2E5",
  suit_color = "#0076BE",
  occupied_color = "#03C33F",
  png_keyword = "sdm_sim",
  ani.width = 1200,
  ani.height = 1200,
  ani.res = 300
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>object</code></td>
<td>
<p>a of class bam.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>niche_layers</code></td>
<td>
<p>A raster or RasterStack with the niche models for
each time period</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>nbgs_vec</code></td>
<td>
<p>A vector with the number of neighbors for the adjacency
matrices</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>nsteps_vec</code></td>
<td>
<p>Number of simulation steps for each time period.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>stochastic_dispersal</code></td>
<td>
<p>Logical. If dispersal depends on a probability of
visiting neighbor cells (Moore neighborhood).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>disp_prop2_suitability</code></td>
<td>
<p>Logical. If probability of dispersal is
proportional
to the suitability of reachable cells. The proportional value must be
declared
in the parameter 'disper_prop'.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>disper_prop</code></td>
<td>
<p>Probability of dispersal to reachable cells.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>animate</code></td>
<td>
<p>Logical. If TRUE a dispersal animation on climate change
scenarios will be created</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>period_names</code></td>
<td>
<p>Character vector with the names of periods that will
be animated. Default NULL.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>fmt</code></td>
<td>
<p>Animation format. Possible values are GIF and HTML</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>filename</code></td>
<td>
<p>File name.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>bg_color</code></td>
<td>
<p>Color for unsuitable pixels. Default "#F6F2E5".</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>suit_color</code></td>
<td>
<p>Color for suitable pixels. Default "#0076BE".</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>occupied_color</code></td>
<td>
<p>Color for occupied pixels. Default "#03C33F".</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>png_keyword</code></td>
<td>
<p>A keyword name for the png images generated by
the function</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ani.width</code></td>
<td>
<p>Animation width unit in px</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ani.height</code></td>
<td>
<p>Animation height unit in px</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ani.res</code></td>
<td>
<p>Animation resolution unit in px</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>A RasterStack of predictions of dispersal dynamics as a function
of environmental change scenarios.
</p>


<h3>Author(s)</h3>

<p>Luis Osorio-Olvera &amp; Jorge Sober√≥n
</p>


<h3>Examples</h3>

<pre><code class="language-R"># rm(list = ls())
# Read raster model for Lepus californicus
model_path &lt;- system.file("extdata/Lepus_californicus_cont.tif",
                          package = "bamm")
model &lt;- raster::raster(model_path)
# Convert model to sparse
sparse_mod &lt;- bamm::model2sparse(model = model,threshold=0.1)
# Compute adjacency matrix
adj_mod &lt;- bamm::adj_mat(sparse_mod,ngbs=1)

# Initial points to start dispersal process

occs_lep_cal &lt;- data.frame(longitude = c(-115.10417,
                                         -104.90417),
                           latitude = c(29.61846,
                                        29.81846))
# Convert to sparse the initial points
occs_sparse &lt;- bamm::occs2sparse(modelsparse = sparse_mod,
                                occs = occs_lep_cal)

# Run the bam (sdm) simultation for 100 time steps
smd_lep_cal &lt;- bamm::sdm_sim(set_A = sparse_mod,
                             set_M = adj_mod,
                             initial_points = occs_sparse,
                             nsteps = 10)
#----------------------------------------------------------------------------
# Predict species' distribution under suitability change
# scenarios (could be climate chage scenarios).
#----------------------------------------------------------------------------

# Read suitability layers (two suitability change scenarios)
layers_path &lt;- system.file("extdata/suit_change",
                           package = "bamm")
niche_mods_stack &lt;- raster::stack(list.files(layers_path,
                                             pattern = ".tif$",
                                             full.names = TRUE))
raster::plot(niche_mods_stack)
# Predict
new_preds &lt;- predict(object = smd_lep_cal,
                     niche_layers = niche_mods_stack,
                     nsteps_vec = c(50,100))

# Generate the dispersal animation for time period 1 and 2

if(requireNamespace("animation")){
ani_prd &lt;- tempfile(pattern = "prediction_",fileext = ".gif")
#new_preds &lt;- predict(object = smd_lep_cal,
#                      niche_layers = niche_mods_stack,
#                      nsteps_vec = c(10,10),
#                      animate=TRUE,
#                      filename=ani_prd,
#                    fmt="GIF")

}

</code></pre>


</div>