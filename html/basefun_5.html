<div class="container">

<table style="width: 100%;"><tr>
<td>as.basis</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>
Convert Formula or Factor to Basis Function
</h2>

<h3>Description</h3>

<p>Convert a formula or factor to basis functions
</p>


<h3>Usage</h3>

<pre><code class="language-R">as.basis(object, ...)
## S3 method for class 'formula'
as.basis(object, data = NULL, remove_intercept = FALSE, 
         ui = NULL, ci = NULL, negative = FALSE, scale = FALSE, 
         Matrix = FALSE, prefix = "", ...)
## S3 method for class 'factor_var'
as.basis(object, ...)
## S3 method for class 'ordered_var'
as.basis(object, ...)
## S3 method for class 'factor'
as.basis(object, ...)
## S3 method for class 'ordered'
as.basis(object, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>object</code></td>
<td>
<p>a formula or an object of class <code>factor</code>, <code>factor_var</code>,
<code>ordered</code> or <code>ordered_var</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>data</code></td>
<td>
<p>either a <code>vars</code> object or a <code>data.frame</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>remove_intercept</code></td>
<td>
<p>a logical indicating if any intercept term shall be removed</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ui</code></td>
<td>
<p>a matrix defining constraints</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ci</code></td>
<td>
<p>a vector defining constraints</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>negative</code></td>
<td>
<p>a logical indicating negative basis functions</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>scale</code></td>
<td>
<p>a logical indicating a scaling of each column of the
model matrix to the unit interval (based on observations in <code>data</code>)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>Matrix</code></td>
<td>
<p>a logical requesting a sparse model matrix, that is, a
<code>Matrix</code> object.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>prefix</code></td>
<td>
<p>character prefix for model matrix column names (allows disambiguation of parameter names).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>additional arguments to <code>model.matrix</code>, for
example contrasts</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p><code>as.basis</code> returns a function for the evaluation of
the basis functions with corresponding <code>model.matrix</code> and <code>predict</code>
methods.
</p>
<p>Unordered factors (classes <code>factor</code> and <code>factor_var</code>) use a dummy coding and
ordered factor (classes <code>ordered</code> or <code>ordered_var</code>) lead to a treatment contrast
to the last level and removal of the intercept term with monotonicity constraint.
Additional arguments (<code>...</code>) are ignored for ordered factors.
</p>
<p>Linear constraints on parameters <code>parm</code> are defined by <code>ui %*% parm &gt;= ci</code>.
</p>


<h3>Examples</h3>

<pre><code class="language-R">
  ## define variables and basis functions
  v &lt;- c(numeric_var("x"), factor_var("y", levels = LETTERS[1:3]))
  fb &lt;- as.basis(~ x + y, data = v, remove_intercept = TRUE, negative = TRUE,
                 contrasts.arg = list(y = "contr.sum"))

  ## evaluate basis functions
  model.matrix(fb, data = as.data.frame(v, n = 10))
  ## basically the same as (but wo intercept and times -1)
  model.matrix(~ x + y, data = as.data.frame(v, n = 10))

  ### factor
  xf &lt;- gl(3, 1)
  model.matrix(as.basis(xf), data = data.frame(xf = xf))

  ### ordered
  xf &lt;- gl(3, 1, ordered = TRUE)
  model.matrix(as.basis(xf), data = data.frame(xf = unique(xf)))

</code></pre>


</div>