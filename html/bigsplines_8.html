<div class="container">

<table style="width: 100%;"><tr>
<td>binsamp</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>
Bin-Samples Strategic Knot Indices
</h2>

<h3>Description</h3>

<p>Breaks the predictor domain into a user-specified number of disjoint subregions, and randomly samples a user-specified number of observations from each (nonempty) subregion. 
</p>


<h3>Usage</h3>

<pre><code class="language-R">binsamp(x,xrng=NULL,nmbin=11,nsamp=1,alg=c("new","old"))
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>

<p>Matrix of predictors <code class="reqn">\mathbf{X}=\{x_{ij}\}_{n \times p}</code> where <code class="reqn">n</code> is the number of observations, and <code class="reqn">p</code> is the number of predictors.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>xrng</code></td>
<td>

<p>Optional matrix of predictor ranges: <code class="reqn">\mathbf{R}=\{r_{kj}\}_{2 \times p}</code> where <code class="reqn">r_{1j}=\min_{i}x_{ij}</code> and <code class="reqn">r_{2j}=\max_{i}x_{ij}</code>.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>nmbin</code></td>
<td>

<p>Vector <code class="reqn">\mathbf{b}=(b_{1},\ldots,b_{p})'</code>, where <code class="reqn">b_{j}\geq1</code> is the number of marginal bins to use for the <code class="reqn">j</code>-th predictor. If <code>length(nmbin)&lt;ncol(x)</code>, then <code>nmbin[1]</code> is used for all columns. Default is <code>nmbin=11</code> marginal bins for each dimension.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>nsamp</code></td>
<td>

<p>Scalar <code class="reqn">s\geq1</code> giving the number of observations to sample from each bin. Default is sample <code>nsamp=1</code> observation from each bin.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>alg</code></td>
<td>

<p>Bin-sampling algorithm. New algorithm forms equidistant grid, whereas old algorithm forms approximately equidistant grid. New algorithm is default for versions 1.0-1 and later.
</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>Returns an index vector indicating the rows of <code>x</code> that were bin-sampled. 
</p>


<h3>Warnings </h3>

<p>If <code class="reqn">x_{ij}</code> is nominal with <code class="reqn">g</code> levels, the function requires <code class="reqn">b_{j}=g</code> and <code class="reqn">x_{ij}\in\{1,\ldots,g\}</code> for <code class="reqn">i\in\{1,\ldots,n\}</code>.
</p>


<h3>Note</h3>

<p>The number of returned knots will depend on the distribution of the covariate scores. The maximum number of possible bin-sampled knots is <code class="reqn">s\prod_{j=1}^{p}b_{j}</code>, but fewer knots will be returned if one (or more) of the bins is empty (i.e., if there is no data in one or more bins).
</p>


<h3>Author(s)</h3>

<p>Nathaniel E. Helwig &lt;helwig@umn.edu&gt;
</p>


<h3>Examples</h3>

<pre><code class="language-R">##########   EXAMPLE 1   ##########

# create 2-dimensional predictor (both continuous)
set.seed(123)
xmat &lt;- cbind(runif(10^6),runif(10^6))

# Default use:
#   10 marginal bins for each predictor
#   sample 1 observation from each subregion
xind &lt;- binsamp(xmat)

# get the corresponding knots
bknots &lt;- xmat[xind,]

# compare to randomly-sampled knots
rknots &lt;- xmat[sample(1:(10^6),100),]
par(mfrow=c(1,2))
plot(bknots,main="bin-sampled")
plot(rknots,main="randomly sampled")



##########   EXAMPLE 2   ##########

# create 2-dimensional predictor (continuous and nominal)
set.seed(123)
xmat &lt;- cbind(runif(10^6),sample(1:3,10^6,replace=TRUE))

# use 10 marginal bins for x1 and 3 marginal bins for x2 
# and sample one observation from each subregion
xind &lt;- binsamp(xmat,nmbin=c(10,3))

# get the corresponding knots
bknots &lt;- xmat[xind,]

# compare to randomly-sampled knots
rknots &lt;- xmat[sample(1:(10^6),30),]
par(mfrow=c(1,2))
plot(bknots,main="bin-sampled")
plot(rknots,main="randomly sampled")



##########   EXAMPLE 3   ##########

# create 3-dimensional predictor (continuous, continuous, nominal)
set.seed(123)
xmat &lt;- cbind(runif(10^6),runif(10^6),sample(1:2,10^6,replace=TRUE))

# use 10 marginal bins for x1 and x2, and 2 marginal bins for x3 
# and sample one observation from each subregion
xind &lt;- binsamp(xmat,nmbin=c(10,10,2))

# get the corresponding knots
bknots &lt;- xmat[xind,]

# compare to randomly-sampled knots
rknots &lt;- xmat[sample(1:(10^6),200),]
par(mfrow=c(2,2))
plot(bknots[1:100,1:2],main="bin-sampled, x3=1")
plot(bknots[101:200,1:2],main="bin-sampled, x3=2")
plot(rknots[rknots[,3]==1,1:2],main="randomly sampled, x3=1")
plot(rknots[rknots[,3]==2,1:2],main="randomly sampled, x3=2")

</code></pre>


</div>