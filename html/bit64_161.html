<div class="container">

<table style="width: 100%;"><tr>
<td>bit64-package</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>
A S3 class for vectors of 64bit integers
</h2>

<h3>Description</h3>

<p>Package 'bit64' provides fast serializable S3 atomic 64bit (signed) integers
that can be used in vectors, matrices, arrays and data.frames. Methods are
available for coercion from and to logicals, integers, doubles, characters
and factors as well as many elementwise and summary functions.
<br><b>Version 0.8</b>
With 'integer64' vectors you can store very large integers at the expense
of 64 bits, which is by factor 7 better than 'int64' from package 'int64'.
Due to the smaller memory footprint, the atomic vector architecture and
using only S3 instead of S4 classes, most operations are one to three orders
of magnitude faster: Example speedups are 4x for serialization, 250x for
adding, 900x for coercion and 2000x for object creation. Also 'integer64'
avoids an ongoing (potentially infinite) penalty for garbage collection
observed during existence of 'int64' objects (see code in example section).
<br><b>Version 0.9</b>
Package 'bit64' - which extends R with fast 64-bit integers - now has fast
(single-threaded) implementations the most important univariate algorithmic
operations (those based on hashing and sorting). We now have methods for
'match', '
'quantile', 'median' and 'summary'. Regarding data management we also have
novel generics 'unipos' (positions of the unique values), 'tiepos' (
positions of ties), 'keypos' (positions of foreign keys in a sorted
dimension table) and derived methods 'as.factor' and 'as.ordered'. This 64-
bit functionality is implemented carefully to be not slower than the
respective 32-bit operations in Base R and also to avoid outlying waiting
times observed with 'order', 'rank' and 'table' (speedup factors 20/16/200
respective). This increases the dataset size with wich we can work truly
interactive. The speed is achieved by simple heuristic optimizers in high-
level functions choosing the best from multiple low-level algorithms and
further taking advantage of a novel caching if activated. In an example R
session using a couple of these operations the 64-bit integers performed 22x
faster than base 32-bit integers, hash-caching improved this to 24x,
sortorder-caching was most efficient with 38x (caching hashing and sorting
is not worth it with 32x at duplicated RAM consumption).
</p>


<h3>Usage</h3>

<pre><code class="language-R"> integer64(length)
 ## S3 method for class 'integer64'
is(x)
 ## S3 replacement method for class 'integer64'
length(x) &lt;- value
 ## S3 method for class 'integer64'
print(x, quote=FALSE, ...)
 ## S3 method for class 'integer64'
str(object, vec.len  = strO$vec.len, give.head = TRUE, give.length = give.head, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>length</code></td>
<td>
<p> length of vector using <code>integer</code> </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p> an integer64 vector </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>object</code></td>
<td>
<p> an integer64 vector </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>value</code></td>
<td>
<p> an integer64 vector of values to be assigned </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>quote</code></td>
<td>
<p> logical, indicating whether or not strings should be printed with surrounding quotes. </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>vec.len</code></td>
<td>
<p> see <code>str</code> </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>give.head</code></td>
<td>
<p> see <code>str</code> </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>give.length</code></td>
<td>
<p> see <code>str</code> </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p> further arguments to the <code>NextMethod</code> </p>
</td>
</tr>
</table>
<h3>Details</h3>


<table>
<tr>
<td style="text-align: left;">
   Package: </td>
<td style="text-align: left;"> bit64</td>
</tr>
<tr>
<td style="text-align: left;">
   Type: </td>
<td style="text-align: left;"> Package</td>
</tr>
<tr>
<td style="text-align: left;">
   Version: </td>
<td style="text-align: left;"> 0.5.0</td>
</tr>
<tr>
<td style="text-align: left;">
   Date: </td>
<td style="text-align: left;"> 2011-12-12</td>
</tr>
<tr>
<td style="text-align: left;">
   License: </td>
<td style="text-align: left;"> GPL-2</td>
</tr>
<tr>
<td style="text-align: left;">
   LazyLoad: </td>
<td style="text-align: left;"> yes</td>
</tr>
<tr>
<td style="text-align: left;">
   Encoding: </td>
<td style="text-align: left;"> latin1</td>
</tr>
<tr>
<td style="text-align: left;">
</td>
</tr>
</table>
<h3>Value</h3>

<p><code>integer64</code> returns a vector of 'integer64',
i.e. a vector of <code>double</code> decorated with class 'integer64'.
</p>


<h3>Design considerations</h3>

<p>64 bit integers are related to big data: we need them to overcome address space limitations.
Therefore performance of the 64 bit integer type is critical.
In the S language – designed in 1975 – atomic objects were defined to be vectors for a couple of good reasons:
simplicity, option for implicit parallelization, good cache locality.
In recent years many analytical databases have learnt that lesson: column based data bases provide superior performance
for many applications, the result are products such as MonetDB, Sybase IQ, Vertica, Exasol, Ingres Vectorwise.
If we introduce 64 bit integers not natively in Base R but as an external package, we should at least strive to
make them as 'basic' as possible. Therefore the design choice of bit64 not only differs from <code>int64</code>, it is obvious:
Like the other atomic types in Base R, we model data type 'integer64' as a contiguous <code>atomic</code> vector in memory,
and we use the more basic <code>S3</code> class system, not <code>S4</code>. Like package <code>int64</code> we want our 'integer64' to be <code>serializeable</code>,
therefore we also use an existing data type as the basis. Again the choice is obvious: R has only one 64 bit data type: doubles.
By using <code>doubles</code>, <code>integer64</code> <code>inherits</code> some functionality such as <code>is.atomic</code>, <code>length</code>,
<code>length&lt;-</code>, <code>names</code>, <code>names&lt;-</code>, <code>dim</code>, <code>dim&lt;-</code>, <code>dimnames</code>, <code>dimnames</code>.
<br>
Our R level functions strictly follow the functional programming paragdim:
no modification of arguments or other side-effects. Before version 0.93  we internally deviated from the strict paradigm
in order to boost performance. Our C functions do not create new return values,
instead we pass-in the memory to be returned as an argument. This gives us the freedom to apply the C-function
to new or old vectors, which helps to avoid unnecessary memory allocation, unnecessary copying and unnecessary garbage collection.
Prior to 0.93 <em>within</em> our R functions we also deviated from conventional R programming by not using <code>attr&lt;-</code> and <code>attributes&lt;-</code>
because they always did new memory allocation and copying in older R versions. If we wanted to set attributes of return values that we have freshly created,
we instead used functions <code>setattr</code> and <code>setattributes</code> from package <code>bit</code>.
From version 0.93 <code>setattr</code> is only used for manipulating <code>cache</code> objects, in <code>ramsort.integer64</code> and <code>sort.integer64</code> and in <code>as.data.frame.integer64</code>.
</p>


<h3>Arithmetic precision and coercion</h3>

<p>The fact that we introduce 64 bit long long integers – without introducing 128-bit long doubles – creates some subtle challenges:
Unlike 32 bit <code>integers</code>, the <code>integer64</code> are no longer a proper subset of <code>double</code>.
If a binary arithmetic operation does involve a <code>double</code> and a <code>integer</code>, it is a no-brainer to return <code>double</code>
without loss of information. If an <code>integer64</code> meets a <code>double</code>, it is not trivial what type to return.
Switching to <code>integer64</code> limits our ability to represent very large numbers, switching to <code>double</code> limits our ability
to distinguish <code>x</code> from <code>x+1</code>. Since the latter is the purpose of introducing 64 bit integers, we usually return <code>integer64</code>
from functions involving <code>integer64</code>, for example in <code>c</code>, <code>cbind</code>
and <code>rbind</code>.
<br>
Different from Base R, our operators <code>+</code>,
<code>-</code>, <code>%/%</code> and <code>%%</code> coerce their arguments to
<code>integer64</code> and always return <code>integer64</code>.
<br>
The multiplication operator <code>*</code> coerces its first argument to <code>integer64</code>
but allows its second argument to be also <code>double</code>: the second argument is internaly coerced to 'long double'
and the result of the multiplication is returned as <code>integer64</code>.
<br>
The division <code>/</code> and power <code>^</code> operators also coerce their first argument to <code>integer64</code>
and coerce internally their second argument to 'long double', they return as <code>double</code>, like <code>sqrt</code>,
<code>log</code>, <code>log2</code> and <code>log10</code> do.
</p>

<table>
<tr>
<td style="text-align: center;">
  <b>argument1</b> </td>
<td style="text-align: center;"> <b>op</b> </td>
<td style="text-align: center;"> <b>argument2</b> </td>
<td style="text-align: center;"> <b>-&gt;</b> </td>
<td style="text-align: center;"> <b>coerced1</b> </td>
<td style="text-align: center;"> <b>op</b> </td>
<td style="text-align: center;"> <b>coerced2</b> </td>
<td style="text-align: center;"> <b>-&gt;</b> </td>
<td style="text-align: center;"> <b>result</b> </td>
</tr>
<tr>
<td style="text-align: center;">
  integer64 </td>
<td style="text-align: center;"> + </td>
<td style="text-align: center;"> double </td>
<td style="text-align: center;"> -&gt; </td>
<td style="text-align: center;"> integer64 </td>
<td style="text-align: center;"> + </td>
<td style="text-align: center;"> integer64 </td>
<td style="text-align: center;"> -&gt; </td>
<td style="text-align: center;"> integer64 </td>
</tr>
<tr>
<td style="text-align: center;">
  double </td>
<td style="text-align: center;"> + </td>
<td style="text-align: center;"> integer64 </td>
<td style="text-align: center;"> -&gt; </td>
<td style="text-align: center;"> integer64 </td>
<td style="text-align: center;"> + </td>
<td style="text-align: center;"> integer64 </td>
<td style="text-align: center;"> -&gt; </td>
<td style="text-align: center;"> integer64 </td>
</tr>
<tr>
<td style="text-align: center;">
  integer64 </td>
<td style="text-align: center;"> - </td>
<td style="text-align: center;"> double </td>
<td style="text-align: center;"> -&gt; </td>
<td style="text-align: center;"> integer64 </td>
<td style="text-align: center;"> - </td>
<td style="text-align: center;"> integer64 </td>
<td style="text-align: center;"> -&gt; </td>
<td style="text-align: center;"> integer64 </td>
</tr>
<tr>
<td style="text-align: center;">
  double </td>
<td style="text-align: center;"> - </td>
<td style="text-align: center;"> integer64 </td>
<td style="text-align: center;"> -&gt; </td>
<td style="text-align: center;"> integer64 </td>
<td style="text-align: center;"> - </td>
<td style="text-align: center;"> integer64 </td>
<td style="text-align: center;"> -&gt; </td>
<td style="text-align: center;"> integer64 </td>
</tr>
<tr>
<td style="text-align: center;">
  integer64 </td>
<td style="text-align: center;"> %/% </td>
<td style="text-align: center;"> double </td>
<td style="text-align: center;"> -&gt; </td>
<td style="text-align: center;"> integer64 </td>
<td style="text-align: center;"> %/% </td>
<td style="text-align: center;"> integer64 </td>
<td style="text-align: center;"> -&gt; </td>
<td style="text-align: center;"> integer64 </td>
</tr>
<tr>
<td style="text-align: center;">
  double </td>
<td style="text-align: center;"> %/% </td>
<td style="text-align: center;"> integer64 </td>
<td style="text-align: center;"> -&gt; </td>
<td style="text-align: center;"> integer64 </td>
<td style="text-align: center;"> %/% </td>
<td style="text-align: center;"> integer64 </td>
<td style="text-align: center;"> -&gt; </td>
<td style="text-align: center;"> integer64 </td>
</tr>
<tr>
<td style="text-align: center;">
  integer64 </td>
<td style="text-align: center;"> %% </td>
<td style="text-align: center;"> double </td>
<td style="text-align: center;"> -&gt; </td>
<td style="text-align: center;"> integer64 </td>
<td style="text-align: center;"> %% </td>
<td style="text-align: center;"> integer64 </td>
<td style="text-align: center;"> -&gt; </td>
<td style="text-align: center;"> integer64 </td>
</tr>
<tr>
<td style="text-align: center;">
  double </td>
<td style="text-align: center;"> %% </td>
<td style="text-align: center;"> integer64 </td>
<td style="text-align: center;"> -&gt; </td>
<td style="text-align: center;"> integer64 </td>
<td style="text-align: center;"> %% </td>
<td style="text-align: center;"> integer64 </td>
<td style="text-align: center;"> -&gt; </td>
<td style="text-align: center;"> integer64 </td>
</tr>
<tr>
<td style="text-align: center;">
  integer64 </td>
<td style="text-align: center;"> * </td>
<td style="text-align: center;"> double </td>
<td style="text-align: center;"> -&gt; </td>
<td style="text-align: center;"> integer64 </td>
<td style="text-align: center;"> * </td>
<td style="text-align: center;"> long double </td>
<td style="text-align: center;"> -&gt; </td>
<td style="text-align: center;"> integer64 </td>
</tr>
<tr>
<td style="text-align: center;">
  double </td>
<td style="text-align: center;"> * </td>
<td style="text-align: center;"> integer64 </td>
<td style="text-align: center;"> -&gt; </td>
<td style="text-align: center;"> integer64 </td>
<td style="text-align: center;"> * </td>
<td style="text-align: center;"> integer64 </td>
<td style="text-align: center;"> -&gt; </td>
<td style="text-align: center;"> integer64 </td>
</tr>
<tr>
<td style="text-align: center;">
  integer64 </td>
<td style="text-align: center;"> / </td>
<td style="text-align: center;"> double </td>
<td style="text-align: center;"> -&gt; </td>
<td style="text-align: center;"> integer64 </td>
<td style="text-align: center;"> / </td>
<td style="text-align: center;"> long double </td>
<td style="text-align: center;"> -&gt; </td>
<td style="text-align: center;"> double </td>
</tr>
<tr>
<td style="text-align: center;">
  double </td>
<td style="text-align: center;"> / </td>
<td style="text-align: center;"> integer64 </td>
<td style="text-align: center;"> -&gt; </td>
<td style="text-align: center;"> integer64 </td>
<td style="text-align: center;"> / </td>
<td style="text-align: center;"> long double </td>
<td style="text-align: center;"> -&gt; </td>
<td style="text-align: center;"> double </td>
</tr>
<tr>
<td style="text-align: center;">
  integer64 </td>
<td style="text-align: center;"> ^ </td>
<td style="text-align: center;"> double </td>
<td style="text-align: center;"> -&gt; </td>
<td style="text-align: center;"> integer64 </td>
<td style="text-align: center;"> / </td>
<td style="text-align: center;"> long double </td>
<td style="text-align: center;"> -&gt; </td>
<td style="text-align: center;"> double </td>
</tr>
<tr>
<td style="text-align: center;">
  double </td>
<td style="text-align: center;"> ^ </td>
<td style="text-align: center;"> integer64 </td>
<td style="text-align: center;"> -&gt; </td>
<td style="text-align: center;"> integer64 </td>
<td style="text-align: center;"> / </td>
<td style="text-align: center;"> long double </td>
<td style="text-align: center;"> -&gt; </td>
<td style="text-align: center;"> double </td>
</tr>
<tr>
<td style="text-align: center;">
 </td>
</tr>
</table>
<h3>Creating and testing S3 class 'integer64'</h3>

<p>Our creator function <code>integer64</code> takes an argument <code>length</code>, creates an atomic double vector of this length,
attaches an S3 class attribute 'integer64' to it, and that's it. We simply rely on S3 method dispatch and interpret those
64bit elements as 'long long int'.
<br><code>is.double</code> currently returns TRUE for <code>integer64</code> and might return FALSE in a later release.
Consider <code>is.double</code> to have undefined behavior and do query <code>is.integer64</code> <em>before</em> querying <code>is.double</code>.


The methods <code>is.integer64</code> and <code>is.vector</code> both return <code>TRUE</code> for <code>integer64</code>.
Note that we did not patch <code>storage.mode</code> and <code>typeof</code>, which both continue returning 'double'
Like for 32 bit <code>integer</code>, <code>mode</code> returns 'numeric' and <code>as.double</code>) tries coercing to <code>double</code>).
It is possible that 'integer64' becomes a <code>vmode</code> in package <code>ff</code>.
<br>
Further methods for creating <code>integer64</code> are <code>range</code> which returns the range of the data type if calles without arguments,
<code>rep</code>, <code>seq</code>.
<br>
For all available methods on <code>integer64</code> vectors see the index below and the examples.
</p>


<h3>Index of implemented methods</h3>


<table>
<tr>
<td style="text-align: right;">
   <b>creating,testing,printing</b> </td>
<td style="text-align: right;"> <b>see also</b>          </td>
<td style="text-align: left;"> <b>description</b> </td>
</tr>
<tr>
<td style="text-align: right;">
   <code>NA_integer64_</code> </td>
<td style="text-align: right;"> <code>NA_integer_</code> </td>
<td style="text-align: left;"> NA constant </td>
</tr>
<tr>
<td style="text-align: right;">
   <code>integer64</code> </td>
<td style="text-align: right;"> <code>integer</code> </td>
<td style="text-align: left;"> create zero atomic vector </td>
</tr>
<tr>
<td style="text-align: right;">
   <code>runif64</code> </td>
<td style="text-align: right;"> <code>runif</code> </td>
<td style="text-align: left;"> create random vector </td>
</tr>
<tr>
<td style="text-align: right;">
   <code>rep.integer64</code> </td>
<td style="text-align: right;"> <code>rep</code> </td>
<td style="text-align: left;">  </td>
</tr>
<tr>
<td style="text-align: right;">
   <code>seq.integer64</code> </td>
<td style="text-align: right;"> <code>seq</code> </td>
<td style="text-align: left;">  </td>
</tr>
<tr>
<td style="text-align: right;">
   <code>is.integer64</code> </td>
<td style="text-align: right;"> <code>is</code> </td>
<td style="text-align: left;">  </td>
</tr>
<tr>
<td style="text-align: right;">
                                     </td>
<td style="text-align: right;"> <code>is.integer</code> </td>
<td style="text-align: left;"> inherited from Base R </td>
</tr>
<tr>
<td style="text-align: right;">
   
   <code>is.vector.integer64</code> </td>
<td style="text-align: right;"> <code>is.vector</code> </td>
<td style="text-align: left;">  </td>
</tr>
<tr>
<td style="text-align: right;">
   <code>identical.integer64</code> </td>
<td style="text-align: right;"> <code>identical</code> </td>
<td style="text-align: left;">  </td>
</tr>
<tr>
<td style="text-align: right;">
   <code>length&lt;-.integer64</code> </td>
<td style="text-align: right;"> <code>length&lt;-</code> </td>
<td style="text-align: left;">  </td>
</tr>
<tr>
<td style="text-align: right;">
                                     </td>
<td style="text-align: right;"> <code>length</code> </td>
<td style="text-align: left;"> inherited from Base R </td>
</tr>
<tr>
<td style="text-align: right;">
                                     </td>
<td style="text-align: right;"> <code>names&lt;-</code> </td>
<td style="text-align: left;"> inherited from Base R </td>
</tr>
<tr>
<td style="text-align: right;">
                                     </td>
<td style="text-align: right;"> <code>names</code> </td>
<td style="text-align: left;"> inherited from Base R </td>
</tr>
<tr>
<td style="text-align: right;">
                                     </td>
<td style="text-align: right;"> <code>dim&lt;-</code> </td>
<td style="text-align: left;"> inherited from Base R </td>
</tr>
<tr>
<td style="text-align: right;">
                                     </td>
<td style="text-align: right;"> <code>dim</code> </td>
<td style="text-align: left;"> inherited from Base R </td>
</tr>
<tr>
<td style="text-align: right;">
                                     </td>
<td style="text-align: right;"> <code>dimnames&lt;-</code> </td>
<td style="text-align: left;"> inherited from Base R </td>
</tr>
<tr>
<td style="text-align: right;">
                                     </td>
<td style="text-align: right;"> <code>dimnames</code> </td>
<td style="text-align: left;"> inherited from Base R </td>
</tr>
<tr>
<td style="text-align: right;">
                                    </td>
<td style="text-align: right;"> <code>str</code> </td>
<td style="text-align: left;"> inherited from Base R, does not print values correctly </td>
</tr>
<tr>
<td style="text-align: right;">
   <code>print.integer64</code> </td>
<td style="text-align: right;"> <code>print</code> </td>
<td style="text-align: left;">  </td>
</tr>
<tr>
<td style="text-align: right;">
   <code>str.integer64</code> </td>
<td style="text-align: right;"> <code>str</code> </td>
<td style="text-align: left;">  </td>
</tr>
<tr>
<td style="text-align: right;">
 </td>
</tr>
<tr>
<td style="text-align: right;">
   <b>coercing to integer64</b> </td>
<td style="text-align: right;"> <b>see also</b>          </td>
<td style="text-align: left;"> <b>description</b> </td>
</tr>
<tr>
<td style="text-align: right;">
   <code>as.integer64</code> </td>
<td style="text-align: right;">   </td>
<td style="text-align: left;"> generic </td>
</tr>
<tr>
<td style="text-align: right;">
   <code>as.integer64.bitstring</code> </td>
<td style="text-align: right;"> <code>as.bitstring</code> </td>
<td style="text-align: left;">  </td>
</tr>
<tr>
<td style="text-align: right;">
   <code>as.integer64.character</code> </td>
<td style="text-align: right;"> <code>character</code> </td>
<td style="text-align: left;">  </td>
</tr>
<tr>
<td style="text-align: right;">
   <code>as.integer64.double</code> </td>
<td style="text-align: right;"> <code>double</code> </td>
<td style="text-align: left;">  </td>
</tr>
<tr>
<td style="text-align: right;">
   <code>as.integer64.integer</code> </td>
<td style="text-align: right;"> <code>integer</code> </td>
<td style="text-align: left;">  </td>
</tr>
<tr>
<td style="text-align: right;">
   <code>as.integer64.integer64</code> </td>
<td style="text-align: right;"> <code>integer64</code> </td>
<td style="text-align: left;">  </td>
</tr>
<tr>
<td style="text-align: right;">
   <code>as.integer64.logical</code> </td>
<td style="text-align: right;"> <code>logical</code> </td>
<td style="text-align: left;">  </td>
</tr>
<tr>
<td style="text-align: right;">
   <code>as.integer64.NULL</code> </td>
<td style="text-align: right;"> <code>NULL</code> </td>
<td style="text-align: left;">  </td>
</tr>
<tr>
<td style="text-align: right;">
 </td>
</tr>
<tr>
<td style="text-align: right;">
   <b>coercing from integer64</b> </td>
<td style="text-align: right;"> <b>see also</b>          </td>
<td style="text-align: left;"> <b>description</b> </td>
</tr>
<tr>
<td style="text-align: right;">
   <code>as.list.integer64</code> </td>
<td style="text-align: right;"> <code>as.list</code> </td>
<td style="text-align: left;"> generic </td>
</tr>
<tr>
<td style="text-align: right;">
   <code>as.bitstring</code> </td>
<td style="text-align: right;"> <code>as.bitstring</code> </td>
<td style="text-align: left;"> generic </td>
</tr>
<tr>
<td style="text-align: right;">
   <code>as.bitstring.integer64</code> </td>
<td style="text-align: right;">  </td>
<td style="text-align: left;">  </td>
</tr>
<tr>
<td style="text-align: right;">
   <code>as.character.integer64</code> </td>
<td style="text-align: right;"> <code>as.character</code> </td>
<td style="text-align: left;">  </td>
</tr>
<tr>
<td style="text-align: right;">
   <code>as.double.integer64</code> </td>
<td style="text-align: right;"> <code>as.double</code> </td>
<td style="text-align: left;">  </td>
</tr>
<tr>
<td style="text-align: right;">
   <code>as.integer.integer64</code> </td>
<td style="text-align: right;"> <code>as.integer</code> </td>
<td style="text-align: left;">  </td>
</tr>
<tr>
<td style="text-align: right;">
   <code>as.logical.integer64</code> </td>
<td style="text-align: right;"> <code>as.logical</code> </td>
<td style="text-align: left;">  </td>
</tr>
<tr>
<td style="text-align: right;">
   
 </td>
</tr>
<tr>
<td style="text-align: right;">
   <b>data structures</b> </td>
<td style="text-align: right;"> <b>see also</b>          </td>
<td style="text-align: left;"> <b>description</b> </td>
</tr>
<tr>
<td style="text-align: right;">
   <code>c.integer64</code> </td>
<td style="text-align: right;"> <code>c</code> </td>
<td style="text-align: left;"> vector concatenate </td>
</tr>
<tr>
<td style="text-align: right;">
   <code>cbind.integer64</code> </td>
<td style="text-align: right;"> <code>cbind</code> </td>
<td style="text-align: left;"> column bind </td>
</tr>
<tr>
<td style="text-align: right;">
   <code>rbind.integer64</code> </td>
<td style="text-align: right;"> <code>rbind</code> </td>
<td style="text-align: left;"> row bind </td>
</tr>
<tr>
<td style="text-align: right;">
   <code>as.data.frame.integer64</code> </td>
<td style="text-align: right;"> <code>as.data.frame</code> </td>
<td style="text-align: left;"> coerce atomic object to data.frame </td>
</tr>
<tr>
<td style="text-align: right;">
                                         </td>
<td style="text-align: right;"> <code>data.frame</code> </td>
<td style="text-align: left;"> inherited from Base R since we have coercion </td>
</tr>
<tr>
<td style="text-align: right;">
 </td>
</tr>
<tr>
<td style="text-align: right;">
   <b>subscripting</b> </td>
<td style="text-align: right;"> <b>see also</b>          </td>
<td style="text-align: left;"> <b>description</b> </td>
</tr>
<tr>
<td style="text-align: right;">
   <code>[.integer64</code> </td>
<td style="text-align: right;"> <code>[</code> </td>
<td style="text-align: left;"> vector and array extract </td>
</tr>
<tr>
<td style="text-align: right;">
   <code>[&lt;-.integer64</code> </td>
<td style="text-align: right;"> <code>[&lt;-</code> </td>
<td style="text-align: left;"> vector and array assign </td>
</tr>
<tr>
<td style="text-align: right;">
   <code>[[.integer64</code> </td>
<td style="text-align: right;"> <code>[[</code> </td>
<td style="text-align: left;"> scalar extract </td>
</tr>
<tr>
<td style="text-align: right;">
   <code>[[&lt;-.integer64</code> </td>
<td style="text-align: right;"> <code>[[&lt;-</code> </td>
<td style="text-align: left;"> scalar assign </td>
</tr>
<tr>
<td style="text-align: right;">
 </td>
</tr>
<tr>
<td style="text-align: right;">
   <b>binary operators</b> </td>
<td style="text-align: right;"> <b>see also</b>          </td>
<td style="text-align: left;"> <b>description</b> </td>
</tr>
<tr>
<td style="text-align: right;">
   <code>+.integer64</code> </td>
<td style="text-align: right;"> <code>+</code> </td>
<td style="text-align: left;"> returns integer64 </td>
</tr>
<tr>
<td style="text-align: right;">
   <code>-.integer64</code> </td>
<td style="text-align: right;"> <code>-</code> </td>
<td style="text-align: left;"> returns integer64 </td>
</tr>
<tr>
<td style="text-align: right;">
   <code>*.integer64</code> </td>
<td style="text-align: right;"> <code>*</code> </td>
<td style="text-align: left;"> returns integer64 </td>
</tr>
<tr>
<td style="text-align: right;">
   <code>^.integer64</code> </td>
<td style="text-align: right;"> <code>^</code> </td>
<td style="text-align: left;"> returns double </td>
</tr>
<tr>
<td style="text-align: right;">
   <code>/.integer64</code> </td>
<td style="text-align: right;"> <code>/</code> </td>
<td style="text-align: left;"> returns double </td>
</tr>
<tr>
<td style="text-align: right;">
   <code>%/%.integer64</code> </td>
<td style="text-align: right;"> <code>%/%</code> </td>
<td style="text-align: left;"> returns integer64 </td>
</tr>
<tr>
<td style="text-align: right;">
   <code>%%.integer64</code> </td>
<td style="text-align: right;"> <code>%%</code> </td>
<td style="text-align: left;"> returns integer64 </td>
</tr>
<tr>
<td style="text-align: right;">
 </td>
</tr>
<tr>
<td style="text-align: right;">
   <b>comparison operators</b> </td>
<td style="text-align: right;"> <b>see also</b>          </td>
<td style="text-align: left;"> <b>description</b> </td>
</tr>
<tr>
<td style="text-align: right;">
   <code>==.integer64</code> </td>
<td style="text-align: right;"> <code>==</code> </td>
<td style="text-align: left;">  </td>
</tr>
<tr>
<td style="text-align: right;">
   <code>!=.integer64</code> </td>
<td style="text-align: right;"> <code>!=</code> </td>
<td style="text-align: left;">  </td>
</tr>
<tr>
<td style="text-align: right;">
   <code>&lt;.integer64</code> </td>
<td style="text-align: right;"> <code>&lt;</code> </td>
<td style="text-align: left;">  </td>
</tr>
<tr>
<td style="text-align: right;">
   <code>&lt;=.integer64</code> </td>
<td style="text-align: right;"> <code>&lt;=</code> </td>
<td style="text-align: left;">  </td>
</tr>
<tr>
<td style="text-align: right;">
   <code>&gt;.integer64</code> </td>
<td style="text-align: right;"> <code>&gt;</code> </td>
<td style="text-align: left;">  </td>
</tr>
<tr>
<td style="text-align: right;">
   <code>&gt;=.integer64</code> </td>
<td style="text-align: right;"> <code>&gt;=</code> </td>
<td style="text-align: left;">  </td>
</tr>
<tr>
<td style="text-align: right;">
 </td>
</tr>
<tr>
<td style="text-align: right;">
   <b>logical operators</b> </td>
<td style="text-align: right;"> <b>see also</b>          </td>
<td style="text-align: left;"> <b>description</b> </td>
</tr>
<tr>
<td style="text-align: right;">
   <code>!.integer64</code> </td>
<td style="text-align: right;"> <code>!</code> </td>
<td style="text-align: left;">  </td>
</tr>
<tr>
<td style="text-align: right;">
   <code>&amp;.integer64</code> </td>
<td style="text-align: right;"> <code>&amp;</code> </td>
<td style="text-align: left;">  </td>
</tr>
<tr>
<td style="text-align: right;">
   <code>|.integer64</code> </td>
<td style="text-align: right;"> <code>|</code> </td>
<td style="text-align: left;">  </td>
</tr>
<tr>
<td style="text-align: right;">
   <code>xor.integer64</code> </td>
<td style="text-align: right;"> <code>xor</code> </td>
<td style="text-align: left;">  </td>
</tr>
<tr>
<td style="text-align: right;">
 </td>
</tr>
<tr>
<td style="text-align: right;">
   <b>math functions</b> </td>
<td style="text-align: right;"> <b>see also</b>          </td>
<td style="text-align: left;"> <b>description</b> </td>
</tr>
<tr>
<td style="text-align: right;">
   <code>is.na.integer64</code> </td>
<td style="text-align: right;"> <code>is.na</code> </td>
<td style="text-align: left;"> returns logical </td>
</tr>
<tr>
<td style="text-align: right;">
   <code>format.integer64</code> </td>
<td style="text-align: right;"> <code>format</code> </td>
<td style="text-align: left;"> returns character </td>
</tr>
<tr>
<td style="text-align: right;">
   <code>abs.integer64</code> </td>
<td style="text-align: right;"> <code>abs</code> </td>
<td style="text-align: left;"> returns integer64 </td>
</tr>
<tr>
<td style="text-align: right;">
   <code>sign.integer64</code> </td>
<td style="text-align: right;"> <code>sign</code> </td>
<td style="text-align: left;"> returns integer64 </td>
</tr>
<tr>
<td style="text-align: right;">
   <code>log.integer64</code> </td>
<td style="text-align: right;"> <code>log</code> </td>
<td style="text-align: left;"> returns double </td>
</tr>
<tr>
<td style="text-align: right;">
   <code>log10.integer64</code> </td>
<td style="text-align: right;"> <code>log10</code> </td>
<td style="text-align: left;">  returns double </td>
</tr>
<tr>
<td style="text-align: right;">
   <code>log2.integer64</code> </td>
<td style="text-align: right;"> <code>log2</code> </td>
<td style="text-align: left;">  returns double </td>
</tr>
<tr>
<td style="text-align: right;">
   <code>sqrt.integer64</code> </td>
<td style="text-align: right;"> <code>sqrt</code> </td>
<td style="text-align: left;">  returns double </td>
</tr>
<tr>
<td style="text-align: right;">
   <code>ceiling.integer64</code> </td>
<td style="text-align: right;"> <code>ceiling</code> </td>
<td style="text-align: left;"> dummy returning its argument </td>
</tr>
<tr>
<td style="text-align: right;">
   <code>floor.integer64</code> </td>
<td style="text-align: right;"> <code>floor</code> </td>
<td style="text-align: left;"> dummy returning its argument </td>
</tr>
<tr>
<td style="text-align: right;">
   <code>trunc.integer64</code> </td>
<td style="text-align: right;"> <code>trunc</code> </td>
<td style="text-align: left;"> dummy returning its argument </td>
</tr>
<tr>
<td style="text-align: right;">
   <code>round.integer64</code> </td>
<td style="text-align: right;"> <code>round</code> </td>
<td style="text-align: left;"> dummy returning its argument </td>
</tr>
<tr>
<td style="text-align: right;">
   <code>signif.integer64</code> </td>
<td style="text-align: right;"> <code>signif</code> </td>
<td style="text-align: left;"> dummy returning its argument </td>
</tr>
<tr>
<td style="text-align: right;">
 </td>
</tr>
<tr>
<td style="text-align: right;">
   <b>cumulative functions</b> </td>
<td style="text-align: right;"> <b>see also</b>          </td>
<td style="text-align: left;"> <b>description</b> </td>
</tr>
<tr>
<td style="text-align: right;">
   <code>cummin.integer64</code> </td>
<td style="text-align: right;"> <code>cummin</code> </td>
<td style="text-align: left;"> </td>
</tr>
<tr>
<td style="text-align: right;">
   <code>cummax.integer64</code> </td>
<td style="text-align: right;"> <code>cummax</code> </td>
<td style="text-align: left;"> </td>
</tr>
<tr>
<td style="text-align: right;">
   <code>cumsum.integer64</code> </td>
<td style="text-align: right;"> <code>cumsum</code> </td>
<td style="text-align: left;"> </td>
</tr>
<tr>
<td style="text-align: right;">
   <code>cumprod.integer64</code> </td>
<td style="text-align: right;"> <code>cumprod</code> </td>
<td style="text-align: left;"> </td>
</tr>
<tr>
<td style="text-align: right;">
   <code>diff.integer64</code> </td>
<td style="text-align: right;"> <code>diff</code> </td>
<td style="text-align: left;"> </td>
</tr>
<tr>
<td style="text-align: right;">
 </td>
</tr>
<tr>
<td style="text-align: right;">
   <b>summary functions</b> </td>
<td style="text-align: right;"> <b>see also</b>          </td>
<td style="text-align: left;"> <b>description</b> </td>
</tr>
<tr>
<td style="text-align: right;">
   <code>range.integer64</code> </td>
<td style="text-align: right;"> <code>range</code> </td>
<td style="text-align: left;"> </td>
</tr>
<tr>
<td style="text-align: right;">
   <code>min.integer64</code> </td>
<td style="text-align: right;"> <code>min</code> </td>
<td style="text-align: left;">  </td>
</tr>
<tr>
<td style="text-align: right;">
   <code>max.integer64</code> </td>
<td style="text-align: right;"> <code>max</code> </td>
<td style="text-align: left;">  </td>
</tr>
<tr>
<td style="text-align: right;">
   <code>sum.integer64</code> </td>
<td style="text-align: right;"> <code>sum</code> </td>
<td style="text-align: left;">  </td>
</tr>
<tr>
<td style="text-align: right;">
   <code>mean.integer64</code> </td>
<td style="text-align: right;"> <code>mean</code> </td>
<td style="text-align: left;">  </td>
</tr>
<tr>
<td style="text-align: right;">
   <code>prod.integer64</code> </td>
<td style="text-align: right;"> <code>prod</code> </td>
<td style="text-align: left;">  </td>
</tr>
<tr>
<td style="text-align: right;">
   <code>all.integer64</code> </td>
<td style="text-align: right;"> <code>all</code> </td>
<td style="text-align: left;">  </td>
</tr>
<tr>
<td style="text-align: right;">
   <code>any.integer64</code> </td>
<td style="text-align: right;"> <code>any</code> </td>
<td style="text-align: left;">  </td>
</tr>
<tr>
<td style="text-align: right;">
 </td>
</tr>
<tr>
<td style="text-align: right;">
   <b>algorithmically complex functions</b> </td>
<td style="text-align: right;"> <b>see also</b>          </td>
<td style="text-align: left;"> <b>description (caching)</b>  </td>
</tr>
<tr>
<td style="text-align: right;">
   <code>match.integer64</code> </td>
<td style="text-align: right;"> <code>match</code> </td>
<td style="text-align: left;"> position of x in table (h//o/so) </td>
</tr>
<tr>
<td style="text-align: right;">
   <code>%in%.integer64</code> </td>
<td style="text-align: right;"> <code>%in%</code> </td>
<td style="text-align: left;"> is x in table? (h//o/so) </td>
</tr>
<tr>
<td style="text-align: right;">
   <code>duplicated.integer64</code> </td>
<td style="text-align: right;"> <code>duplicated</code> </td>
<td style="text-align: left;"> is current element duplicate of previous one? (h//o/so) </td>
</tr>
<tr>
<td style="text-align: right;">
   <code>unique.integer64</code> </td>
<td style="text-align: right;"> <code>unique</code> </td>
<td style="text-align: left;"> (shorter) vector of unique values only (h/s/o/so) </td>
</tr>
<tr>
<td style="text-align: right;">
   <code>unipos.integer64</code> </td>
<td style="text-align: right;"> <code>unipos</code> </td>
<td style="text-align: left;"> positions corresponding to unique values (h/s/o/so) </td>
</tr>
<tr>
<td style="text-align: right;">
   <code>tiepos.integer64</code> </td>
<td style="text-align: right;"> <code>tiepos</code> </td>
<td style="text-align: left;"> positions of values that are tied (//o/so) </td>
</tr>
<tr>
<td style="text-align: right;">
   <code>keypos.integer64</code> </td>
<td style="text-align: right;"> <code>keypos</code> </td>
<td style="text-align: left;"> position of current value in sorted list of unique values (//o/so) </td>
</tr>
<tr>
<td style="text-align: right;">
   <code>as.factor.integer64</code> </td>
<td style="text-align: right;"> <code>as.factor</code> </td>
<td style="text-align: left;"> convert to (unordered) factor with sorted levels of previous values (//o/so) </td>
</tr>
<tr>
<td style="text-align: right;">
   <code>as.ordered.integer64</code> </td>
<td style="text-align: right;"> <code>as.ordered</code> </td>
<td style="text-align: left;"> convert to ordered factor with sorted levels of previous values (//o/so) </td>
</tr>
<tr>
<td style="text-align: right;">
   <code>table.integer64</code> </td>
<td style="text-align: right;"> <code>table</code> </td>
<td style="text-align: left;"> unique values and their frequencies (h/s/o/so) </td>
</tr>
<tr>
<td style="text-align: right;">
   <code>sort.integer64</code> </td>
<td style="text-align: right;"> <code>sort</code> </td>
<td style="text-align: left;"> sorted vector (/s/o/so) </td>
</tr>
<tr>
<td style="text-align: right;">
   <code>order.integer64</code> </td>
<td style="text-align: right;"> <code>order</code> </td>
<td style="text-align: left;"> positions of elements that would create sorted vector (//o/so) </td>
</tr>
<tr>
<td style="text-align: right;">
   <code>rank.integer64</code> </td>
<td style="text-align: right;"> <code>rank</code> </td>
<td style="text-align: left;"> (average) ranks of non-NAs, NAs kept in place (/s/o/so) </td>
</tr>
<tr>
<td style="text-align: right;">
   <code>quantile.integer64</code> </td>
<td style="text-align: right;"> <code>quantile</code> </td>
<td style="text-align: left;"> (existing) values at specified percentiles (/s/o/so) </td>
</tr>
<tr>
<td style="text-align: right;">
   <code>median.integer64</code> </td>
<td style="text-align: right;"> <code>median</code> </td>
<td style="text-align: left;"> (existing) value at percentile 0.5 (/s/o/so) </td>
</tr>
<tr>
<td style="text-align: right;">
   <code>summary.integer64</code> </td>
<td style="text-align: right;"> <code>summary</code> </td>
<td style="text-align: left;">  (/s/o/so) </td>
</tr>
<tr>
<td style="text-align: right;">
   <code>all.equal.integer64</code> </td>
<td style="text-align: right;"> <code>all.equal</code> </td>
<td style="text-align: left;"> test if two objects are (nearly) equal (/s/o/so) </td>
</tr>
<tr>
<td style="text-align: right;">
 </td>
</tr>
<tr>
<td style="text-align: right;">
   <b>helper functions</b> </td>
<td style="text-align: right;"> <b>see also</b>          </td>
<td style="text-align: left;"> <b>description</b> </td>
</tr>
<tr>
<td style="text-align: right;">
   <code>minusclass</code> </td>
<td style="text-align: right;"> <code>minusclass</code> </td>
<td style="text-align: left;"> removing class attritbute </td>
</tr>
<tr>
<td style="text-align: right;">
   <code>plusclass</code> </td>
<td style="text-align: right;"> <code>plusclass</code> </td>
<td style="text-align: left;"> inserting class attribute </td>
</tr>
<tr>
<td style="text-align: right;">
   <code>binattr</code> </td>
<td style="text-align: right;"> <code>binattr</code> </td>
<td style="text-align: left;"> define binary op behaviour </td>
</tr>
<tr>
<td style="text-align: right;">
 </td>
</tr>
<tr>
<td style="text-align: right;">
   <b>tested I/O functions</b> </td>
<td style="text-align: right;"> <b>see also</b>          </td>
<td style="text-align: left;"> <b>description</b> </td>
</tr>
<tr>
<td style="text-align: right;">
                               </td>
<td style="text-align: right;"> <code>read.table</code> </td>
<td style="text-align: left;"> inherited from Base R </td>
</tr>
<tr>
<td style="text-align: right;">
                               </td>
<td style="text-align: right;"> <code>write.table</code> </td>
<td style="text-align: left;"> inherited from Base R </td>
</tr>
<tr>
<td style="text-align: right;">
                               </td>
<td style="text-align: right;"> <code>serialize</code> </td>
<td style="text-align: left;"> inherited from Base R </td>
</tr>
<tr>
<td style="text-align: right;">
                               </td>
<td style="text-align: right;"> <code>unserialize</code> </td>
<td style="text-align: left;"> inherited from Base R </td>
</tr>
<tr>
<td style="text-align: right;">
                               </td>
<td style="text-align: right;"> <code>save</code> </td>
<td style="text-align: left;"> inherited from Base R </td>
</tr>
<tr>
<td style="text-align: right;">
                               </td>
<td style="text-align: right;"> <code>load</code> </td>
<td style="text-align: left;"> inherited from Base R </td>
</tr>
<tr>
<td style="text-align: right;">
                               </td>
<td style="text-align: right;"> <code>dput</code> </td>
<td style="text-align: left;"> inherited from Base R </td>
</tr>
<tr>
<td style="text-align: right;">
                               </td>
<td style="text-align: right;"> <code>dget</code> </td>
<td style="text-align: left;"> inherited from Base R </td>
</tr>
<tr>
<td style="text-align: right;">
</td>
</tr>
</table>
<h3>Limitations inherited from implementing 64 bit integers via an external package</h3>


<ul>
<li> <p><b>vector size</b> of atomic vectors is still limited to <code>.Machine$integer.max</code>.
However, external memory extending packages such as <code>ff</code> or <code>bigmemory</code>
can extend their address space now with <code>integer64</code>. Having 64 bit integers also help
with those not so obvious address issues that arise once we exchange data with SQL databases
and datawarehouses, which use big integers as surrogate keys, e.g. on indexed primary key columns.
This puts R into a relatively strong position compared to certain commercial statistical
softwares, which sell database connectivity but neither have the range of 64 bit integers,
nor have integers at all, nor have a single numeric data type in their macro-glue-language.
</p>
</li>
<li> <p><b>literals</b> such as <code>123LL</code> would require changes to Base R, up to then we need to write (and call)
<code>as.integer64(123L)</code> or <code>as.integer64(123)</code> or <code>as.integer64('123')</code>.
Only the latter allows to specify numbers beyond Base R's numeric data types and therefore is the recommended
way to use – using only one way may facilitate migrating code to literals at a later stage.
</p>
</li>
</ul>
<h3>Limitations inherited from Base R, Core team, can you change this?</h3>


<ul>
<li> <p><b><code>identical</code></b> with default parameters does not distinguish all bit-patterns of doubles.
For testing purposes we provide a wrapper <code>identical.integer64</code> that will distinguish all bit-patterns.
It would be desireable to have a single call of <code>identical</code> handle both, <code>double</code> and <code>integer64</code>.
</p>
</li>
<li>
<p> the <b>colon</b> operator <code>:</code> officially does not dispatches S3 methods, however, we have made it generic
</p>
<pre>
     from &lt;- lim.integer64()[1]
     to &lt;- from+99
     from:to
   </pre>
<p>As a limitation remains: it will only dispatch at its first argument <code>from</code> but not at its second <code>to</code>.
</p>
</li>
<li> <p><b><code>is.double</code></b> does not dispatches S3 methods, However, we have made it generic
and it will return <code>FALSE</code> on <code>integer64</code>.
</p>
</li>
<li> <p><b><code>c</code></b> only dispatches <code>c.integer64</code> if the first argument is <code>integer64</code>
and it does not recursively dispatch the proper method when called with argument <code>recursive=TRUE</code>
Therefore </p>
<pre>
      c(list(integer64,integer64))
    </pre>
<p>does not work and for now you can only call </p>
<pre>
       c.integer64(list(x,x))
     </pre>
</li>
<li> <p><b>generic binary operators</b> fail to dispatch *any* user-defined S3 method
if the two arguments have two different S3 classes. For example we have two classes
<code>bit</code> and <code>bitwhich</code> sparsely representing boolean vectors
and we have methods <code>&amp;.bit</code> and <code>&amp;.bitwhich</code>. For an expression
involving both as in <code> bit &amp; bitwhich</code>, none of the two methods is dispatched.
Instead a standard method is dispatched, which neither handles <code>bit</code>
nor <code>bitwhich</code>. Although it lacks symmetry, the better choice would be to
dispatch simply the method of the class of the first argument in case of class conflict.
This choice would allow authors of extension packages providing coherent behaviour
at least within their contributed classes. But as long as none of the package authors
methods is dispatched, he cannot handle the conflicting classes at all.
</p>
</li>
<li> <p><b><code>unlist</code></b> is not generic and if it were, we would face similar problems as with <code>c()</code>
</p>
</li>
<li> <p><b><code>vector</code></b> with argument <code>mode='integer64'</code> cannot work without adjustment of Base R
</p>
</li>
<li> <p><b><code>as.vector</code></b> with argument <code>mode='integer64'</code> cannot work without adjustment of Base R
</p>
</li>
<li> <p><b><code>is.vector</code></b> does not dispatch its method <code>is.vector.integer64</code>
</p>
</li>
<li> <p><b><code>mode&lt;-</code></b> drops the class 'integer64' which is returned from <code>as.integer64</code>.
Also it does not remove an existing class 'integer64' when assigning mode 'integer'.
</p>
</li>
<li> <p><b><code>storage.mode&lt;-</code></b> does not support external data types such as <code>as.integer64</code>
</p>
</li>
<li> <p><b><code>matrix</code></b> does drop the 'integer64' class attribute.
</p>
</li>
<li> <p><b><code>array</code></b>  does drop the 'integer64' class attribute.
In current R versions (1.15.1) this can be circumvented by activating the function
<code>as.vector.integer64</code> further down this file.
However, the CRAN maintainer has requested to remove <code>as.vector.integer64</code>,
even at the price of breaking previously working functionality of the package.
</p>
</li>
<li> <p><b><code>str</code></b> does not print the values of <code>integer64</code> correctly
</p>
</li>
</ul>
<h3>further limitations</h3>


<ul><li> <p><b>subscripting</b> non-existing elements and subscripting with <code>NA</code>s is currently not supported.
Such subscripting currently returns <code>9218868437227407266</code> instead of <code>NA</code> (the <code>NA</code> value of the underlying double code).
Following the full R behaviour here would either destroy performance or require extensive C-coding.
</p>
</li></ul>
<h3>Note</h3>

<p><code>integer64</code> are useful for handling database keys and exact counting in +-2^63.
Do not use them as replacement for 32bit integers, integer64 are not
supported for subscripting by R-core and they have different semantics
when combined with double. Do understand that <code>integer64</code> can only be
useful over <code>double</code> if we do not coerce it to <code>double</code>. <br><br>
While <br>
integer + double -&gt; double + double -&gt; double <br>
or <br>
1L + 0.5 -&gt; 1.5 <br>
for additive operations we coerce to <code>integer64</code> <br>
integer64 + double -&gt;  integer64 + integer64 -&gt; integer64 <br>
hence <br>
as.integer64(1) + 0.5 -&gt; 1LL + 0LL -&gt; 1LL <br><br>
see section "Arithmetic precision and coercion" above
</p>


<h3>Author(s)</h3>

<p>Jens Oehlschlägel &lt;Jens.Oehlschlaegel@truecluster.com&gt;
Maintainer: Jens Oehlschlägel &lt;Jens.Oehlschlaegel@truecluster.com&gt;
</p>


<h3>See Also</h3>

 <p><code>integer</code> in base R </p>


<h3>Examples</h3>

<pre><code class="language-R">message("Using integer64 in vector")
x &lt;- integer64(8)    # create 64 bit vector
x
is.atomic(x)         # TRUE
is.integer64(x)      # TRUE
is.numeric(x)        # TRUE
is.integer(x)        # FALSE - debatable
is.double(x)         # FALSE - might change
x[] &lt;- 1:2           # assigned value is recycled as usual
x[1:6]               # subscripting as usual
length(x) &lt;- 13      # changing length as usual
x
rep(x, 2)            # replicate as usual
seq(as.integer64(1), 10)     # seq.integer64 is dispatched on first given argument
seq(to=as.integer64(10), 1)  # seq.integer64 is dispatched on first given argument
seq.integer64(along.with=x)  # or call seq.integer64 directly
# c.integer64 is dispatched only if *first* argument is integer64 ...
x &lt;- c(x,runif(length(x), max=100))
# ... and coerces everything to integer64 - including double
x
names(x) &lt;- letters  # use names as usual
x

message("Using integer64 in array - note that 'matrix' currently does not work")
message("as.vector.integer64 removed as requested by the CRAN maintainer")
message("as consequence 'array' also does not work anymore")

message("we still can create a matrix or array by assigning 'dim'")
y &lt;- rep(as.integer64(NA), 12)
dim(y) &lt;- c(3,4)
dimnames(y) &lt;- list(letters[1:3], LETTERS[1:4])
y["a",] &lt;- 1:2       # assigning as usual
y
y[1:2,-4]            # subscripting as usual
# cbind.integer64 dispatched on any argument and coerces everything to integer64
cbind(E=1:3, F=runif(3, 0, 100), G=c("-1","0","1"), y)

message("Using integer64 in data.frame")
str(as.data.frame(x))
str(as.data.frame(y))
str(data.frame(y))
str(data.frame(I(y)))
d &lt;- data.frame(x=x, y=runif(length(x), 0, 100))
d
d$x

message("Using integer64 with csv files")
fi64 &lt;- tempfile()
write.csv(d, file=fi64, row.names=FALSE)
e &lt;- read.csv(fi64, colClasses=c("integer64", NA))
unlink(fi64)
str(e)
identical.integer64(d$x,e$x)

message("Serializing and unserializing integer64")
dput(d, fi64)
e &lt;- dget(fi64)
identical.integer64(d$x,e$x)
e &lt;- d[,]
save(e, file=fi64)
rm(e)
load(file=fi64)
identical.integer64(d,e)

### A couple of unit tests follow hidden in a dontshow{} directive ###
  

  ## Not run: 
message("== Differences between integer64 and int64 ==")
require(bit64)
require(int64)

message("-- integer64 is atomic --")
is.atomic(integer64())
#is.atomic(int64())
str(integer64(3))
#str(int64(3))

message("-- The following performance numbers are measured under RWin64  --")
message("-- under RWin32 the advantage of integer64 over int64 is smaller --")

message("-- integer64 needs 7x/5x less RAM than int64 under 64/32 bit OS
(and twice the RAM of integer as it should be) --")
#as.vector(object.size(int64(1e6))/object.size(integer64(1e6)))
as.vector(object.size(integer64(1e6))/object.size(integer(1e6)))

message("-- integer64 creates 2000x/1300x faster than int64 under 64/32 bit OS
(and 3x the time of integer) --")
t32 &lt;- system.time(integer(1e8))
t64 &lt;- system.time(integer64(1e8))
#T64 &lt;- system.time(int64(1e7))*10  # using 1e8 as above stalls our R on an i7 8 GB RAM Thinkpad
#T64/t64
t64/t32

i32 &lt;- sample(1e6)
d64 &lt;- as.double(i32)

message("-- the following timings are rather conservative since timings
 of integer64 include garbage collection -- due to looped calls")
message("-- integer64 coerces 900x/100x faster than int64
 under 64/32 bit OS (and 2x the time of coercing to integer) --")
t32 &lt;- system.time(for(i in 1:1000)as.integer(d64))
t64 &lt;- system.time(for(i in 1:1000)as.integer64(d64))
#T64 &lt;- system.time(as.int64(d64))*1000
#T64/t64
t64/t32
td64 &lt;- system.time(for(i in 1:1000)as.double(i32))
t64 &lt;- system.time(for(i in 1:1000)as.integer64(i32))
#T64 &lt;- system.time(for(i in 1:10)as.int64(i32))*100
#T64/t64
t64/td64

message("-- integer64 serializes 4x/0.8x faster than int64
 under 64/32 bit OS (and less than 2x/6x the time of integer or double) --")
t32 &lt;- system.time(for(i in 1:10)serialize(i32, NULL))
td64 &lt;- system.time(for(i in 1:10)serialize(d64, NULL))
i64 &lt;- as.integer64(i32);
t64 &lt;- system.time(for(i in 1:10)serialize(i64, NULL))
rm(i64); gc()
#I64 &lt;- as.int64(i32);
#T64 &lt;- system.time(for(i in 1:10)serialize(I64, NULL))
#rm(I64); gc()
#T64/t64
t64/t32
t64/td64


message("-- integer64 adds 250x/60x faster than int64
 under 64/32 bit OS (and less than 6x the time of integer or double) --")
td64 &lt;- system.time(for(i in 1:100)d64+d64)
t32 &lt;- system.time(for(i in 1:100)i32+i32)
i64 &lt;- as.integer64(i32);
t64 &lt;- system.time(for(i in 1:100)i64+i64)
rm(i64); gc()
#I64 &lt;- as.int64(i32);
#T64 &lt;- system.time(for(i in 1:10)I64+I64)*10
#rm(I64); gc()
#T64/t64
t64/t32
t64/td64

message("-- integer64 sums 3x/0.2x faster than int64
(and at about 5x/60X the time of integer and double) --")
td64 &lt;- system.time(for(i in 1:100)sum(d64))
t32 &lt;- system.time(for(i in 1:100)sum(i32))
i64 &lt;- as.integer64(i32);
t64 &lt;- system.time(for(i in 1:100)sum(i64))
rm(i64); gc()
#I64 &lt;- as.int64(i32);
#T64 &lt;- system.time(for(i in 1:100)sum(I64))
#rm(I64); gc()
#T64/t64
t64/t32
t64/td64

message("-- integer64 diffs 5x/0.85x faster than integer and double
(int64 version 1.0 does not support diff) --")
td64 &lt;- system.time(for(i in 1:10)diff(d64, lag=2L, differences=2L))
t32 &lt;- system.time(for(i in 1:10)diff(i32, lag=2L, differences=2L))
i64 &lt;- as.integer64(i32);
t64 &lt;- system.time(for(i in 1:10)diff(i64, lag=2L, differences=2L))
rm(i64); gc()
t64/t32
t64/td64


message("-- integer64 subscripts 1000x/340x faster than int64
(and at the same speed / 10x slower as integer) --")
ts32 &lt;- system.time(for(i in 1:1000)sample(1e6, 1e3))
t32&lt;- system.time(for(i in 1:1000)i32[sample(1e6, 1e3)])
i64 &lt;- as.integer64(i32);
t64 &lt;- system.time(for(i in 1:1000)i64[sample(1e6, 1e3)])
rm(i64); gc()
#I64 &lt;- as.int64(i32);
#T64 &lt;- system.time(for(i in 1:100)I64[sample(1e6, 1e3)])*10
#rm(I64); gc()
#(T64-ts32)/(t64-ts32)
(t64-ts32)/(t32-ts32)

message("-- integer64 assigns 200x/90x faster than int64
(and 50x/160x slower than integer) --")
ts32 &lt;- system.time(for(i in 1:100)sample(1e6, 1e3))
t32 &lt;- system.time(for(i in 1:100)i32[sample(1e6, 1e3)] &lt;- 1:1e3)
i64 &lt;- as.integer64(i32);
i64 &lt;- system.time(for(i in 1:100)i64[sample(1e6, 1e3)] &lt;- 1:1e3)
rm(i64); gc()
#I64 &lt;- as.int64(i32);
#I64 &lt;- system.time(for(i in 1:10)I64[sample(1e6, 1e3)] &lt;- 1:1e3)*10
#rm(I64); gc()
#(T64-ts32)/(t64-ts32)
(t64-ts32)/(t32-ts32)


tdfi32 &lt;- system.time(dfi32 &lt;- data.frame(a=i32, b=i32, c=i32))
tdfsi32 &lt;- system.time(dfi32[1e6:1,])
fi32 &lt;- tempfile()
tdfwi32 &lt;- system.time(write.csv(dfi32, file=fi32, row.names=FALSE))
tdfri32 &lt;- system.time(read.csv(fi32, colClasses=rep("integer", 3)))
unlink(fi32)
rm(dfi32); gc()

i64 &lt;- as.integer64(i32);
tdfi64 &lt;- system.time(dfi64 &lt;- data.frame(a=i64, b=i64, c=i64))
tdfsi64 &lt;- system.time(dfi64[1e6:1,])
fi64 &lt;- tempfile()
tdfwi64 &lt;- system.time(write.csv(dfi64, file=fi64, row.names=FALSE))
tdfri64 &lt;- system.time(read.csv(fi64, colClasses=rep("integer64", 3)))
unlink(fi64)
rm(i64, dfi64); gc()

#I64 &lt;- as.int64(i32);
#tdfI64 &lt;- system.time(dfI64&lt;-data.frame(a=I64, b=I64, c=I64))
#tdfsI64 &lt;- system.time(dfI64[1e6:1,])
#fI64 &lt;- tempfile()
#tdfwI64 &lt;- system.time(write.csv(dfI64, file=fI64, row.names=FALSE))
#tdfrI64 &lt;- system.time(read.csv(fI64, colClasses=rep("int64", 3)))
#unlink(fI64)
#rm(I64, dfI64); gc()

message("-- integer64 coerces 40x/6x faster to data.frame than int64
(and factor 1/9 slower than integer) --")
#tdfI64/tdfi64
tdfi64/tdfi32
message("-- integer64 subscripts from data.frame 20x/2.5x faster than int64
 (and 3x/13x slower than integer) --")
#tdfsI64/tdfsi64
tdfsi64/tdfsi32
message("-- integer64 csv writes about 2x/0.5x faster than int64
(and about 1.5x/5x slower than integer) --")
#tdfwI64/tdfwi64
tdfwi64/tdfwi32
message("-- integer64 csv reads about 3x/1.5 faster than int64
(and about 2x slower than integer) --")
#tdfrI64/tdfri64
tdfri64/tdfri32

rm(i32, d64); gc()


message("-- investigating the impact on garbage collection: --")
message("-- the fragmented structure of int64 messes up R's RAM --")
message("-- and slows down R's gargbage collection just by existing --")

td32 &lt;- double(21)
td32[1] &lt;- system.time(d64 &lt;- double(1e7))[3]
for (i in 2:11)td32[i] &lt;- system.time(gc(), gcFirst=FALSE)[3]
rm(d64)
for (i in 12:21)td32[i] &lt;- system.time(gc(), gcFirst=FALSE)[3]

t64 &lt;- double(21)
t64[1] &lt;- system.time(i64 &lt;- integer64(1e7))[3]
for (i in 2:11)t64[i] &lt;- system.time(gc(), gcFirst=FALSE)[3]
rm(i64)
for (i in 12:21)t64[i] &lt;- system.time(gc(), gcFirst=FALSE)[3]

#T64 &lt;- double(21)
#T64[1] &lt;- system.time(I64 &lt;- int64(1e7))[3]
#for (i in 2:11)T64[i] &lt;- system.time(gc(), gcFirst=FALSE)[3]
#rm(I64)
#for (i in 12:21)T64[i] &lt;- system.time(gc(), gcFirst=FALSE)[3]

#matplot(1:21, cbind(td32, t64, T64), pch=c("d","i","I"), log="y")
matplot(1:21, cbind(td32, t64), pch=c("d","i"), log="y")
  
## End(Not run)

</code></pre>


</div>