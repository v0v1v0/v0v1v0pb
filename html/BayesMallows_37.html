<div class="container">

<table style="width: 100%;"><tr>
<td>get_cardinalities</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Get cardinalities for each distance</h2>

<h3>Description</h3>

<p>The partition function for the Mallows model can be defined in a
computationally efficient manner as
</p>
<p style="text-align: center;"><code class="reqn">Z_{n}(\alpha) = \sum_{d_{n} \in
  \mathcal{D}_{n}} N_{m,n} e^{-(\alpha/n) d_{m}}.</code>
</p>

<p>In this equation, <code class="reqn">\mathcal{D}_{n}</code> a set containing all possible
distances at the given number of items, and <code class="reqn">d_{m}</code> is on element of
this set. Finally, <code class="reqn">N_{m,n}</code> is the number of possible configurations
of the items that give the particular distance. See
Irurozki et al. (2016),
Vitelli et al. (2018), and
Crispino et al. (2023) for details.
</p>
<p>For footrule distance, the cardinalities come from entry A062869 in the
On-Line Encyclopedia of Integer Sequences (OEIS)
(Sloane and Inc. 2020). For Spearman distance, they come from
entry A175929, and for Ulam distance from entry A126065.
</p>


<h3>Usage</h3>

<pre><code class="language-R">get_cardinalities(n_items, metric = c("footrule", "spearman", "ulam"))
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>n_items</code></td>
<td>
<p>Number of items.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>metric</code></td>
<td>
<p>Distance function, one of "footrule", "spearman", or "ulam".</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>A dataframe with two columns, <code>distance</code> which contains each distance
in the support set at the current number of items, i.e., <code class="reqn">d_{m}</code>, and
<code>value</code> which contains the number of values at this particular distances,
i.e., <code class="reqn">N_{m,n}</code>.
</p>


<h3>References</h3>

<p>Crispino M, Mollica C, Astuti V, Tardella L (2023).
“Efficient and accurate inference for mixtures of Mallows models with Spearman distance.”
<em>Statistics and Computing</em>, <b>33</b>(5).
ISSN 1573-1375, <a href="https://doi.org/10.1007/s11222-023-10266-8">doi:10.1007/s11222-023-10266-8</a>, <a href="http://dx.doi.org/10.1007/s11222-023-10266-8">http://dx.doi.org/10.1007/s11222-023-10266-8</a>.<br><br> Irurozki E, Calvo B, Lozano JA (2016).
“PerMallows: An R Package for Mallows and Generalized Mallows Models.”
<em>Journal of Statistical Software</em>, <b>71</b>(12), 1–30.
<a href="https://doi.org/10.18637/jss.v071.i12">doi:10.18637/jss.v071.i12</a>.<br><br> Sloane NJA, Inc. TOF (2020).
“The on-line encyclopedia of integer sequences.”
<a href="https://oeis.org/">https://oeis.org/</a>.<br><br> Vitelli V, Sørensen, Crispino M, Arjas E, Frigessi A (2018).
“Probabilistic Preference Learning with the Mallows Rank Model.”
<em>Journal of Machine Learning Research</em>, <b>18</b>(1), 1–49.
<a href="https://jmlr.org/papers/v18/15-481.html">https://jmlr.org/papers/v18/15-481.html</a>.
</p>


<h3>See Also</h3>

<p>Other partition function: 
<code>compute_exact_partition_function()</code>,
<code>estimate_partition_function()</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R"># Extract the cardinalities for four items with footrule distance
n_items &lt;- 4
dat &lt;- get_cardinalities(n_items)
# Compute the partition function at alpha = 2
alpha &lt;- 2
sum(dat$value * exp(-alpha / n_items * dat$distance))
#'
# We can confirm that it is correct by enumerating all possible combinations
all &lt;- expand.grid(1:4, 1:4, 1:4, 1:4)
perms &lt;- all[apply(all, 1, function(x) length(unique(x)) == 4), ]
sum(apply(perms, 1, function(x) exp(-alpha / n_items * sum(abs(x - 1:4)))))

# We do the same for the Spearman distance
dat &lt;- get_cardinalities(n_items, metric = "spearman")
sum(dat$value * exp(-alpha / n_items * dat$distance))
#'
# We can confirm that it is correct by enumerating all possible combinations
sum(apply(perms, 1, function(x) exp(-alpha / n_items * sum((x - 1:4)^2))))
</code></pre>


</div>