<div class="container">

<table style="width: 100%;"><tr>
<td>as_draws_df.mcmc_output</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Convert <code>run_mcmc</code> Output to <code>draws_df</code> Format</h2>

<h3>Description</h3>

<p>Converts MCMC output from <code>run_mcmc</code> call to a
<code>draws_df</code> format of the <code>posterior</code> package. This enables the use
of diagnostics and plotting methods of <code>posterior</code> and <code>bayesplot</code>
packages.
</p>


<h3>Usage</h3>

<pre><code class="language-R">## S3 method for class 'mcmc_output'
as_draws_df(x, times, states, ...)

## S3 method for class 'mcmc_output'
as_draws(x, times, states, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>An object of class <code>mcmc_output</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>times</code></td>
<td>
<p>A vector of indices defining which time points to return?
Default is all. If 0, no samples for the states are extracted.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>states</code></td>
<td>
<p>A vector of indices defining which states to return.
Default is all. If 0, no samples for the states are extracted.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Ignored.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>A <code>draws_df</code> object.
</p>


<h3>Note</h3>

<p>The jump chain representation is automatically expanded by
<code>as_draws</code>, but if <code>run_mcmc</code> used IS-MCMC method, the output
contains additional <code>weight</code> column corresponding to the IS-weights
(without counts), which is ignored by <code>posterior</code> and <code>bayesplot</code>,
i.e. those results correspond to approximate MCMC.
</p>


<h3>Examples</h3>

<pre><code class="language-R">
model &lt;- bsm_lg(Nile,
  sd_y = tnormal(init = 100, mean = 100, sd = 100, min = 0),
  sd_level = tnormal(init = 50, mean = 50, sd = 100, min = 0),
  a1 = 1000, P1 = 500^2)

fit1 &lt;- run_mcmc(model, iter = 2000)
draws &lt;- as_draws(fit1)
head(draws, 4)
estimate_ess(draws$sd_y)
summary(fit1, return_se = TRUE)

# More chains:
model$theta[] &lt;- c(50, 150) # change initial value
fit2 &lt;- run_mcmc(model, iter = 2000, verbose = FALSE)
model$theta[] &lt;- c(150, 50) # change initial value
fit3 &lt;- run_mcmc(model, iter = 2000, verbose = FALSE)

# it is actually enough to transform first mcmc_output to draws object,
# rest are transformed automatically inside bind_draws
draws &lt;- posterior::bind_draws(as_draws(fit1),
  as_draws(fit2), as_draws(fit3), along = "chain")

posterior::rhat(draws$sd_y)

</code></pre>


</div>