<div class="container">

<table style="width: 100%;"><tr>
<td>var.shrink.eqcor</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Ledoit-Wolf Shrinkage Variance Estimate </h2>

<h3>Description</h3>

<p>Returns a variance matrix that shrinks towards the equal correlation 
matrix â€“ a Ledoit-Wolf estimate.
</p>


<h3>Usage</h3>

<pre><code class="language-R">var.shrink.eqcor(x, weights = seq(0.5, 1.5, length = nt), shrink = NULL, 
	center = TRUE, vol.shrink = 0, sd.min = 20, quan.sd = 0.9, 
	tol = 1e-4, compatible = FALSE, verbose=2)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
 
<p>required.
A numeric matrix.
The rows are observations and the columns are the variables.
In finance, this will be a matrix of returns where the rows are
times and the columns are assets.
For the default value of <code>weights</code> the most recent observation
should be the last row.
The number of columns may exceed the number of rows, and missing
values are accepted.
A column may even have all missing values.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>weights</code></td>
<td>
 
<p>a numeric vector giving the observation weights, or <code>NULL</code>.
</p>
<p>Equal weights can be specified with <code>NULL</code> or with a 
single positive number.
</p>
<p>Otherwise, this must be a
vector of non-negative numbers that is as long as the number
of observations (rows of <code>x</code>).
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>shrink</code></td>
<td>

<p>either <code>NULL</code> meaning the shrinkage will be estimated,
or a single number meant to be in the range of zero to one.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>center</code></td>
<td>

<p>either a single logical value, or a numeric vector as long as
the number of columns of <code>x</code>.
This gives the expected value of each column. 
A value of <code>TRUE</code> means the (weighted) mean of the columns
of <code>x</code> is used.
A value of <code>FALSE</code> means zero is used.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>vol.shrink</code></td>
<td>
 
<p>a number between zero and one (inclusive) that says how much to
shrink the standard deviations towards the mean standard deviation.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>sd.min</code></td>
<td>
 
<p>a single integer giving the minimum number of observations needed
in a column of <code>x</code> for the estimated standard deviation to be
used.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>quan.sd</code></td>
<td>
 
<p>a single number in the range of zero to one (inclusive) that says
what quantile of the (used) standard deviations to use as the
estimate of standard deviation for columns without enough (or any)
data.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>tol</code></td>
<td>
 
<p>a single number indicating how large the smallest eigenvalues
of the answer should be.
All eigenvalues are made to be no smaller than <code>tol</code> times the
maximum eigenvalue.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>compatible</code></td>
<td>
 
<p>a logical value.
If <code>TRUE</code>, then the variance is scaled by the number of
observations rather than one less than the number of observations,
and there will be a warning if <code>weights</code> are not all the same.
This makes the results compatible with Ledoit-Wolf computations
and with the <code>cov.shrink</code> function in package <code>tawny</code>.
This also makes the variances smaller, which is not necessarily
a good thing.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>verbose</code></td>
<td>
 
<p>a number indicating the level of warning messages desired.
This currently controls only one warning:
</p>
<p>If at least 1, then a warning will be issued if all the values
in <code>x</code> are non-negative.  
In finance this is an indication that prices rather than returns
are input (an easy mistake to make).
</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>an estimate of the variance matrix of <code>x</code>.
The sample variance is shrunk towards equal correlation.
</p>
<p>This has two additional attributes:
</p>
<table>
<tr style="vertical-align: top;">
<td><code>shrink </code></td>
<td>

<p>the estimated or input amount of shrinkage towards the equal
correlation matrix from the sample variance.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>timedate </code></td>
<td>

<p>the date and time at which the computation was done.
</p>
</td>
</tr>
</table>
<h3>Details </h3>

<p>Time weights are quite helpful for estimating variances from returns.
The default weighting seems to perform reasonably well over a range of
situations.
However, time weighting was not studied for this estimator.
</p>


<h3>Warning </h3>

<p>The default value for <code>weights</code> assumes that the last row is the most
recent observation and the first observation is the most ancient observation.
</p>


<h3>Research Issues </h3>

<p>The method of handling missing values used in the function has not
been studied (at all).
</p>
<p>The method of boosting the result away from singularity
is completely unstudied.
For optimization it is wise to move away from singularity, just how to do
that best seems like a research question.
The method used boosts the smallest eigenvalues, it might be better
to increase the diagonal.
</p>


<h3>Revision </h3>

<p>This help was last revised 2014 March 09.
</p>


<h3>Author(s)</h3>

<p> Burns Statistics </p>


<h3>References</h3>

 
<p>Olivier Ledoit and Michael Wolf (2004) "Honey, I shrunk the sample 
covariance matrix". The Journal of Portfolio Management, volume 30,
number 4.
</p>


<h3>See Also</h3>

 <p><code>factor.model.stat</code>, <code>cov.wt</code>,
<code>slideWeight</code>.
</p>


<h3>Examples</h3>

<pre><code class="language-R">## Not run: 
var1 &lt;- var.shrink.eqcor(return.matrix)

var.unweighted &lt;- var.shrink.eqcor(return.matrix, weights=1)

## End(Not run)
</code></pre>


</div>