<div class="container">

<table style="width: 100%;"><tr>
<td>xmv</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Expand a metavariable and map it against the data</h2>

<h3>Description</h3>

<p>This function eXpands a MetaVariable from a parent behavr object.
That is, it matches this variable (from metadata) to the data <em>by id</em>.
</p>


<h3>Usage</h3>

<pre><code class="language-R">xmv(var)
</code></pre>


<h3>Arguments</h3>

<table><tr style="vertical-align: top;">
<td><code>var</code></td>
<td>
<p>the name of the variable to be extracted</p>
</td>
</tr></table>
<h3>Details</h3>

<p>This function <em>can only be called within between the <code>[]</code> of a parent</em> behavr object.
It is intended to facilitate operations between data and metadata.
For instance, when one wants to modify a variable according to a metavariable.
</p>


<h3>Value</h3>

<p>a vector of the same type as <code>var</code>, but of the same length as the number of row in the parent data.
Each row of data is matched against metadata for this specific variable.
</p>


<h3>See Also</h3>


<ul>
<li> <p>behavr – to formally create a behavr object
</p>
</li>
<li> <p>rejoin – to join all metadata with data
</p>
</li>
</ul>
<h3>Examples</h3>

<pre><code class="language-R">#### First, we create some data

library(data.table)
set.seed(1)
data &lt;- data.table(
                   id = rep(c("A", "B"), times = c(10, 26)),
                   t = c(1:10, 5:30),
                   x = rnorm(36), key = "id"
                   )

metadata = data.table(id = c("A", "B"),
                      treatment = c("w", "z"),
                      lifespan = c(19, 32),
                      ref_x = c(1, 0),
                      key = "id")
dt &lt;- behavr(data, metadata)
summary(dt)

#### Subsetting using metadata

dt[xmv(treatment) == "w"]
dt[xmv(treatment) == "w"]
dt[xmv(lifespan) &lt; 30]

#### Allocating new columns using metavariable

# Just joining lifespan (not necessary)
dt[, lif := xmv(lifespan)]
print(dt)
# Anonymously (more useful)
dt[, x2 := x - xmv(ref_x)]
print(dt)
</code></pre>


</div>