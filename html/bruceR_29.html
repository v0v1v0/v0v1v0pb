<div class="container">

<table style="width: 100%;"><tr>
<td>EFA</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Principal Component Analysis (PCA) and Exploratory Factor analysis (EFA).</h2>

<h3>Description</h3>

<p>An extension of <code>psych::principal()</code> and <code>psych::fa()</code>,
performing either Principal Component Analysis (PCA) or Exploratory Factor Analysis (EFA).
</p>
<p>Three options to specify variables:
</p>

<ol>
<li> <p><strong><code>var + items</code></strong>: use the common and unique parts of variable names.
</p>
</li>
<li> <p><strong><code>vars</code></strong>: directly define a character vector of variables.
</p>
</li>
<li> <p><strong><code>varrange</code></strong>: use the starting and stopping positions of variables.
</p>
</li>
</ol>
<h3>Usage</h3>

<pre><code class="language-R">EFA(
  data,
  var,
  items,
  vars = NULL,
  varrange = NULL,
  rev = NULL,
  method = c("pca", "pa", "ml", "minres", "uls", "ols", "wls", "gls", "alpha"),
  rotation = c("none", "varimax", "oblimin", "promax", "quartimax", "equamax"),
  nfactors = c("eigen", "parallel", "(any number &gt;= 1)"),
  sort.loadings = TRUE,
  hide.loadings = 0,
  plot.scree = TRUE,
  kaiser = TRUE,
  max.iter = 25,
  min.eigen = 1,
  digits = 3,
  file = NULL
)

PCA(..., method = "pca")
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>data</code></td>
<td>
<p>Data frame.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>var</code></td>
<td>
<p><strong>[Option 1]</strong>
Common part across variables: e.g., <code>"RSES"</code>, <code>"XX.{i}.pre"</code>
(if <code>var</code> string has any placeholder in braces <code>{...}</code>,
then <code>items</code> will be pasted into the braces, see examples)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>items</code></td>
<td>
<p><strong>[Option 1]</strong>
Unique part across variables: e.g., <code>1:10</code>, <code>c("a", "b", "c")</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>vars</code></td>
<td>
<p><strong>[Option 2]</strong>
Character vector specifying variables: e.g., <code>c("X1", "X2", "X3", "X4", "X5")</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>varrange</code></td>
<td>
<p><strong>[Option 3]</strong>
Character string specifying positions ("start:stop") of variables: e.g., <code>"A1:E5"</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>rev</code></td>
<td>
<p>[Optional] Variables that need to be reversed. It can be
(1) a character vector specifying the reverse-scoring variables (recommended), or
(2) a numeric vector specifying the item number of reverse-scoring variables (not recommended).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>method</code></td>
<td>
<p>Extraction method.
</p>

<ul>
<li> <p><code>"pca"</code> - Principal Component Analysis (default)
</p>
</li>
<li> <p><code>"pa"</code> - Principal Axis Factor Analysis
</p>
</li>
<li> <p><code>"ml"</code> - Maximum Likelihood Factor Analysis
</p>
</li>
<li> <p><code>"minres"</code> - Minimum Residual Factor Analysis
</p>
</li>
<li> <p><code>"uls"</code> - Unweighted Least Squares Factor Analysis
</p>
</li>
<li> <p><code>"ols"</code> - Ordinary Least Squares Factor Analysis
</p>
</li>
<li> <p><code>"wls"</code> - Weighted Least Squares Factor Analysis
</p>
</li>
<li> <p><code>"gls"</code> - Generalized Least Squares Factor Analysis
</p>
</li>
<li> <p><code>"alpha"</code> - Alpha Factor Analysis (Kaiser &amp; Coffey, 1965)
</p>
</li>
</ul>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>rotation</code></td>
<td>
<p>Rotation method.
</p>

<ul>
<li> <p><code>"none"</code> - None (not suggested)
</p>
</li>
<li> <p><code>"varimax"</code> - Varimax (default)
</p>
</li>
<li> <p><code>"oblimin"</code> - Direct Oblimin
</p>
</li>
<li> <p><code>"promax"</code> - Promax
</p>
</li>
<li> <p><code>"quartimax"</code> - Quartimax
</p>
</li>
<li> <p><code>"equamax"</code> - Equamax
</p>
</li>
</ul>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>nfactors</code></td>
<td>
<p>How to determine the number of factors/components?
</p>

<ul>
<li> <p><code>"eigen"</code> - based on eigenvalue (&gt; minimum eigenvalue) (default)
</p>
</li>
<li> <p><code>"parallel"</code> - based on parallel analysis
</p>
</li>
<li>
<p> (any number &gt;= 1) - user-defined fixed number
</p>
</li>
</ul>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>sort.loadings</code></td>
<td>
<p>Sort factor/component loadings by size? Defaults to <code>TRUE</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>hide.loadings</code></td>
<td>
<p>A number (0~1) for hiding absolute factor/component loadings below this value.
Defaults to <code>0</code> (does not hide any loading).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>plot.scree</code></td>
<td>
<p>Display the scree plot? Defaults to <code>TRUE</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>kaiser</code></td>
<td>
<p>Do the Kaiser normalization (as in SPSS)? Defaults to <code>TRUE</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>max.iter</code></td>
<td>
<p>Maximum number of iterations for convergence. Defaults to <code>25</code> (the same as in SPSS).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>min.eigen</code></td>
<td>
<p>Minimum eigenvalue (used if <code>nfactors="eigen"</code>). Defaults to <code>1</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>digits</code></td>
<td>
<p>Number of decimal places of output. Defaults to <code>3</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>file</code></td>
<td>
<p>File name of MS Word (<code>.doc</code>).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Arguments passed from <code>PCA()</code> to <code>EFA()</code>.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>A list of results:
</p>

<dl>
<dt><code>result</code></dt>
<dd>
<p>The R object returned from <code>psych::principal()</code> or <code>psych::fa()</code></p>
</dd>
<dt><code>result.kaiser</code></dt>
<dd>
<p>The R object returned from <code>psych::kaiser()</code> (if any)</p>
</dd>
<dt><code>extraction.method</code></dt>
<dd>
<p>Extraction method</p>
</dd>
<dt><code>rotation.method</code></dt>
<dd>
<p>Rotation method</p>
</dd>
<dt><code>eigenvalues</code></dt>
<dd>
<p>A <code>data.frame</code> of eigenvalues and sum of squared (SS) loadings</p>
</dd>
<dt><code>loadings</code></dt>
<dd>
<p>A <code>data.frame</code> of factor/component loadings and communalities</p>
</dd>
<dt><code>scree.plot</code></dt>
<dd>
<p>A <code>ggplot2</code> object of the scree plot</p>
</dd>
</dl>
<h3>Functions</h3>


<ul>
<li> <p><code>EFA()</code>: Exploratory Factor Analysis
</p>
</li>
<li> <p><code>PCA()</code>: Principal Component Analysis - a wrapper of <code>EFA(..., method="pca")</code>
</p>
</li>
</ul>
<h3>Note</h3>

<p>Results based on the <code>varimax</code> rotation method are identical to SPSS.
The other rotation methods may produce results slightly different from SPSS.
</p>


<h3>See Also</h3>

<p><code>MEAN</code>, <code>Alpha</code>, <code>CFA</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">data = psych::bfi
EFA(data, "E", 1:5)              # var + items
EFA(data, "E", 1:5, nfactors=2)  # var + items

EFA(data, varrange="A1:O5",
    nfactors="parallel",
    hide.loadings=0.45)

# the same as above:
# using dplyr::select() and dplyr::matches()
# to select variables whose names end with numbers
# (regexp: \d matches all numbers, $ matches the end of a string)
data %&gt;% select(matches("\\d$")) %&gt;%
  EFA(vars=names(.),       # all selected variables
      method="pca",        # default
      rotation="varimax",  # default
      nfactors="parallel", # parallel analysis
      hide.loadings=0.45)  # hide loadings &lt; 0.45

</code></pre>


</div>