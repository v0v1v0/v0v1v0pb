<div class="container">

<table style="width: 100%;"><tr>
<td>chunkedApply</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Applies a Function on Each Row or Column of a File-Backed Matrix</h2>

<h3>Description</h3>

<p>Similar to <code>apply</code>, but designed for file-backed matrices. The
function brings chunks of an object into physical memory by taking subsets,
and applies a function on either the rows or the columns of the chunks
using an optimized version of <code>apply</code>. If <code>nCores</code> is greater
than 1, the function will be applied in parallel using <code>mclapply</code>. In
that case the subsets of the object are taken on the slaves.
</p>


<h3>Usage</h3>

<pre><code class="language-R">chunkedApply(X, MARGIN, FUN, i = seq_len(nrow(X)),
  j = seq_len(ncol(X)), chunkSize = 5000L,
  nCores = getOption("mc.cores", 2L), verbose = FALSE, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>X</code></td>
<td>

<p>A file-backed matrix, typically the genotypes of a <code>BGData</code>
object.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>MARGIN</code></td>
<td>

<p>The subscripts which the function will be applied over. 1 indicates
rows, 2 indicates columns.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>FUN</code></td>
<td>

<p>The function to be applied.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>i</code></td>
<td>

<p>Indicates which rows of <code>X</code> should be used. Can be integer,
boolean, or character. By default, all rows are used.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>j</code></td>
<td>

<p>Indicates which columns of <code>X</code> should be used. Can be integer,
boolean, or character. By default, all columns are used.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>chunkSize</code></td>
<td>

<p>The number of rows or columns of <code>X</code> that are brought into
physical memory for processing per core. If <code>NULL</code>, all elements
in <code>i</code> or <code>j</code> are used. Defaults to 5000.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>nCores</code></td>
<td>

<p>The number of cores (passed to <code>mclapply</code>). Defaults to the number
of cores as detected by <code>detectCores</code>.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>verbose</code></td>
<td>

<p>Whether progress updates will be posted. Defaults to <code>FALSE</code>.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>

<p>Additional arguments to be passed to the <code>apply</code> like function.
</p>
</td>
</tr>
</table>
<h3>See Also</h3>

<p><code>file-backed-matrices</code> for more information on file-backed
matrices. <code>multi-level-parallelism</code> for more information on
multi-level parallelism. <code>BGData-class</code> for more information on
the <code>BGData</code> class.
</p>


<h3>Examples</h3>

<pre><code class="language-R"># Restrict number of cores to 1 on Windows
if (.Platform$OS.type == "windows") {
    options(mc.cores = 1)
}

# Load example data
bg &lt;- BGData:::loadExample()

# Compute standard deviation of columns
chunkedApply(X = geno(bg), MARGIN = 2, FUN = sd)
</code></pre>


</div>