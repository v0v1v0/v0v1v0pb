<div class="container">

<table style="width: 100%;"><tr>
<td>batchReduce</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Reduce Operation for Batch Systems</h2>

<h3>Description</h3>

<p>A parallel and asynchronous <code>Reduce</code> for batch systems.
Note that this function only defines the computational jobs.
Each job reduces a certain number of elements on one slave.
The actual computation is started with <code>submitJobs</code>.
Results and partial results can be collected with <code>reduceResultsList</code>, <code>reduceResults</code> or
<code>loadResult</code>.
</p>


<h3>Usage</h3>

<pre><code class="language-R">batchReduce(
  fun,
  xs,
  init = NULL,
  chunks = seq_along(xs),
  more.args = list(),
  reg = getDefaultRegistry()
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>fun</code></td>
<td>
<p>[<code>function(aggr, x, ...)</code>]<br>
Function to reduce <code>xs</code> with.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>xs</code></td>
<td>
<p>[<code>vector</code>]<br>
Vector to reduce.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>init</code></td>
<td>
<p>[ANY]<br>
Initial object for reducing. See <code>Reduce</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>chunks</code></td>
<td>
<p>[<code>integer(length(xs))</code>]<br>
Group for each element of <code>xs</code>. Can be generated with <code>chunk</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>more.args</code></td>
<td>
<p>[<code>list</code>]<br>
A list of additional arguments passed to <code>fun</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>reg</code></td>
<td>
<p>[<code>Registry</code>]<br>
Registry. If not explicitly passed, uses the default registry (see <code>setDefaultRegistry</code>).</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>[<code>data.table</code>] with ids of added jobs stored in column “job.id”.
</p>


<h3>See Also</h3>

<p><code>batchMap</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">
# define function to reduce on slave, we want to sum a vector
tmp = makeRegistry(file.dir = NA, make.default = FALSE)
xs = 1:100
f = function(aggr, x) aggr + x

# sum 20 numbers on each slave process, i.e. 5 jobs
chunks = chunk(xs, chunk.size = 5)
batchReduce(fun = f, 1:100, init = 0, chunks = chunks, reg = tmp)
submitJobs(reg = tmp)
waitForJobs(reg = tmp)

# now reduce one final time on master
reduceResults(fun = function(aggr, job, res) f(aggr, res), reg = tmp)
</code></pre>


</div>