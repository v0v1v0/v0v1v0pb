<div class="container">

<table style="width: 100%;"><tr>
<td>crossVal</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Cross-Validation of BB Learning</h2>

<h3>Description</h3>

<p>Run multiple fittings of <code>bbl</code> model with training/validation
division of data
</p>


<h3>Usage</h3>

<pre><code class="language-R">crossVal(
  formula,
  data,
  weights,
  novarOk = FALSE,
  lambda = 1e-05,
  lambdah = 0,
  eps = 0.9,
  nfold = 5,
  method = "pseudo",
  use.auc = TRUE,
  verbose = 1,
  progress.bar = FALSE,
  storeOpt = TRUE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>formula</code></td>
<td>
<p>Formula for model. Note that intercept has no effect.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>data</code></td>
<td>
<p>Data frame of data. Column names must match <code>formula</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>weights</code></td>
<td>
<p>Frequency vector of how many times each row of <code>data</code> must
be repeated. If <code>NULL</code>, defaults to vector of 1s. 
Fractional values are not supported.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>novarOk</code></td>
<td>
<p>Proceed even when there are predictors with only one factor level.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>lambda</code></td>
<td>
<p>Vector of L2 penalizer values for <code>method = 'pseudo'</code>. Inferences
will be repeated for each value. Restricited to non-negative values.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>lambdah</code></td>
<td>
<p>L2 penalizer in <code>method = 'pseudo'</code> applied to
parameter <code>h</code>. In contrast to <code>lambda</code>, 
only a single value is allowed.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>eps</code></td>
<td>
<p>Vector of regularization parameters, <code class="reqn">\epsilon\in[0,1]</code>, 
for <code>method = 'mf'</code>. Inference will be repeated
for each value.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>nfold</code></td>
<td>
<p>Number of folds for training/validation split.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>method</code></td>
<td>
<p><code>c('pseudo','mf')</code> for pseudo-likelihood maximization or
mean field.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>use.auc</code></td>
<td>
<p>Use AUC as the measure of prediction accuracy. Only works
if response groups are binary. If <code>FALSE</code>, mean prediction group
accuracy will be used as score.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>verbose</code></td>
<td>
<p>Verbosity level. Downgraded when relayed into <code>bbl</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>progress.bar</code></td>
<td>
<p>Display progress bar in <code>predict</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>storeOpt</code></td>
<td>
<p>Store the optimal fitted object of class <code>bbl</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Other parameters to <code>mlestimate</code>.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>The <code>data</code> slot of <code>object</code> is split into training and validation 
subsets of (<code>nfold</code>-1):1 ratio. The model is trained with the
former and validated on the latter. Individual division/fold results are 
combined into validation result for all instances in the data set and
prediction score is evaluated using the known response group
identity.
</p>


<h3>Value</h3>

<p>Object of class <code>cv.bbl</code> extending <code>bbl</code>, a list
with extra components:  
<code>regstar</code>, Value of regularization parameter, <code>lambda</code> and <code>eps</code> 
for <code>method='pseudo'</code> and <code>method='mf'</code>,respectively, 
at which the accuracy score is maximized; 
<code>maxscore</code>, Value of maximum accuracy; 
<code>cvframe</code>, Data frame of regularization parameters and scores scanned. 
If <code>use.auc=TRUE</code>, also contains 95
</p>


<h3>Examples</h3>

<pre><code class="language-R">set.seed(513)
m &lt;- 5
n &lt;- 100
predictors &lt;- list()
for(i in 1:m) predictors[[i]] &lt;- c('a','c','g','t')
names(predictors) &lt;- paste0('v',1:m)
par &lt;- list(randompar(predictors), randompar(predictors, h0=0.1, J0=0.1))
dat &lt;- randomsamp(predictors, response=c('ctrl','case'), par=par, nsample=n)
cv &lt;- crossVal(y ~ .^2, data=dat, method='mf', eps=seq(0.1,0.9,0.1))
cv
</code></pre>


</div>