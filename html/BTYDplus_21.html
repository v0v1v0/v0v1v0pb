<div class="container">

<table style="width: 100%;"><tr>
<td>elog2cbs</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Convert Event Log to customer-level summary statistic</h2>

<h3>Description</h3>

<p>Efficient implementation for the conversion of an event log into a
customer-by-sufficient-statistic (CBS) <code>data.frame</code>, with a row for each
customer, which is the required data format for estimating model parameters.
</p>


<h3>Usage</h3>

<pre><code class="language-R">elog2cbs(elog, units = "week", T.cal = NULL, T.tot = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>elog</code></td>
<td>
<p>Event log, a <code>data.frame</code> with field <code>cust</code> for the
customer ID and field <code>date</code> for the date/time of the event, which
should be of type <code>Date</code> or <code>POSIXt</code>. If a field <code>sales</code> is
present, it will be aggregated as well.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>units</code></td>
<td>
<p>Time unit, either <code>week</code>, <code>day</code>, <code>hour</code>,
<code>min</code> or <code>sec</code>. See <code>difftime</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>T.cal</code></td>
<td>
<p>End date of calibration period. Defaults to
<code>max(elog$date)</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>T.tot</code></td>
<td>
<p>End date of the observation period. Defaults to
<code>max(elog$date)</code>.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>The time unit for expressing <code>t.x</code>, <code>T.cal</code> and <code>litt</code> are
determined via the argument <code>units</code>, which is passed forward to method
<code>difftime</code>, and defaults to <code>weeks</code>.
</p>
<p>Argument <code>T.tot</code> allows one to specify the end of the observation period,
i.e. the last possible date of an event to still be included in the event
log. If  <code>T.tot</code> is not provided, then the date of the last recorded event
will be assumed to coincide with the end of the observation period. If
<code>T.tot</code> is provided, then any event that occurs after that date is discarded.
</p>
<p>Argument <code>T.cal</code> allows one to split the summary statistics into a
calibration and a holdout period. This can be useful for evaluating
forecasting accuracy for a given dataset. If <code>T.cal</code> is not provided,
then the whole observation period is considered, and is then subsequently
used for for estimating model parameters. If it is provided, then the
returned <code>data.frame</code> contains two additional fields, with <code>x.star</code>
representing the number of repeat transactions during the holdout period of
length <code>T.star</code>. And only those customers are contained, who have had at
least one event during the calibration period.
</p>
<p>Transactions with identical <code>cust</code> and <code>date</code> field are treated as
a single transaction, with <code>sales</code> being summed up.
</p>


<h3>Value</h3>

<p><code>data.frame</code> with fields:
</p>
<table>
<tr style="vertical-align: top;">
<td><code>cust</code></td>
<td>
<p>Customer id (unique key).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>Number of recurring events in calibration period.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>t.x</code></td>
<td>
<p>Time between first and last event in calibration period.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>litt</code></td>
<td>
<p>Sum of logarithmic intertransaction timings during calibration period.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>sales</code></td>
<td>
<p>Sum of sales in calibration period, incl. initial transaction. Only if <code>elog$sales</code> is provided.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>sales.x</code></td>
<td>
<p>Sum of sales in calibration period, excl. initial transaction. Only if <code>elog$sales</code> is provided.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>first</code></td>
<td>
<p>Date of first transaction in calibration period.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>T.cal</code></td>
<td>
<p>Time between first event and end of calibration period.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>T.star</code></td>
<td>
<p>Length of holdout period. Only if <code>T.cal</code> is provided.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>x.star</code></td>
<td>
<p>Number of events within holdout period. Only if <code>T.cal</code> is provided.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>sales.star</code></td>
<td>
<p>Sum of sales within holdout period. Only if <code>T.cal</code> and <code>elog$sales</code> are provided.</p>
</td>
</tr>
</table>
<h3>Examples</h3>

<pre><code class="language-R">data("groceryElog")
cbs &lt;- elog2cbs(groceryElog, T.cal = "2006-12-31", T.tot = "2007-12-30")
head(cbs)
</code></pre>


</div>