<div class="container">

<table style="width: 100%;"><tr>
<td>create_DataFile</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Prepare input data for subsequent BayLum Analysis</h2>

<h3>Description</h3>

<p>The function pre-processes input data from BIN/BINX file, XSYG files
or RLum.Analysis objects for <code>'BayLum'</code>. The parameters for
the modelling are controlled by a to be supplied YAML configuration file
(please read package vignette).
</p>


<h3>Usage</h3>

<pre><code class="language-R">create_DataFile(config_file, verbose = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>config_file</code></td>
<td>
<p>character (<strong>required</strong>): path to YAML configuration file; alternatively
the config_file can be a list similar to the R representation of the imported YAML file.
This enables on-the fly modifications</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>verbose</code></td>
<td>
<p>logical (<em>with default</em>): enable/disable terminal feedback</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>The function uses a single configuration file based on the YAML format and operates
in two modes:
</p>
<p>(1) The YAML file contains the path to the files and the function
attempts to import them. In such a case, all files must be thoroughly prepared
(e.g., strictly follow the SAR protocol etc.).
</p>
<p>(2) Alternatively, the YAML file contains no file paths but the data
were imported and processed before <code>create_DataFile()</code> was called (recommended).
Then the function is searching for objects with the sample name in the global environment.
Example: <code>samp1 &lt;- Luminescence::read_BIN2R(...)</code> with <code>samp1</code> the sample name as specified
in the YAML file.
</p>
<p>For more details, please see the package vignette.
</p>


<h3>Value</h3>

<p>Returns a list that can be processed by the modelling functions of 'BayLum'
</p>

<ul>
<li> <p><b>LT</b> (one list per sample); each list contains all L/T values for the corresponding sample;
</p>
</li>
<li> <p><b>sLT</b> (one list per sample); each list contains all uncertainties on L/T values for the corresponding sample;
</p>
</li>
<li> <p><b>ITimes</b> (one list per sample); each list contains irradiation time values for the corresponding sample;
</p>
</li>
<li> <p><b>dLab</b>, a matrix containing in line <code>i</code>, the laboratory dose rate and its variance for sample <code>i</code>;
</p>
</li>
<li> <p><b>ddot_env</b>, a matrix containing in line <code>i</code>, the environmental dose rate and its variance (excluding the common error terms) for sample <code>i</code>;
</p>
</li>
<li> <p><b>regDose</b> (one list per sample); each list contains all regenerated doses;
</p>
</li>
<li> <p><b>J</b>, a vector giving, for each BIN file, the number of aliquots selected for the analysis;
</p>
</li>
<li> <p><b>K</b>, a vector giving, for each BIN file, the number of regenerative doses in the SAR protocol;
</p>
</li>
<li> <p><b>Nb_measurement</b>, a vector giving, for each BIN file, the number of measurements;
</p>
</li>
<li> <p><b>SampleNames</b>, a character vector with the sample names;
</p>
</li>
<li> <p><b>Nb_sample</b>, the number of samples in the dataset
</p>
</li>
</ul>
<h3>Function version</h3>

<p>0.1.0
</p>


<h3>Author(s)</h3>

<p>Sebastian Kreutzer, Institute of Geography, Ruprecht-Karl University of Heidelberg (Germany), in parts based on code by Claire Christophe
, RLum Developer Team</p>


<h3>See Also</h3>

<p>write_YAMLConfigFile, yaml::read_yaml, Luminescence::read_BIN2R, Luminescence::read_XSYG2R, Luminescence::subset_SingleGrainData
</p>


<h3>Examples</h3>

<pre><code class="language-R">##set path to YAML file
yaml_file &lt;- system.file("extdata/example.yml", package = "BayLum")

samp1_file &lt;- system.file("extdata/samp1/bin.bin", package = "BayLum")
samp2_file &lt;- system.file("extdata/samp2/bin.bin", package = "BayLum")

## import BIN files
samp1 &lt;- Luminescence::read_BIN2R(samp1_file, verbose = FALSE) |&gt;
 subset(POSITION == 2 &amp; GRAIN == 32)
samp2 &lt;- Luminescence::read_BIN2R(samp2_file, verbose = FALSE) |&gt;
 subset(POSITION == 2 &amp; GRAIN == 32)

## create file
create_DataFile(yaml_file)

</code></pre>


</div>