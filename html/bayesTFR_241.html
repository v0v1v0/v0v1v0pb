<div class="container">

<table style="width: 100%;"><tr>
<td>write.projection.summary</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>
Writing Projection Summary Files
</h2>

<h3>Description</h3>

<p>The function creates two files containing projection summaries, such as the median, the lower and upper bound of the 80 and 90% probability intervals, respectively, the +/- 0.5 child variant and the constant variant. One file is in a user-friendly format, whereas the other is in a UN-specific format with internal coding of the time and the variants. In addition, a file containing  some of the model parameters is created.
</p>


<h3>Usage</h3>

<pre><code class="language-R">write.projection.summary(dir = file.path(getwd(), "bayesTFR.output"), 
    output.dir = NULL, revision = NULL, adjusted = FALSE, est.uncertainty = FALSE, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>dir</code></td>
<td>
<p>Directory containing the prediction object. It should correspond to the <code>output.dir</code> argument of the <code>tfr.predict</code> function.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>output.dir</code></td>
<td>
<p>Directory in which the resulting file will be stored. If <code>NULL</code> the same directory is used as for the prediction.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>revision</code></td>
<td>
<p>UN WPP revision number. If <code>NULL</code> it is determined from the corresponding WPP year: WPP 2008 corresponds to revision 13, every subsequent WPP increases the revision number by one. Used as a constant in the second file only.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>adjusted</code></td>
<td>
<p>Logical. By default the function writes summary using the original BHM projections. If the projection medians are adjusted (using e.g. <code>tfr.median.set</code>), setting this argument to <code>TRUE</code> causes writing the adjusted projections.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>est.uncertainty</code></td>
<td>
<p>Logical. If <code>TRUE</code> and the simulation was generated with uncertainty around estimation, that uncertainty info is included in the summaries.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Additional arguments passed to the underlying functions. Here, argument <code>precision</code> can be set to determine the number of significant digits (default is 4).</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>The first file that the function creates is called ‘<span class="file">projection_summary_user_friendly.csv</span>’ (or ‘<span class="file">projection_summary_user_friendly_adjusted.csv</span>’ if <code>adjusted=TRUE</code>), it is a comma-separated table with the following columns: 
</p>
<dl>
<dt>country_name</dt>
<dd>
<p>country name</p>
</dd>
<dt>country_code</dt>
<dd>
<p>country code</p>
</dd>
<dt>variant</dt>
<dd>
<p>name of the variant, such as “median”, “lower 80”, “upper 80”, “lower 95”, “upper 95”, “-0.5child”, “+0.5child”, “constant”</p>
</dd>
<dt><em>period1:</em></dt>
<dd>
<p>e.g. “2005-2010”: TFR for the first time period. If <code>est.uncertainty</code> is <code>TRUE</code>, the first time period is the first observed time period. Otherwise it is the last observed one.</p>
</dd>
<dt><em>period2:</em></dt>
<dd>
<p>e.g. “2010-2015”: TFR for the second time period</p>
</dd>
<dt>...</dt>
<dd>
<p>further columns with TFR projections</p>
</dd>
</dl>
<p>The second file, called ‘<span class="file">projection_summary.csv</span>’ (or ‘<span class="file">projection_summary_adjusted.csv</span>’ if <code>adjusted=TRUE</code>), also comma-separated table, contains the same information as above in a UN-specific format:
</p>
<dl>
<dt>RevID</dt>
<dd>
<p>revision number, passed to the function as an argument</p>
</dd>
<dt>VarID</dt>
<dd>
<p>variant identifier, extracted from the <code>UN_variants</code> dataset</p>
</dd>
<dt>LocID</dt>
<dd>
<p>country code</p>
</dd>
<dt>TimeID</dt>
<dd>
<p>time identifier, extracted from the <code>UN_time</code> dataset</p>
</dd>
<dt>TFR</dt>
<dd>
<p>the total fertility rate for this variant, location and time period</p>
</dd>
</dl>
<p>The third comma-separated file, called ‘<span class="file">projection_summary_parameters.csv</span>’ contains the following columns:
</p>
<dl>
<dt>country_name</dt>
<dd>
<p>country name</p>
</dd>
<dt>country_code</dt>
<dd>
<p>country code</p>
</dd>
<dt>TF_time_start_decline</dt>
<dd>
<p>start period of TFR decline</p>
</dd>
<dt>TF_max</dt>
<dd>
<p>TFR at the onset of the fertitility transition (median of the <code class="reqn">U_c</code> parameter)</p>
</dd>
<dt>TF_max_decrement</dt>
<dd>
<p>maximum decrement of TFR decline (median of the <code class="reqn">d_c</code> parameter)</p>
</dd>
<dt>TF_end_level</dt>
<dd>
<p>median of the end level of the fertility transition (<code class="reqn">\Delta_{c4}</code> parameter)</p>
</dd>
<dt>TF_end_level_low</dt>
<dd>
<p>2.5 percentile of the <code class="reqn">\Delta_{c4}</code> distribution</p>
</dd>
<dt>TF_end_level_high</dt>
<dd>
<p>97.5 percentile of the <code class="reqn">\Delta_{c4}</code> distribution</p>
</dd>
<dt>TF_time_end_decline</dt>
<dd>
<p>period of the end decline, measured using the prediction median</p>
</dd>
</dl>
<p>Note that this file is not created if <code>adjusted=TRUE</code>.
</p>


<h3>Note</h3>

<p>This function is automatically called from the <code>tfr.predict</code> function, therefore in standard cases it will not be needed to call it directly.
</p>


<h3>Author(s)</h3>

<p>Hana Sevcikova
</p>


<h3>See Also</h3>

<p><code>convert.tfr.trajectories</code>, <code>tfr.predict</code>
</p>


</div>