<div class="container">

<table style="width: 100%;"><tr>
<td>sim</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Simulation of Open, High, Low, and Close Prices</h2>

<h3>Description</h3>

<p>This function performs simulations consisting of <code>n</code> periods (e.g., days) and where each period consists of a given number of <code>trades</code>.
For each trade, the actual price <code class="reqn">P_t</code> is simulated as <code class="reqn">P_t = P_{t-1}e^{\sigma x}</code>, where <code class="reqn">\sigma</code> is the standard deviation per trade and <code class="reqn">x</code> is a random draw from a unit normal distribution.
The standard deviation per trade equals the <code>volatility</code> divided by the square root of the number of <code>trades</code>.
Trades are assumed to be observed with a given <code>probability</code>.
The bid (ask) for each trade is defined as <code class="reqn">P_t</code> multiplied by one minus (plus) half the <code>spread</code> and we assume a 50% chance that a bid (ask) is observed.
High and low prices equal the highest and lowest prices observed during the period.
Open and Close prices equal the first and the last price observed in the period.
If no trade is observed for a period, then the previous Close is used as the Open, High, Low, and Close prices for that period.
</p>


<h3>Usage</h3>

<pre><code class="language-R">sim(
  n = 10000,
  trades = 390,
  prob = 1,
  spread = 0.01,
  volatility = 0.03,
  overnight = 0,
  drift = 0,
  units = "day",
  sign = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>n</code></td>
<td>
<p>the number of periods to simulate.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>trades</code></td>
<td>
<p>the number of trades per period.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>prob</code></td>
<td>
<p>the probability to observe a trade.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>spread</code></td>
<td>
<p>the bid-ask spread.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>volatility</code></td>
<td>
<p>the open-to-close volatility.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>overnight</code></td>
<td>
<p>the close-to-open volatility.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>drift</code></td>
<td>
<p>the expected return per period.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>units</code></td>
<td>
<p>the units of the time period. One of: <code>sec</code>, <code>min</code>, <code>hour</code>, <code>day</code>, <code>week</code>, <code>month</code>, <code>year</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>sign</code></td>
<td>
<p>whether to return positive prices for buys and negative prices for sells.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>Simulated open, high, low, and close prices.
</p>


<h3>Note</h3>

<p>Please cite Ardia, Guidotti, &amp; Kroencke (2024) 
when using this package in publication.
</p>


<h3>References</h3>

<p>Ardia, D., Guidotti, E., Kroencke, T.A. (2024). Efficient Estimation of Bid-Ask Spreads from Open, High, Low, and Close Prices. Journal of Financial Economics, 161, 103916. 
<a href="https://doi.org/10.1016/j.jfineco.2024.103916">doi:10.1016/j.jfineco.2024.103916</a>
</p>


</div>