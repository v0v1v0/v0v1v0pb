<div class="container">

<table style="width: 100%;"><tr>
<td>bold_seqspec</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Get BOLD specimen + sequence data.</h2>

<h3>Description</h3>

<p>Get BOLD specimen + sequence data.
</p>


<h3>Usage</h3>

<pre><code class="language-R">bold_seqspec(
  taxon = NULL,
  ids = NULL,
  bin = NULL,
  container = NULL,
  institutions = NULL,
  researchers = NULL,
  geo = NULL,
  marker = NULL,
  response = FALSE,
  format = "tsv",
  sepfasta = FALSE,
  cleanData = FALSE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>taxon</code></td>
<td>
<p>(character) One or more taxonomic name. Optional.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ids</code></td>
<td>
<p>(character|integer|numeric) One or more IDs. Optional. IDs
include Sample IDs, Process IDs, Museum IDs and Field IDs.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>bin</code></td>
<td>
<p>(character) One or more Barcode Index Number URI. Optional.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>container</code></td>
<td>
<p>(character) One or more project codes or dataset codes.
Optional.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>institutions</code></td>
<td>
<p>(character) One or more institution's name. Optional.
Institutions are the Specimen Storing Site.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>researchers</code></td>
<td>
<p>(character) One or more researcher names. Optional.
Include collectors and specimen identifiers.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>geo</code></td>
<td>
<p>(character) One or more geographic sites.
Includes countries and province/states.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>marker</code></td>
<td>
<p>(character) Returns all records containing matching marker
codes. See Details.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>response</code></td>
<td>
<p>(logical) Default : FALSE. If TRUE, returns the object from
the Curl call. Useful for debugging and getting more detailed info on the
API call.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>format</code></td>
<td>
<p>(character) One of xml or tsv (default). tsv format gives
back a data.frame object. xml gives back parsed xml as a list.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>sepfasta</code></td>
<td>
<p>(logical) If <code>TRUE</code>, the fasta data is separated into
a list with names matching the processid's for each records. Works with both 'tsv' and 'xml' format.
Note: This means multiple sequences can have the same name if a process id has multiple sequences.
Default: <code>FALSE</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cleanData</code></td>
<td>
<p>(logical) If <code>TRUE</code>, the cell values containing only duplicated values (ex : "COI-5P|COI-5P|COI-5P") will be reduce to one value ("COI-5P") and empty string will be change to NA. Default: <code>FALSE</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Further args passed on to
<code>crul::verb-GET</code>, main purpose being curl
debugging</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>Either a data.frame, parsed xml, a http response object, or a list
of length two (data: a data.frame w/o nucleotide column, and fasta: a list
of nucleotides with the processid as name)
</p>


<h3>Large requests</h3>

<p>Some requests can lead to errors. These often have to do with requesting
data for a rank that is quite high in the tree, such as an Order,
for example, Coleoptera. If your request is taking a long time,
it's likely that something will go wrong on the BOLD server side,
or we'll not be able to parse the result here in R because
R can only process strings of a certain length. <code>bold</code>
users have reported errors in which the resulting response from
BOLD is so large that we could not parse it.
</p>
<p>A good strategy for when you want data for a high rank is to
do many separate requests for lower ranks within your target
rank. You can do this manually, or use the function
<code>taxize::downstream</code> to get all the names of a lower
rank within a target rank. There's an example in the README
(https://docs.ropensci.org/bold/#large-data)
</p>


<h3>If a request times out</h3>

<p>This is likely because you're request was for a large number of
sequences and the BOLD service timed out. You still should get
some output, those sequences that were retrieved before the time
out happened. As above, see the README
(https://docs.ropensci.org/bold/#large-data) for an example of
dealing with large data problems with this function.
</p>


<h3>Marker</h3>

<p>Notes from BOLD on the <code>marker</code> param:
"All markers for a specimen matching the search string will be returned.
ie. A record with COI-5P and ITS will return sequence data for both
markers even if only COI-5P was specified."
</p>
<p>You will likely end up with data with markers that you did not request -
just be sure to filter those out as needed.
</p>


<h3>Note</h3>

<p>If using the <code>taxon</code> parameter with another parameter, if the <code>taxon</code> isn't found in the public database, it will act as if no <code>taxon</code> was specified and try to return all the data for the other specified parameter. You can make sure that the <code>taxon</code> you're looking up has public records with <code>bold_stats</code>.
</p>


<h3>References</h3>

<p>http://v4.boldsystems.org/index.php/resources/api?type=webservices
</p>


<h3>Examples</h3>

<pre><code class="language-R">## Not run: 
bold_seqspec(taxon='Osmia')
bold_seqspec(taxon='Osmia', format='xml')
bold_seqspec(taxon='Osmia', response=TRUE)
res &lt;- bold_seqspec(taxon='Osmia', sepfasta=TRUE)
res$fasta[1:2]
res$fasta['GBAH0293-06']

# records that match a marker name
res &lt;- bold_seqspec(taxon="Melanogrammus aeglefinus", marker="COI-5P")

# records that match a geographic locality
res &lt;- bold_seqspec(taxon="Melanogrammus aeglefinus", geo="Canada")

## curl debugging
### You can do many things, including get verbose output on the curl call,
### and set a timeout
head(bold_seqspec(taxon='Osmia', verbose = TRUE))
head(bold_seqspec(taxon='Osmia', timeout_ms = 1))

## End(Not run)

</code></pre>


</div>