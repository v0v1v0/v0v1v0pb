<div class="container">

<table style="width: 100%;"><tr>
<td>deseasonalized_trend</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>
deseasonalized_trend
</h2>

<h3>Description</h3>

<p>A convenience function to analyze a timeseries and return an estimate (via gam, using day of week factors and smoothed timestamp) of whether, after accounting for day-of-week, there is a significant time-based influence and what that influence is.
</p>


<h3>Usage</h3>

<pre><code class="language-R">deseasonalized_trend(df, w=NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>df</code></td>
<td>

<p>a data frame containing timestamp and value entries
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>w</code></td>
<td>

<p>number of attempts (n for binomial data)
</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>a list with the following items:
</p>
<table>
<tr style="vertical-align: top;">
<td><code>pval</code></td>
<td>
<p>pval given by anova on gam, to indicate whether s(timestamp) is significant</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>smoothed_prediction</code></td>
<td>
<p>a smoothed prediction over time (on Wednesdays), to give a human-understandable idea of what the change over time has been</p>
</td>
</tr>
</table>
<h3>Author(s)</h3>

<p>Thomas Lotze &lt;thomaslotze@thomaslotze.com&gt;
</p>


<h3>Examples</h3>

<pre><code class="language-R">timestamps = as.numeric(as.POSIXct(seq(as.Date("2012-01-01"),as.Date("2012-05-03"),by=1)))
df=data.frame(timestamp = timestamps, value = rnorm(length(timestamps)))
dt = deseasonalized_trend(df)
if (dt$pval &lt; 0.01) {
  print("Significant time-based factor")
  plot(df$timestamp, dt$smoothed_prediction)
} else {
  print("No significant time-based factor")
}

df=data.frame(timestamp = timestamps,
              value = sapply(timestamps, function(t) {rpois(1, lambda=t-min(timestamps))}))
dt = deseasonalized_trend(df)
if (dt$pval &lt; 0.01) {
  print("Significant time-based factor")
  plot(df$timestamp, dt$smoothed_prediction)
} else {
  print("No significant time-based factor")
}

</code></pre>


</div>