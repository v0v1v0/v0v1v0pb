<div class="container">

<table style="width: 100%;"><tr>
<td>bd_write</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Writes the result of operations with <code>bdplyr()</code> to disk</h2>

<h3>Description</h3>

<p>Writes a remote table to disk that was called via bdplyr.
It will collect the data and write to disk in the chosen format.
You will only need this function if you have not yet collected the data
using the <code>bd_collect()</code>.
</p>
<p>The comprehensive function <code>bd_write()</code> takes as a parameter <code>.write_fn</code>,
which will be the name of some function (without parentheses) capable of
writing a tibble to disk.
</p>
<p>As helpers, the <code>bd_write_rds()</code> and <code>bd_write_csv()</code> functions make it
easier to write in these formats, more common in everyday life, calling
writing functions from <code>{readr}</code> package.
</p>


<h3>Usage</h3>

<pre><code class="language-R">bd_write(
  .lazy_tbl,
  .write_fn = `?`(typed::Function()),
  path = `?`(typed::Character(length = 1)),
  overwrite = `?`(FALSE, typed::Logical(1)),
  ...
)

bd_write_rds(.lazy_tbl, path, overwrite = FALSE, compress = "none", ...)

bd_write_csv(
  .lazy_tbl,
  path = `?`(typed::Character(1)),
  overwrite = `?`(FALSE, typed::Logical(1)),
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>.lazy_tbl</code></td>
<td>
<p>A lazy tibble, tipically the output of <code>bdplyr()</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>.write_fn</code></td>
<td>
<p>A function for writing the result of a tibble to
disk. Do not use () afther the function's name, the function <em>object</em> should be passed. Some functions the user might consider are:
writexl::write_xlsx, jsonlite::write_json, foreign::write.dta,
arrow::write_feather, etc.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>path</code></td>
<td>
<p>String containing the path for the file to be created.
The desired folders must already exist and the file should normally end with
the corresponding extension.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>overwrite</code></td>
<td>
<p>FALSE by default. Indicates whether the local file should
be overwritten if it already exists. Use with care.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Parameters passed to the <code>.write_fn</code> function.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>compress</code></td>
<td>
<p>For <code>bd_write_rds()</code> only. Compression method to use: "none"
(default), "gz" ,"bz", or "xz", in ascending order of compression.
Remember that the higher the compression, the smaller the file size on disk,
ut also the longer the time to load the data. See also: <code>readr::write_rds()</code>.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>String containing the path to the created file.
</p>


<h3>Examples</h3>

<pre><code class="language-R">## Not run: 

 cool_db &lt;- basedosdados::

# setup billing
basedosdados::set_billing_id("MY-BILLING-ID")

# connect with a Base dos Dados db

cool_db_ssp &lt;- basedosdados::bdplyr(
 "basedosdados.br_sp_gov_ssp.ocorrencias_registradas")

# subset the data
my_subset &lt;- cool_db_ssp %&gt;%
 dplyr::filter(ano == 2021, mes == 04)

# write it in csv - generic function

basedosdados::bd_write(.lazy_tbl = my_subset,
                      .write_fn = write.csv,
                      "data-raw/ssp_subset.csv"
)

# write in .xlsx
basedosdados::bd_write(.lazy_tbl = my_subset,
                      .write_fn = writexl::write_xlsx,
                      "data-raw/ssp_subset.xlsx"
)

# using the derivatives functions
# to csv
basedosdados::bd_write_csv(.lazy_tbl = my_subset,
                          "data-raw/ssp_subset2.csv"
)

#' # to rds
basedosdados::bd_write_rds(.lazy_tbl = my_subset,
                           "data-raw/ssp_subset.rds"
)

# to rds - with compression
basedosdados::bd_write_rds(.lazy_tbl = my_subset,
                           "data-raw/ssp_subset2.rds",
                           compress = "gz"
)

# to rds - with HARD compression
basedosdados::bd_write_rds(.lazy_tbl = my_subset,
                           "data-raw/ssp_subset3.rds",
                           compress = "xz"
)

## using other write functions

# json
basedosdados::bd_write(.lazy_tbl = my_subset,
                       .write_fn = jsonlite::write_json,
                       "data-raw/ssp_subset.json"
)

# dta
basedosdados::bd_write(.lazy_tbl = my_subset,
                       .write_fn = foreign::write.dta,
                       "data-raw/ssp_subset.dta")
)

# feather
basedosdados::bd_write(.lazy_tbl = my_subset,
                       .write_fn = arrow::write_feather,
                       "data-raw/ssp_subset.feather"
)

## End(Not run)
</code></pre>


</div>