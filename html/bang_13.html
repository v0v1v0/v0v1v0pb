<div class="container">

<table style="width: 100%;"><tr>
<td>set_user_prior</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Set a user-defined prior</h2>

<h3>Description</h3>

<p>Constructs a user-defined prior distribution for use as the argument
<code>prior</code> in <code>hef</code> or <code>hanova1</code>.
</p>


<h3>Usage</h3>

<pre><code class="language-R">set_user_prior(
  prior,
  ...,
  model = c("beta_binom", "gamma_pois", "anova1"),
  anova_d = 2
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>prior</code></td>
<td>
<p>An R function returning <strong>the log of</strong> the prior density
for of (perhaps a subset of) the hyperparameter vector <code class="reqn">\phi</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Further arguments giving the names and values of any
parameters involved in the function <code>prior</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>model</code></td>
<td>
<p>A character string.  Abbreviated name of the model:
"beta_binom" for beta-binomial and "gamma_pois" for gamma-Poisson
(see <code>hef</code>), "anova1" for 1-way ANOVA (see
<code>hanova1</code>).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>anova_d</code></td>
<td>
<p>An integer scalar.  Only relevant if <code>model = anova1</code>.
If <code>anova_d = 2</code> then <code>prior</code> must return the log-prior
density for the standard deviations <code class="reqn">(\sigma_\alpha, \sigma)</code>
and a normal prior with mean <code>mu0</code> and standard deviation
<code>sigma0</code> is used for <code class="reqn">\mu</code>.  The values of <code>mu0 = 0</code> and
<code>sigma0 = Inf</code> are set in the call to <code>hanova1</code>, with default
values <code>mu0 = 0</code> and <code>sigma0 = Inf</code>.
If <code>anova_d = 3</code> then <code>prior</code> must return the log-prior
density for <code class="reqn">(\mu, \sigma_\alpha, \sigma)</code>.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>For details of the hyperparameters in <code class="reqn">\phi</code> see the
<strong>Details</strong> section of <code>hef</code> for the models
<code>beta_binom</code> and <code>gamma_pois</code> and of <code>hanova1</code>
for the model <code>anova1</code>.
</p>


<h3>Value</h3>

<p>A list of class <code>"bang_prior"</code>.  Will contain the component
<code>prior</code>, the user-supplied function to evaluate the log of the prior,
and any arguments supplied in ....
</p>


<h3>See Also</h3>

<p><code>hef</code> for hierarchical exponential family models.
</p>
<p><code>hanova1</code> for hierarchical one-way analysis of
variance (ANOVA).
</p>


<h3>Examples</h3>

<pre><code class="language-R"># User-defined prior, passing parameters
# (equivalent to prior = "gamma" with hpars = c(1, 0.01, 1, 0.01))
user_prior &lt;- function(x, hpars) {
  return(dexp(x[1], hpars[1], log = TRUE) + dexp(x[2], hpars[2], log = TRUE))
}
user_prior_fn &lt;- set_user_prior(user_prior, hpars = c(0.01, 0.01))
</code></pre>


</div>