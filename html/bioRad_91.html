<div class="container">

<table style="width: 100%;"><tr>
<td>map</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Map a plan position indicator (<code>ppi</code>) on a map</h2>

<h3>Description</h3>

<p>Plots a plan position indicator (<code>ppi</code>) on a base layer
</p>


<h3>Usage</h3>

<pre><code class="language-R">map(x, ...)

## S3 method for class 'ppi'
map(
  x,
  map = "cartolight",
  param,
  alpha = 0.7,
  xlim,
  ylim,
  zlim = c(-20, 20),
  ratio,
  radar_size = 3,
  radar_color = "#202020",
  n_color = 1000,
  palette = NA,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>A <code>ppi</code> object.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Arguments passed to <code>ggplot2::ggplot()</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>map</code></td>
<td>
<p>Basemap to use, one of <code>rosm::osm.types()</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>param</code></td>
<td>
<p>Character. Scan parameter to plot, e.g. <code>DBZH</code> or <code>VRADH</code>. See
<code>summary.param()</code> for commonly available parameters.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>alpha</code></td>
<td>
<p>Numeric. Transparency of the data, value between 0 and 1.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>xlim</code></td>
<td>
<p>Numeric vector of length 2. Range of x values (degrees longitude)
to plot.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ylim</code></td>
<td>
<p>Numeric vector of length 2. Range of y values (degrees latitude)
to plot.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>zlim</code></td>
<td>
<p>Numeric vector of length 2. The range of values to plot.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ratio</code></td>
<td>
<p>Numeric. Aspect ratio between x and y scale, by default
<code class="reqn">1/cos(latitude radar * pi/180)</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>radar_size</code></td>
<td>
<p>Numeric. Size of the symbol indicating the radar position.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>radar_color</code></td>
<td>
<p>Character. Color of the symbol indicating the radar
position.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>n_color</code></td>
<td>
<p>Numeric. Number of colors (&gt;=1) to use in the palette.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>palette</code></td>
<td>
<p>Character vector. Hexadecimal color values defining the plot
color scale, e.g. output from <code>viridisLite::viridis()</code>.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>Available scan parameters for mapping can by printed to screen by
<code>summary(x)</code>. Commonly available parameters are:
</p>

<ul>
<li> <p><code>DBZH</code>, <code>DBZ</code>: (Logged) reflectivity factor (dBZ)
</p>
</li>
<li> <p><code>TH</code>, <code>T</code>: (Logged) uncorrected reflectivity factor (dBZ)
</p>
</li>
<li> <p><code>VRADH</code>, <code>VRAD</code>: Radial velocity (m/s). Radial velocities towards the radar
are negative, while radial velocities away from the radar are positive
</p>
</li>
<li> <p><code>RHOHV</code>: Correlation coefficient (unitless) Correlation between vertically
polarized and horizontally polarized reflectivity factor
</p>
</li>
<li> <p><code>PHIDP</code>: Differential phase (degrees)
</p>
</li>
<li> <p><code>ZDR</code>: (Logged) differential reflectivity (dB)
The scan parameters are named according to the OPERA data information
model (ODIM), see Table 16 in the
<a href="https://github.com/adokter/vol2bird/blob/master/doc/OPERA2014_O4_ODIM_H5-v2.2.pdf">ODIM specification</a>.
</p>
</li>
</ul>
<h3>Value</h3>

<p>A ggplot object
</p>


<h3>Methods (by class)</h3>


<ul><li> <p><code>map(ppi)</code>: Plot a <code>ppi</code> object on a map.
</p>
</li></ul>
<h3>See Also</h3>


<ul><li> <p><code>project_as_ppi()</code>
</p>
</li></ul>
<h3>Examples</h3>

<pre><code class="language-R"># Project a scan as a ppi
ppi &lt;- project_as_ppi(example_scan)

if (all(sapply(c("ggspatial","prettymapr", "rosm"), requireNamespace, quietly = TRUE))) {
# Choose a basemap
basemap &lt;- rosm::osm.types()[1]

# Map the radial velocity of the ppi onto the basemap
map(ppi, map = basemap, param = "VRADH")

# Extend the plotting range of velocities, from -50 to 50 m/s
map(ppi, map = basemap, param = "VRADH", zlim = c(-50, 50))

# Map the reflectivity
map(ppi, map = basemap, param = "DBZH")

# Change the color palette to Viridis colors
map(ppi, map = basemap, param = "DBZH", palette = viridis::viridis(100), zlim=c(-10,10))

# Give the data more transparency
map(ppi, map = basemap, param = "DBZH", alpha = 0.3)

# Change the appearance of the symbol indicating the radar location
map(ppi, map = basemap, radar_size = 5, radar_color = "blue")

# Crop the map
map(ppi, map = basemap, xlim = c(12.4, 13.2), ylim = c(56, 56.5))
}

</code></pre>


</div>