<div class="container">

<table style="width: 100%;"><tr>
<td>write_BayLumFiles</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Write BayLum .csv-files</h2>

<h3>Description</h3>

<p>This function allows the user to write all .csv files expected by
Generate_DataFile and Generate_DataFile_MG. Unlike create_FolderTemplates,
this function makes it possible to write .csv files with all information directly from R.
No further modification of .csv files are required. The purpose of this function is (i) to reduce tedious manual editing of .csv-files and the errors that result
(ii) to introduce an easy way to review information inside .csv-files (by revisiting code rather than opening individual .csv-files) and (iii) to streamline folder
and file creation when preparing data to run BayLum's modelling functions. Note: the user will still need to move the appropriate .bin-files into all the sample folders.
</p>


<h3>Usage</h3>

<pre><code class="language-R">write_BayLumFiles(
  folder,
  SampleNames = "Sample_1",
  BinPerSample = rep(1, length(SampleNames)),
  SubSampleNames = NULL,
  DiscPos = NULL,
  DRenv = 1,
  DRenv.error = 0.04,
  DRsource = 0.1,
  DRsource.error = 0.002,
  signal.integral.min = 6,
  signal.integral.max = 10,
  background.integral.min = 346,
  background.integral.max = 395,
  inflatePercent = 0.025,
  nbOfLastCycleToRemove = 2
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>folder</code></td>
<td>
<p>character (<em>required</em>*): The name of the main folder in which all subsequent BayLum files and folders will be located. This could be a path to an already existing folder, or the path/name of a folder to be created.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>SampleNames</code></td>
<td>
<p>character (<em>required</em>): Vector of sample names.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>BinPerSample</code></td>
<td>
<p>numeric (<em>with default</em>): Vector of numbers indicating the number of .bin-files per sample.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>SubSampleNames</code></td>
<td>
<p>character (<em>optional</em>): Vector of names to give each subfolder within a sample when the number of .bin-files in a sample counts more than one. If omitted or NULL, the subfolders are named by the subfolder count number.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>DiscPos</code></td>
<td>
<p>numeric (<em>with default</em>): List of data frames with each data frame having one or two columns to identify aliquots/grains to be included in the analysis. The first column corresponds to the position number, and the second column corresponds to the grain number. If the data frame has only one column, a Disc.csv will be written. If the data.frame has two columns, a DiscPos.csv will be written. The length of the list should be the number of .bin-files included.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>DRenv</code></td>
<td>
<p>numeric (<em>with default</em>): Vector where <code>DRenv[i]</code> corresponds to environmental dose rate for <code>.bin-file[i]</code>. Length should be one or the number of .bin-files included in the analysis.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>DRenv.error</code></td>
<td>
<p>numeric (<em>with default</em>): Vector where <code>DRenv.error[i]</code> corresponds to environmental dose rate error for <code>.bin-file[i]</code>. Length should be one or the number of .bin-files included in the analysis.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>DRsource</code></td>
<td>
<p>numeric (<em>with default</em>): Vector where <code>DRsource[i]</code> corresponds to source dose rate for <code>.bin-file[i]</code>. Length should be one or the number of .bin-files included in the analysis.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>DRsource.error</code></td>
<td>
<p>numeric (<em>with default</em>): Vector where <code>DRsource.error[i]</code> corresponds to source dose rate error for <code>.bin-file[i]</code>. Length should be one or the number of .bin-files included in the analysis.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>signal.integral.min</code></td>
<td>
<p>numeric (<em>with default</em>): Vector where <code>signal.integral.min[i]</code> corresponds to the channel number where the OSL signal should be summed from for<code>bin-file[i]</code> Length should be one or the number of .bin-files included in the analysis.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>signal.integral.max</code></td>
<td>
<p>numeric (<em>with default</em>): Vector where <code>signal.integral.max[i]</code> corresponds to the channel number where the OSL signal should be summed from to for <code>bin-file[i]</code> Length should be one or the number of .bin-files included in the analysis.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>background.integral.min</code></td>
<td>
<p>numeric (<em>with default</em>): Vector where <code>background.integral.min[i]</code> corresponds to the channel number where the OSL background signal should be summed from for<code>bin-file[i]</code> Length should be one or the number of .bin-files included in the analysis.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>background.integral.max</code></td>
<td>
<p>numeric (<em>with default</em>): Vector where <code>background.integral.max[i]</code> corresponds to the channel number where the OSL background signal should be summed to for <code>.bin-file[i]</code>. Length should be one or the number of .bin-files included in the analysis.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>inflatePercent</code></td>
<td>
<p>numeric (<em>with default</em>): Vector where <code>inflatePercent[i]</code> corresponds to uncertainty due to instrumental reproducibility to<code>bin-file[i]</code> Length should be one or the number of .bin-files included in the analysis.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>nbOfLastCycleToRemove</code></td>
<td>
<p>numeric (<em>with default</em>): Vector where <code>nbOfLastCycleToRemove[i]</code> corresponds to the number of regeneration points to remove in analysis for <code>bin-file[i]</code> Length should be one or the number of .bin-files included in the analysis.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>The function returns nothing, but writes the folder structure.
</p>


<h3>Function version</h3>

<p>0.1.0
</p>


<h3>Author(s)</h3>

<p>Frederik Baumgarten, RadPhys, DTU Physics, Technical University of Denmark (Denmark)
, RLum Developer Team</p>


<h3>See Also</h3>

<p>Generate_DataFile, Generate_DataFile_MG
</p>


<h3>Examples</h3>

<pre><code class="language-R"># example samples
SampleNames &lt;- c("OSL-1-MG","OSL-2-SG")

# number of .bin-files for each sample
BinPerSample &lt;- c(1,3)

# List of data.frames of accepted aliquot/grain to be included
# in the analysis for each .bin-file.
DiscPos &lt;- list(
data.frame("position" = 1:48),
data.frame("position" = c(1,1,1,1), "grain" = c(4,67,92,99)),
data.frame("position" = c(2,2,2,2), "grain" = c(7,13,41,72)),
data.frame("position" = c(3,3,3,3), "grain" = c(7,52,67,88)))

# example 1: write to disk (all together)
write_BayLumFiles(
folder = paste(tempdir(),"new_BayLum_folder",sep = "/"),
SampleNames = SampleNames,
BinPerSample = BinPerSample,
DiscPos = DiscPos,
DRenv = c(1.75, 1.52, 1.52, 1.52),
DRenv.error = c(0.04, 0.03, 0.03, 0.03),
DRsource = c(0.2075, 0.1501, 0.1501, 0.1501),
DRsource.error = c(0.0010, 0.0008, 0.0008, 0.0008))

# example 2: write to disk (by sample)
write_BayLumFiles(
folder = paste(tempdir(),"new_BayLum_folder",sep = "/"),
SampleNames = "OSL-1-MG",
BinPerSample = 1,
DiscPos = DiscPos[[1]],
DRenv = 1.75,
DRenv.error = 0.04,
DRsource = 0.2075,
DRsource.error = 0.0010)

write_BayLumFiles(
folder = paste(tempdir(),"new_BayLum_folder",sep = "/"),
SampleNames = "OSL-2-SG",
BinPerSample = 3,
DiscPos = DiscPos[2:4],
DRenv = 1.75,
DRenv.error = 0.04,
DRsource = 0.2075,
DRsource.error = 0.0010)

</code></pre>


</div>