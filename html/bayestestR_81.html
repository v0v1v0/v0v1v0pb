<div class="container">

<table style="width: 100%;"><tr>
<td>diagnostic_posterior</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Posteriors Sampling Diagnostic</h2>

<h3>Description</h3>

<p>Extract diagnostic metrics (Effective Sample Size (<code>ESS</code>), <code>Rhat</code> and Monte
Carlo Standard Error <code>MCSE</code>).
</p>


<h3>Usage</h3>

<pre><code class="language-R">diagnostic_posterior(posterior, ...)

## Default S3 method:
diagnostic_posterior(posterior, diagnostic = c("ESS", "Rhat"), ...)

## S3 method for class 'stanreg'
diagnostic_posterior(
  posterior,
  diagnostic = "all",
  effects = c("fixed", "random", "all"),
  component = c("location", "all", "conditional", "smooth_terms", "sigma",
    "distributional", "auxiliary"),
  parameters = NULL,
  ...
)

## S3 method for class 'brmsfit'
diagnostic_posterior(
  posterior,
  diagnostic = "all",
  effects = c("fixed", "random", "all"),
  component = c("conditional", "zi", "zero_inflated", "all"),
  parameters = NULL,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>posterior</code></td>
<td>
<p>A <code>stanreg</code>, <code>stanfit</code>, <code>brmsfit</code>, or <code>blavaan</code> object.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Currently not used.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>diagnostic</code></td>
<td>
<p>Diagnostic metrics to compute.  Character (vector) or list
with one or more of these options: <code>"ESS"</code>, <code>"Rhat"</code>, <code>"MCSE"</code> or <code>"all"</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>effects</code></td>
<td>
<p>Should parameters for fixed effects, random effects
or both be returned? Only applies to mixed models. May be abbreviated.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>component</code></td>
<td>
<p>Should all predictor variables, predictor variables for the
conditional model, the zero-inflated part of the model, the dispersion
term or the instrumental variables be returned? Applies to models
with zero-inflated and/or dispersion formula, or to models with instrumental
variable (so called fixed-effects regressions). May be abbreviated. Note that the
<em>conditional</em> component is also called <em>count</em> or <em>mean</em>
component, depending on the model.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>parameters</code></td>
<td>
<p>Regular expression pattern that describes the parameters that
should be returned.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p><strong>Effective Sample (ESS)</strong> should be as large as possible, although for
most applications, an effective sample size greater than 1000 is sufficient
for stable estimates (<em>Bürkner, 2017</em>). The ESS corresponds to the number of
independent samples with the same estimation power as the N autocorrelated
samples. It is is a measure of "how much independent information there is
in autocorrelated chains" (<em>Kruschke 2015, p182-3</em>).
</p>
<p><strong>Rhat</strong> should be the closest to 1. It should not be larger than 1.1
(<em>Gelman and Rubin, 1992</em>) or 1.01 (<em>Vehtari et al., 2019</em>). The split
Rhat statistic quantifies the consistency of an ensemble of Markov chains.
</p>
<p><strong>Monte Carlo Standard Error (MCSE)</strong> is another measure of accuracy of the
chains. It is defined as standard deviation of the chains divided by their
effective sample size (the formula for <code>mcse()</code> is from Kruschke 2015, p.
187). The MCSE "provides a quantitative suggestion of how big the estimation
noise is".
</p>


<h3>References</h3>


<ul>
<li>
<p> Gelman, A., &amp; Rubin, D. B. (1992). Inference from iterative simulation
using multiple sequences. Statistical science, 7(4), 457-472.
</p>
</li>
<li>
<p> Vehtari, A., Gelman, A., Simpson, D., Carpenter, B., and Bürkner, P. C.
(2019). Rank-normalization, folding, and localization: An improved Rhat
for assessing convergence of MCMC. arXiv preprint arXiv:1903.08008.
</p>
</li>
<li>
<p> Kruschke, J. (2014). Doing Bayesian data analysis: A tutorial with R,
JAGS, and Stan. Academic Press.
</p>
</li>
</ul>
<h3>Examples</h3>

<pre><code class="language-R">

# rstanarm models
# -----------------------------------------------
model &lt;- suppressWarnings(
  rstanarm::stan_glm(mpg ~ wt + gear, data = mtcars, chains = 2, iter = 200, refresh = 0)
)
diagnostic_posterior(model)

# brms models
# -----------------------------------------------
model &lt;- brms::brm(mpg ~ wt + cyl, data = mtcars)
diagnostic_posterior(model)


</code></pre>


</div>