<div class="container">

<table style="width: 100%;"><tr>
<td>simulation</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Simulate Rejection Probability and Sample Size for Student's t-Test</h2>

<h3>Description</h3>

<p>This function simulates the probability that a test defined by
<code>setupStudent</code> rejects the null hypothesis.
Note that here the nuisance parameter <code>nuisance</code> is the variance
of the outcome variable sigma^2.
</p>


<h3>Usage</h3>

<pre><code class="language-R">simulation(
  design,
  n1,
  nuisance,
  recalculation = TRUE,
  delta_true,
  iters = 1000,
  seed = NULL,
  allocation = c("approximate", "exact"),
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>design</code></td>
<td>
<p>Object of class <code>Student</code> created by <code>setupStudent</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>n1</code></td>
<td>
<p>Either the sample size of the first stage (if
<code>recalculation = TRUE</code> or the toal sample size (if
<code>recalculation = FALSE</code>).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>nuisance</code></td>
<td>
<p>Value of the nuisance parameter. For the
Student's t-test this is the variance.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>recalculation</code></td>
<td>
<p>Should the sample size be recalculated after n1
n1 patients are recruited?</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>delta_true</code></td>
<td>
<p>effect measure under which the rejection probabilities are
computed</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>iters</code></td>
<td>
<p>Number of simulation iterations.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>seed</code></td>
<td>
<p>Random seed for simulation.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>allocation</code></td>
<td>
<p>Whether the allocation ratio should be preserved
exactly (<code>exact</code>) or approximately (<code>approximate</code>).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Further optional arguments.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>The implementation follows the algorithm in Lu (2019):
Distribution of the two-sample t-test statistic following blinded
sample size re-estimation.
Pharmaceutical Statistics 15: 208-215.
Since Lu (2019) assumes negative non-inferiority margins, the non-inferiority
margin of <code>design</code> is multiplied with -1 internally.
</p>


<h3>Value</h3>

<p>Simulated rejection probabilities and sample sizes for
each nuisance parameter.
</p>


<h3>Examples</h3>

<pre><code class="language-R">d &lt;- setupStudent(alpha = .025, beta = .2, r = 1, delta = 3.5, delta_NI = 0,
                  alternative = "greater", n_max = 156)
simulation(d, n1 = 20, nuisance = 5.5, recalculation = TRUE, delta_true = 3.5)

</code></pre>


</div>