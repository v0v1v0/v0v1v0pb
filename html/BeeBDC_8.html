<div class="container">

<table style="width: 100%;"><tr>
<td>chordDiagramR</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Build a chord diagram of duplicate occurrence links</h2>

<h3>Description</h3>

<p>This function outputs a figure which shows the relative size and direction of occurrence points
duplicated between data providers, such as, SCAN, GBIF, ALA, etc. This function requires the
outputs generated by <code>dupeSummary()</code>.
</p>


<h3>Usage</h3>

<pre><code class="language-R">chordDiagramR(
  dupeData = NULL,
  outPath = NULL,
  fileName = NULL,
  width = 7,
  height = 6,
  bg = "white",
  smallGrpThreshold = 3,
  title = "Duplicated record sources",
  palettes = c("cartography::blue.pal", "cartography::green.pal",
    "cartography::sand.pal", "cartography::orange.pal", "cartography::red.pal",
    "cartography::purple.pal", "cartography::brown.pal"),
  canvas.ylim = c(-1, 1),
  canvas.xlim = c(-0.6, 0.25),
  text.col = "black",
  legendX = grid::unit(6, "mm"),
  legendY = grid::unit(18, "mm"),
  legendJustify = c("left", "bottom"),
  niceFacing = TRUE,
  self.link = 2
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>dupeData</code></td>
<td>
<p>A tibble or data frame. The duplicate file produced by <code>dupeSummary()</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>outPath</code></td>
<td>
<p>Character. The path to a directory (folder) in which the output should be saved.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>fileName</code></td>
<td>
<p>Character. The name of the output file, ending in '.pdf'.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>width</code></td>
<td>
<p>Numeric. The width of the figure to save (in inches). Default = 7.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>height</code></td>
<td>
<p>Numeric. The height of the figure to save (in inches). Default = 6.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>bg</code></td>
<td>
<p>The plot's background colour. Default = "white".</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>smallGrpThreshold</code></td>
<td>
<p>Numeric. The upper threshold of sub-dataSources to be listed as "other".
Default = 3.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>title</code></td>
<td>
<p>A character string. The figure title. Default = "Duplicated record sources".</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>palettes</code></td>
<td>
<p>A vector of the palettes to be used. One palette for each major dataSource and "other"
using the <code>paletteer</code> package. Default = c("cartography::blue.pal", "cartography::green.pal",
"cartography::sand.pal", "cartography::orange.pal", "cartography::red.pal",
"cartography::purple.pal", "cartography::brown.pal")</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>canvas.ylim</code></td>
<td>
<p>Canvas limits from <code>circlize::circos.par()</code>. Default = c(-1.0,1.0).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>canvas.xlim</code></td>
<td>
<p>Canvas limits from <code>circlize::circos.par()</code>. Default = c(-0.6, 0.25).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>text.col</code></td>
<td>
<p>A character string. Text colour</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>legendX</code></td>
<td>
<p>The x position of the legends, as measured in current viewport.
Passed to ComplexHeatmap::draw(). Default = grid::unit(6, "mm").</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>legendY</code></td>
<td>
<p>The y position of the legends, as measured in current viewport.
Passed to ComplexHeatmap::draw(). Default = grid::unit(18, "mm").</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>legendJustify</code></td>
<td>
<p>A character vector declaring the justification of the legends.
Passed to ComplexHeatmap::draw(). Default = c("left", "bottom").</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>niceFacing</code></td>
<td>
<p>TRUE/FALSE. The niceFacing option automatically adjusts the text facing
according to their positions in the circle. Passed to <code>circlize::highlight.sector()</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>self.link</code></td>
<td>
<p>1 or 2 (numeric). Passed to <code>circlize::chordDiagram()</code>:
if there is a self link in one sector, 1 means the link will be degenerated as a 'mountain' and the width corresponds to the value for this connection. 2 means the width of the starting root and the ending root all have the width that corresponds to the value for the connection.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>Saves a figure to the provided file path.
</p>


<h3>Examples</h3>

<pre><code class="language-R">## Not run: 
  # Create a basic example dataset of duplicates to visualise
basicData &lt;- dplyr::tribble(
                            ~dataSource,    ~dataSource_keep,
                      "GBIF_Halictidae",         "USGS_data",
                      "GBIF_Halictidae",         "USGS_data",
                      "GBIF_Halictidae",         "USGS_data",
                      "GBIF_Halictidae",         "USGS_data",
                      "GBIF_Halictidae",         "USGS_data",
                      "GBIF_Halictidae",         "USGS_data",
                      "SCAN_Halictidae",   "GBIF_Halictidae",
                   "iDigBio_halictidae",   "GBIF_Halictidae",
                   "iDigBio_halictidae",   "SCAN_Halictidae",
                   "iDigBio_halictidae",   "SCAN_Halictidae",
                      "SCAN_Halictidae",   "GBIF_Halictidae",
                       "iDigBio_apidae",       "SCAN_Apidae",
                          "SCAN_Apidae",    "Ecd_Anthophila",
                       "iDigBio_apidae",    "Ecd_Anthophila",
                          "SCAN_Apidae",    "Ecd_Anthophila",
                       "iDigBio_apidae",    "Ecd_Anthophila",
                    "SCAN_Megachilidae", "SCAN_Megachilidae",
                      "CAES_Anthophila",   "CAES_Anthophila",
                      "CAES_Anthophila",   "CAES_Anthophila"
 )


 chordDiagramR(
dupeData = basicData,
outPath = tempdir(),
fileName = "ChordDiagram.pdf",
# These can be modified to help fit the final pdf that's exported.
width = 9,
height = 7.5,
bg = "white",
# How few distinct dataSources should a group have to be listed as "other"
smallGrpThreshold = 3,
title = "Duplicated record sources",
# The default list of colour palettes to choose from using the paleteer package
palettes = c("cartography::blue.pal", "cartography::green.pal", 
             "cartography::sand.pal", "cartography::orange.pal", "cartography::red.pal",
             "cartography::purple.pal", "cartography::brown.pal"),
canvas.ylim = c(-1.0,1.0), 
canvas.xlim = c(-0.6, 0.25),
text.col = "black",
legendX = grid::unit(6, "mm"),
legendY = grid::unit(18, "mm"),
legendJustify = c("left", "bottom"),
niceFacing = TRUE)
## End(Not run)
</code></pre>


</div>