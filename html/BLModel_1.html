<div class="container">

<table style="width: 100%;"><tr>
<td>BL_post_distr</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Computes the Black-Litterman posterior distribution.</h2>

<h3>Description</h3>

<p>BL_post_distr computes posterior distribution in the Black-Litterman model starting from arbitrary prior distribution
given as a discrete time series <code>dat</code> and using <code>views_distr</code> – submitted by the user distribution of views.
</p>


<h3>Usage</h3>

<pre><code class="language-R">BL_post_distr (dat, returns_freq, prior_type = c("elliptic", NULL), market_portfolio,
SR, P, q, tau, risk = c("CVAR", "DCVAR", "LSAD", "MAD"),  alpha = NULL,
views_distr, views_cov_matrix_type = c("diag", "full"), cov_matrix = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>dat</code></td>
<td>
<p>Time series of returns data; dat = cbind(rr, pk), where <code class="reqn">rr</code> is an array (time series) of market asset returns,
for <code class="reqn">n</code> returns and <code class="reqn">k</code> assets it is an array with <code class="reqn">\dim(rr) = (n, k)</code>,
<code class="reqn">pk</code> is a vector of length <code class="reqn">n</code> containing probabilities of returns.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>returns_freq</code></td>
<td>
<p>Frequency of data in time series <code>dat</code>; given as a number of data rows corresponding to the period of 1 year,
i.e. 52 for weekly data or 12 for monthly data.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>prior_type</code></td>
<td>
<p>Type of distribution in time series <code>dat</code>; can be "elliptic" – <code class="reqn">rr</code> is distributed according
to (any) elliptical distribution, NULL – <code class="reqn">rr</code> is distributed according to any non-elliptical distribution.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>market_portfolio</code></td>
<td>
<p>Market portfolio – benchmark (equilibrium) portfolio (for details see Palczewski&amp;Palczewski).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>SR</code></td>
<td>
<p>Benchmark Sharpe ratio.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>P</code></td>
<td>
<p>"Pick" matrix in the Black-Litterman model (see Palczewski&amp;Palczewski).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>q</code></td>
<td>
<p>Vector of investor's views on future returns in the Black-Litterman model (see Palczewski&amp;Palczewski).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>tau</code></td>
<td>
<p>Confidence parameter in the Black-Litterman model.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>risk</code></td>
<td>
<p>Risk measure chosen for optimization; one of "CVAR", "DCVAR", "LSAD", "MAD", where
"CVAR" – denotes Conditional Value-at-Risk (CVaR),
"DCVAR" – denotes deviation CVaR,
"LSAD" – denotes Lower Semi Absolute Deviation,
"MAD" – denotes Mean Absolute Deviation.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>alpha</code></td>
<td>
<p>Value of alpha quantile in the definition of risk measures CVAR and DCVAR. Can be any number when risk measure is parameter free.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>views_distr</code></td>
<td>
<p>Distribution of views. An external function submitted by the user which computes densities of the distribution of views in given data points.
It is assumed implicitly that this distribution is an elliptical distribution (but any other distribution type can be used
provided calling to this function will preserve described below structure).
Call to that function has to be of the following form
<code>FUN(x,q,covmat,COF = NULL)</code>, where <code>x</code> is a data points matrix which collects in rows the coordinates of the points in which density is  computed,
<code>q</code> is a vector of investor's views,
<code>covmat</code> is covariance matrix of the distribution and <code>COF</code> is a vector of additional parameters characterizing the distribution (if needed).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>views_cov_matrix_type</code></td>
<td>
<p>Type of the covariance matrix of the distribution of views; can be:
"diag" –   diagonal part of the covariance matrix is used;
"full" – the complete covariance matrix is used;
(for details see Palczewski&amp;Palczewski).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cov_matrix</code></td>
<td>
<p>Covariance matrix used for computation of market expected return (<code>RM</code>) from the formula
<code>RM =  SR * sqrt( t(w_m) * cov_matrix * w_m)</code> where <code>w_m</code> is market portfolio
and  <code>SR</code> – benchmark Sharpe ratio.
When <code>cov_matrix</code> = NULL covariance matrix is computed   from matrix <code class="reqn">rr</code> in data set <code>dat</code>.</p>
</td>
</tr>
</table>
<h3>Value</h3>


<table>
<tr>
<td style="text-align: left;">
<code>post_distr</code>  </td>
<td style="text-align: left;"> a time series of data for posterior distribution; for a time series of length <code class="reqn">n</code> and <code class="reqn">k</code> assets </td>
</tr>
<tr>
<td style="text-align: left;">

 </td>
<td style="text-align: left;"> it is a matrix <code class="reqn">(n, k+1)</code>, where columns (1:k) contain return vectors and the last column </td>
</tr>
<tr>
<td style="text-align: left;">

 </td>
<td style="text-align: left;"> probabilities of returns.
</td>
</tr>
</table>
<h3>References</h3>

<p>Palczewski, J., Palczewski, A., Black-Litterman Model for Continuous Distributions (2016). Available at SSRN: https://ssrn.com/abstract=2744621.
</p>


<h3>Examples</h3>

<pre><code class="language-R">library(mvtnorm)
k = 3 
num =100
dat &lt;-  cbind(rmvnorm (n=num, mean = rep(0,k), sigma=diag(k)), matrix(1/num,num,1)) 
# a data sample with num rows and (k+1) columns for k assets;
returns_freq = 52 # we assume that data frequency is 1 week
w_m &lt;- rep(1/k,k) # benchmark portfolio, a vector of length k,
SR = 0.5 # Sharpe ratio
Pe &lt;- diag(k) # we assume that views are "absolute views"
qe &lt;- rep(0.05, k) # user's opinions on future returns (views)
tau = 0.02
BL_post_distr(dat, returns_freq, NULL, w_m, SR, Pe, qe, tau, risk = "MAD", alpha = 0,
views_distr = observ_normal, "diag", cov_matrix = NULL)




</code></pre>


</div>