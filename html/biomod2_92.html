<div class="container">

<table style="width: 100%;"><tr>
<td>bm_ModelingOptions</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Configure the modeling options for each selected model</h2>

<h3>Description</h3>

<p>Parameterize and/or tune <span class="pkg">biomod2</span>'s single models options.
</p>


<h3>Usage</h3>

<pre><code class="language-R">bm_ModelingOptions(
  data.type,
  models = c("ANN", "CTA", "FDA", "GAM", "GBM", "GLM", "MARS", "MAXENT", "MAXNET", "RF",
    "SRE", "XGBOOST"),
  strategy,
  user.val = NULL,
  user.base = "bigboss",
  bm.format = NULL,
  calib.lines = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>data.type</code></td>
<td>
<p>a <code>character</code> corresponding to the data type to be used, must be either 
<code>binary</code>, <code>binary.PA</code>, <code>abundance</code>, <code>compositional</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>models</code></td>
<td>
<p>a <code>vector</code> containing model names to be computed, must be among 
<code>ANN</code>, <code>CTA</code>, <code>FDA</code>, <code>GAM</code>, <code>GBM</code>, <code>GLM</code>, <code>MARS</code>, 
<code>MAXENT</code>, <code>MAXNET</code>, <code>RF</code>, <code>SRE</code>, <code>XGBOOST</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>strategy</code></td>
<td>
<p>a <code>character</code> corresponding to the method to select models' parameters 
values, must be either <code>default</code>, <code>bigboss</code>, <code>user.defined</code>, <code>tuned</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>user.val</code></td>
<td>
<p>(<em>optional, default</em> <code>NULL</code>) <br>
A <code>list</code> containing parameters values for some (all) models</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>user.base</code></td>
<td>
<p>(<em>optional, default</em> <code>bigboss</code>) <br> A character, 
<code>default</code> or <code>bigboss</code> used when <code>strategy = 'user.defined'</code>. 
It sets the bases of parameters to be modified by user defined values.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>bm.format</code></td>
<td>
<p>(<em>optional, default</em> <code>NULL</code>) <br>
A <code>BIOMOD.formated.data</code> or <code>BIOMOD.formated.data.PA</code> object returned 
by the <code>BIOMOD_FormatingData</code> function</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>calib.lines</code></td>
<td>
<p>(<em>optional, default</em> <code>NULL</code>) <br>
A <code>data.frame</code> object returned by <code>get_calib_lines</code> or 
<code>bm_CrossValidation</code> functions</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>This function creates a <code>BIOMOD.models.options</code> object containing parameter values 
for each single model that can be run within <span class="pkg">biomod2</span> through 
<code>BIOMOD_Modeling</code> function.
</p>
<p>12 models are currently available, and are listed within the <code>ModelsTable</code> dataset.
</p>
<p>Different strategies are available to set those parameters, through the <code>strategy</code> 
argument :
</p>

<dl>
<dt>default</dt>
<dd>
<p>all parameters names and values are directly retrieve from functions to be 
called through <code>formalArgs</code> and <code>formals</code> functions respectively</p>
</dd>
<dt>bigboss</dt>
<dd>
<p>default parameter values are updated with values predefined by <span class="pkg">biomod2</span> 
team</p>
</dd>
<dt>user.defined</dt>
<dd>
<p>default parameter values are updated with values provided by the user</p>
</dd>
<dt>tuned</dt>
<dd>
<p>default parameter values are updated by calling <code>bm_Tuning</code> 
function</p>
</dd>
</dl>
<h3>Value</h3>

<p>A <code>BIOMOD.models.options</code> of object that can be used to build species 
distribution model(s) with the <code>BIOMOD_Modeling</code> function.
</p>


<h3>Note</h3>

<p><code>MAXENT</code> being the only external model (not called through a <code>R</code> package), 
default parameters, and their values, are the following :
</p>

<ul>
<li> <p><code>path_to_maxent.jar = getwd()</code> : a <code>character</code> corresponding to path to 
<code>maxent.jar</code> file
</p>
</li>
<li> <p><code>memory_allocated = 512</code> : an <code>integer</code> corresponding to the amount of 
memory (in Mo) reserved for <code>java</code> to run <code>MAXENT</code>, must be either <code>64</code>, 
<code>128</code>, <code>256</code>, <code>512</code>, <code>1024</code>... or <code>NULL</code> to use default <code>java</code>
memory limitation parameter
</p>
</li>
<li> <p><code>initial_heap_size = NULL</code> : a <code>character</code> corresponding to initial heap 
space (shared memory space) allocated to <code>java</code> (argument <code>-Xms</code> when calling 
<code>java</code>), must be either <code>1024K</code>, <code>4096M</code>, <code>10G</code> ... or <code>NULL</code> to 
use default <code>java</code> parameter. Used in <code>BIOMOD_Projection</code> but not in 
<code>BIOMOD_Modeling</code>.
</p>
</li>
<li> <p><code>max_heap_size = NULL</code> : a <code>character</code> corresponding to maximum heap 
space (shared memory space) allocated to <code>java</code> (argument <code>-Xmx</code> when calling 
<code>java</code>), must be either <code>1024K</code>, <code>4096M</code>, <code>10G</code> ... or <code>NULL</code> to 
use default <code>java</code> parameter, and must be larger than <code>initial_heap_size</code>. Used 
in <code>BIOMOD_Projection</code> but not in <code>BIOMOD_Modeling</code>.
</p>
</li>
<li> <p><code>background_data_dir = 'default'</code> : a <code>character</code> corresponding to path 
to folder where explanatory variables are stored as <code>ASCII</code> files (raster format). 
If specified, <code>MAXENT</code> will generate its own background data from rasters of 
explanatory variables (<code>'default'</code> value). Otherwise <span class="pkg">biomod2</span> pseudo-absences
will be used (see <code>BIOMOD_FormatingData</code>).
</p>
</li>
<li> <p><code>visible = FALSE</code> : a <code>logical</code> value defining whether <code>MAXENT</code> 
user interface is to be used or not
</p>
</li>
<li> <p><code>linear = TRUE</code> : a <code>logical</code> value defining whether linear features are 
to be used or not
</p>
</li>
<li> <p><code>quadratic = TRUE</code> : a <code>logical</code> value defining whether quadratic features are 
to be used or not
</p>
</li>
<li> <p><code>product = TRUE</code> : a <code>logical</code> value defining whether product features are 
to be used or not
</p>
</li>
<li> <p><code>threshold = TRUE</code> : a <code>logical</code> value defining whether threshold features are 
to be used or not
</p>
</li>
<li> <p><code>hinge = TRUE</code> : a <code>logical</code> value defining whether hinge features are 
to be used or not
</p>
</li>
<li> <p><code>l2lqthreshold = 10</code> : an <code>integer</code> corresponding to the number of 
samples at which quadratic features start being used
</p>
</li>
<li> <p><code>lq2lqptthreshold = 80</code> : an <code>integer</code> corresponding to the number of 
samples at which product and threshold features start being used
</p>
</li>
<li> <p><code>hingethreshold = 15</code> : an <code>integer</code> corresponding to the number of 
samples at which hinge features start being used
</p>
</li>
<li> <p><code>beta_lqp = -1.0</code> : a <code>numeric</code> corresponding to the regularization 
parameter to be applied to all linear, quadratic and product features (<em>negative value 
enables automatic setting</em>)
</p>
</li>
<li> <p><code>beta_threshold = -1.0</code> : a <code>numeric</code> corresponding to the regularization 
parameter to be applied to all threshold features (<em>negative value enables automatic 
setting</em>)
</p>
</li>
<li> <p><code>beta_hinge = -1.0</code> : a <code>numeric</code> corresponding to the regularization 
parameter to be applied to all hinge features (<em>negative value enables automatic 
setting</em>)
</p>
</li>
<li> <p><code>beta_categorical = -1.0</code> : a <code>numeric</code> corresponding to the regularization 
parameter to be applied to all categorical features (<em>negative value enables automatic 
setting</em>)
</p>
</li>
<li> <p><code>betamultiplier = 1</code> : a <code>numeric</code> corresponding to the number by which 
multiply all automatic regularization parameters (<em>higher number gives a more 
spread-out distribution</em>)
</p>
</li>
<li> <p><code>defaultprevalence = 0.5</code> : a <code>numeric</code> corresponding to the default 
prevalence of the modelled species (<em>probability of presence at ordinary occurrence 
points</em>)
</p>
</li>
</ul>
<h3>Author(s)</h3>

<p>Damien Georges, Wilfried Thuiller, Maya Gueguen
</p>


<h3>See Also</h3>

<p><code>ModelsTable</code>, <code>BIOMOD.models.options</code>, 
<code>bm_Tuning</code>, <code>BIOMOD_Modeling</code>
</p>
<p>Other Secundary functions: 
<code>bm_BinaryTransformation()</code>,
<code>bm_CrossValidation()</code>,
<code>bm_FindOptimStat()</code>,
<code>bm_MakeFormula()</code>,
<code>bm_PlotEvalBoxplot()</code>,
<code>bm_PlotEvalMean()</code>,
<code>bm_PlotRangeSize()</code>,
<code>bm_PlotResponseCurves()</code>,
<code>bm_PlotVarImpBoxplot()</code>,
<code>bm_PseudoAbsences()</code>,
<code>bm_RunModelsLoop()</code>,
<code>bm_SRE()</code>,
<code>bm_SampleBinaryVector()</code>,
<code>bm_SampleFactorLevels()</code>,
<code>bm_Tuning()</code>,
<code>bm_VariablesImportance()</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">library(terra)

# Load species occurrences (6 species available)
data(DataSpecies)
head(DataSpecies)

# Select the name of the studied species
myRespName &lt;- 'GuloGulo'

# Get corresponding presence/absence data
myResp &lt;- as.numeric(DataSpecies[, myRespName])

# Get corresponding XY coordinates
myRespXY &lt;- DataSpecies[, c('X_WGS84', 'Y_WGS84')]

# Load environmental variables extracted from BIOCLIM (bio_3, bio_4, bio_7, bio_11 &amp; bio_12)
data(bioclim_current)
myExpl &lt;- terra::rast(bioclim_current)



# ---------------------------------------------------------------#
# Format Data with true absences
myBiomodData &lt;- BIOMOD_FormatingData(resp.var = myResp,
                                     expl.var = myExpl,
                                     resp.xy = myRespXY,
                                     resp.name = myRespName)

# k-fold selection
cv.k &lt;- bm_CrossValidation(bm.format = myBiomodData,
                           strategy = 'kfold',
                           nb.rep = 2,
                           k = 3)


# ---------------------------------------------------------------#
allModels &lt;- c('ANN', 'CTA', 'FDA', 'GAM', 'GBM', 'GLM'
               , 'MARS', 'MAXENT', 'MAXNET', 'RF', 'SRE', 'XGBOOST')

# default parameters
opt.d &lt;- bm_ModelingOptions(data.type = 'binary',
                            models = allModels,
                            strategy = 'default')

# providing formated data
opt.df &lt;- bm_ModelingOptions(data.type = 'binary',
                             models = allModels,
                             strategy = 'default',
                             bm.format = myBiomodData,
                             calib.lines = cv.k)

opt.d
opt.d@models
opt.d@options$ANN.binary.nnet.nnet
names(opt.d@options$ANN.binary.nnet.nnet@args.values)

opt.df@options$ANN.binary.nnet.nnet
names(opt.df@options$ANN.binary.nnet.nnet@args.values)


# ---------------------------------------------------------------#
# bigboss parameters
opt.b &lt;- bm_ModelingOptions(data.type = 'binary',
                            models = allModels,
                            strategy = 'bigboss')

# user defined parameters
user.SRE &lt;- list('_allData_allRun' = list(quant = 0.01))
user.XGBOOST &lt;- list('_allData_allRun' = list(nrounds = 10))
user.val &lt;- list(SRE.binary.biomod2.bm_SRE = user.SRE
                 , XGBOOST.binary.xgboost.xgboost = user.XGBOOST)

opt.u &lt;- bm_ModelingOptions(data.type = 'binary',
                            models = c('SRE', 'XGBOOST'),
                            strategy = 'user.defined',
                            user.val = user.val)

opt.b
opt.u

## Not run: 
# tuned parameters with formated data
opt.t &lt;- bm_ModelingOptions(data.type = 'binary',
                            models = c('SRE', 'XGBOOST'),
                            strategy = 'tuned',
                            bm.format = myBiomodData)
opt.t

## End(Not run)



</code></pre>


</div>