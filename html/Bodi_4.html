<div class="container">

<table style="width: 100%;"><tr>
<td>boosting_diversity</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Diversity Boosting Algorithm</h2>

<h3>Description</h3>

<p>Train a set of initial learners by promoting diversity among them. For this, a gradient descent strategy is adopted where a specialized loss function induces diversity which yields on a reduction of the mean-square-error of the aggregated learner.
</p>


<h3>Usage</h3>

<pre><code class="language-R">boosting_diversity(
  target,
  cov,
  data0,
  data1,
  sample_size = 0.5,
  grad_step = 1,
  diversity_weight = 1,
  Nstep = 10,
  model = "gam",
  sampling = "random",
  Nblock = 10,
  aggregation_type = "uniform",
  param = list(),
  theorical_dw = FALSE,
  model_list = NULL,
  w_list = NULL,
  param_list = NULL,
  cov_list = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>target</code></td>
<td>
<p>name of the target variable</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cov</code></td>
<td>
<p>the model equation, a character string provided in the formula syntax. For example, for a linear model including covariates $X_1$ and $X_2$ it will be "X1+X2" and for a GAM with smooth effects it will be "s(X1)+s(X2)"</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>data0</code></td>
<td>
<p>the learning set</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>data1</code></td>
<td>
<p>the test set</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>sample_size</code></td>
<td>
<p>the size of the bootstrap sample as a proportion of the learning set size. sample_size=0.5 means that the resamples are of size n/2 where n is the number of rows of data0.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>grad_step</code></td>
<td>
<p>step of the gradient descent</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>diversity_weight</code></td>
<td>
<p>the weight of the diversity encouraging penalty (kappa in the paper)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>Nstep</code></td>
<td>
<p>the number of iterations of the diversity boosting algorithm ($N$ in the paper)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>model</code></td>
<td>
<p>the type of base learner used in the algorithm if using a single base learner (model_list=NULL). Currently it could be either
"gam" for an additive model, "rf" for a random forest, ""gbm" for gradient boosting machines, "rpart" for single CART trees.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>sampling</code></td>
<td>
<p>the type of sampling procedure used in the resampling step. Could be either <code>"random"</code> for uniform random sampling with
replacement or <code>"blocks"</code> for uniform sampling with replacement of blocks of consecutive data points. Default is "random".</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>Nblock</code></td>
<td>
<p>number of blocks for the block sampling. Equal to 10 by default.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>aggregation_type</code></td>
<td>
<p>type of aggregation used for the ensemble method, default is uniform weights but it could be also "MLpol" an aggregation algorithm
from the opera package</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>param</code></td>
<td>
<p>a list containing the parameters of the model chosen. It could be e.g. the number of trees for "rf", the depth of the tree for "rpart"...</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>theorical_dw</code></td>
<td>
<p>set to TRUE if one want to use the theoretical upper bound of the diversity weight kappa</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>model_list</code></td>
<td>
<p>a list of model among the possible ones (see the description of model argument). In that case the week learner is sample at each step in the list.
"Still "experimental", be careful.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>w_list</code></td>
<td>
<p>the prior weights of each model in the model_list</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>param_list</code></td>
<td>
<p>list of parameters of each model in the model_list</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cov_list</code></td>
<td>
<p>list of covariates of each model in the model_list</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>a list including the boosted models, the ensemble forecast
</p>
<table>
<tr style="vertical-align: top;">
<td><code>fitted_ensemble</code></td>
<td>
<p>Fitted values (in-sample predictions) for the ensemble method (matrix).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>forecast_ensemble</code></td>
<td>
<p>Forecast (out-sample predictions) for the ensemble method (matrix).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>fitted</code></td>
<td>
<p>Fitted values of the last boosting iteration (vector).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>forecast</code></td>
<td>
<p>Forecast of the last boosting iteration (vector).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>err_oob</code></td>
<td>
<p>Estimated out-of-bag errors by iteration (vector).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>diversiy_oob</code></td>
<td>
<p>Estimated out-of-bag diversity (vector).</p>
</td>
</tr>
</table>
<h3>Author(s)</h3>

<p>Yannig Goude &lt;yannig.goude@edf.fr&gt;
</p>


<h3>Examples</h3>

<pre><code class="language-R">all &lt;- na.omit(airquality)
smp &lt;- sample(nrow(all), floor(.8 * nrow(all)))
boosting_diversity("Ozone", "Solar.R+Wind+Temp+Month+Day", 
                   data0 = all[smp, ], data1 = all[-smp, ])
</code></pre>


</div>