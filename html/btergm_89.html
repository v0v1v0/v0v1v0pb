<div class="container">

<table style="width: 100%;"><tr>
<td>marginalplot</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Plot marginal effects for two-way interactions in (T)ERGMs</h2>

<h3>Description</h3>

<p>Plot marginal effects for two-way interactions in (T)ERGMs.
</p>


<h3>Usage</h3>

<pre><code class="language-R">marginalplot(
  model,
  var1,
  var2,
  inter,
  ci = 0.95,
  rug = FALSE,
  point = FALSE,
  structzeromat = NULL,
  zeroline = TRUE,
  color = "black",
  xlab = NULL,
  ylab = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>model</code></td>
<td>
<p>An <code>ergm</code> object as generated by the <span class="pkg">ergm</span> package.
Note that marginal effects plots cannot be created for <code>btergm</code>
objects because the variance-covariance matrix is not valid. However, it
should be possible to apply the <code>marginalplot</code> function to
MCMC-MLE-estimated TERGMs because the <code>ergm</code> object is stored in the
<code>ergm</code> slot of an <code>mtergm</code> object. To do this, supply the
<code>ergm</code> object instead of the <code>mtergm</code> object (e.g.,
<code>marginalplot(mtergmobject@ergm)</code>).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>var1</code></td>
<td>
<p>Name of the first main variable. This is the focal variable.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>var2</code></td>
<td>
<p>Name of the second main variable. This is the conditioning
variable.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>inter</code></td>
<td>
<p>Name of the interaction effect.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ci</code></td>
<td>
<p>Significance level.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>rug</code></td>
<td>
<p>Display the distribution of the conditioning variable at the
bottom of the plot?</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>point</code></td>
<td>
<p>Display error bars for the levels of the conditioning variable
(instead of a continuous curve)?</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>structzeromat</code></td>
<td>
<p>An optional matrix object which indicates dyads that
should be deleted prior to the calculation of the confidence interval for
the marginal effect curve. This is useful when such a matrix was used to
indicate structural zeros during estimation. In this event, the dyads
characterized by structural zeros are not allowed to be tied, therefore
they should be removed from the set of dyads used for the calculation of
marginal effects. The matrix should contain ones for structural zeros and
zeros for entries that should be used.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>zeroline</code></td>
<td>
<p>Draw a horizontal line to indicate zero for the first main
variable?</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>color</code></td>
<td>
<p>Color of the curve, confidence interval, and distribution.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>xlab</code></td>
<td>
<p>Axis label for the second (conditioning) variable.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ylab</code></td>
<td>
<p>Axis label for the first (focal) variable.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>The <code>marginalplot</code> function creates marginal effects plots for ERGMs
with interaction effects. The user has to supply the <code>ergm</code> object and
the coefficient names of the first main variable, the second main variable,
and the interaction term as stored in the coefficients vector inside the
<code>ergm</code> object. It is possible to draw continuous curves or discrete
error bars depending on the nature of the data (using the <code>point</code>
argument). The distribution of the second (conditioning) variable can be
plotted at the bottom of the viewport using the <code>rug</code> argument.
</p>
<p>The resulting marginal effects plot is a <code>ggplot2</code> plot. This means it
can be extended by plotting additional elements and using themes.
</p>


<h3>See Also</h3>

<p>Other interpretation: 
<code>edgeprob()</code>,
<code>interpret()</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">## Not run: 
# data preparation
data("florentine")
n &lt;- network.size(flobusiness)
wealth &lt;- get.vertex.attribute(flobusiness, "wealth")
priorates &lt;- get.vertex.attribute(flobusiness, "priorates")
wealth.icov &lt;- matrix(rep(wealth, n), ncol = n, byrow = TRUE)
priorates.icov &lt;- matrix(rep(priorates, n), ncol = n, byrow = TRUE)
interac &lt;- wealth.icov * priorates.icov

# estimate model with interaction effect
model &lt;- ergm(flobusiness ~ edges + esp(1) + edgecov(wealth.icov)
                + edgecov(priorates.icov) + edgecov(interac))

# plot the interaction (note the additional optional ggplot2 elements)
marginalplot(model, var1 = "edgecov.wealth.icov",
             var2 = "edgecov.priorates.icov", inter = "edgecov.interac",
             color = "darkred", rug = TRUE, point = FALSE,
             xlab = "Priorates", ylab = "Wealth") +
  ggplot2::theme_bw() +
  ggplot2::ggtitle("Interaction effect")

## End(Not run)

</code></pre>


</div>