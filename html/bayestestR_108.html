<div class="container">

<table style="width: 100%;"><tr>
<td>equivalence_test</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Test for Practical Equivalence</h2>

<h3>Description</h3>

<p>Perform a <strong>Test for Practical Equivalence</strong> for Bayesian and frequentist models.
</p>


<h3>Usage</h3>

<pre><code class="language-R">equivalence_test(x, ...)

## Default S3 method:
equivalence_test(x, ...)

## S3 method for class 'data.frame'
equivalence_test(x, range = "default", ci = 0.95, verbose = TRUE, ...)

## S3 method for class 'stanreg'
equivalence_test(
  x,
  range = "default",
  ci = 0.95,
  effects = c("fixed", "random", "all"),
  component = c("location", "all", "conditional", "smooth_terms", "sigma",
    "distributional", "auxiliary"),
  parameters = NULL,
  verbose = TRUE,
  ...
)

## S3 method for class 'brmsfit'
equivalence_test(
  x,
  range = "default",
  ci = 0.95,
  effects = c("fixed", "random", "all"),
  component = c("conditional", "zi", "zero_inflated", "all"),
  parameters = NULL,
  verbose = TRUE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>Vector representing a posterior distribution. Can also be a
<code>stanreg</code> or <code>brmsfit</code> model.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Currently not used.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>range</code></td>
<td>
<p>ROPE's lower and higher bounds. Should be <code>"default"</code> or
depending on the number of outcome variables a vector or a list. In
models with one response, <code>range</code> should be a vector of length two (e.g.,
<code>c(-0.1, 0.1)</code>). In multivariate models, <code>range</code> should be a list with a
numeric vectors for each response variable. Vector names should correspond
to the name of the response variables. If <code>"default"</code> and input is a vector,
the range is set to <code>c(-0.1, 0.1)</code>. If <code>"default"</code> and input is a Bayesian
model, <code>rope_range()</code> is used.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ci</code></td>
<td>
<p>The Credible Interval (CI) probability, corresponding to the
proportion of HDI, to use for the percentage in ROPE.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>verbose</code></td>
<td>
<p>Toggle off warnings.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>effects</code></td>
<td>
<p>Should results for fixed effects, random effects or both be
returned? Only applies to mixed models. May be abbreviated.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>component</code></td>
<td>
<p>Should results for all parameters, parameters for the
conditional model or the zero-inflated part of the model be returned? May
be abbreviated. Only applies to <span class="pkg">brms</span>-models.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>parameters</code></td>
<td>
<p>Regular expression pattern that describes the parameters
that should be returned. Meta-parameters (like <code>lp__</code> or <code>prior_</code>) are
filtered by default, so only parameters that typically appear in the
<code>summary()</code> are returned. Use <code>parameters</code> to select specific parameters
for the output.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>Documentation is accessible for:
</p>

<ul>
<li> <p><a href="https://easystats.github.io/bayestestR/reference/equivalence_test.html">Bayesian models</a>
</p>
</li>
<li> <p><a href="https://easystats.github.io/parameters/reference/equivalence_test.lm.html">Frequentist models</a>
</p>
</li>
</ul>
<p>For Bayesian models, the <strong>Test for Practical Equivalence</strong> is based on the
<em>"HDI+ROPE decision rule"</em> (<cite>Kruschke, 2014, 2018</cite>) to check whether
parameter values should be accepted or rejected against an explicitly
formulated "null hypothesis" (i.e., a ROPE). In other words, it checks the
percentage of the <code style="white-space: pre;">⁠89%⁠</code> HDI that is the null region (the ROPE). If
this percentage is sufficiently low, the null hypothesis is rejected. If this
percentage is sufficiently high, the null hypothesis is accepted.
</p>
<p>Using the ROPE and the HDI, <cite>Kruschke (2018)</cite>
suggests using the percentage of the <code style="white-space: pre;">⁠95%⁠</code> (or <code style="white-space: pre;">⁠89%⁠</code>, considered more stable)
HDI that falls within the ROPE as a decision rule. If the HDI
is completely outside the ROPE, the "null hypothesis" for this parameter is
"rejected". If the ROPE completely covers the HDI, i.e., all most credible
values of a parameter are inside the region of practical equivalence, the
null hypothesis is accepted. Else, it’s undecided whether to accept or
reject the null hypothesis. If the full ROPE is used (i.e., <code style="white-space: pre;">⁠100%⁠</code> of the
HDI), then the null hypothesis is rejected or accepted if the percentage
of the posterior within the ROPE is smaller than to <code style="white-space: pre;">⁠2.5%⁠</code> or greater than
<code style="white-space: pre;">⁠97.5%⁠</code>. Desirable results are low proportions inside the ROPE  (the closer
to zero the better).
<br><br>
Some attention is required for finding suitable values for the ROPE limits
(argument <code>range</code>). See 'Details' in <code>rope_range()</code>
for further information.
<br><br><strong>Multicollinearity: Non-independent covariates</strong>
<br><br>
When parameters show strong correlations, i.e. when covariates are not
independent, the joint parameter distributions may shift towards or
away from the ROPE. In such cases, the test for practical equivalence may
have inappropriate results. Collinearity invalidates ROPE and hypothesis
testing based on univariate marginals, as the probabilities are conditional
on independence. Most problematic are the results of the "undecided"
parameters, which may either move further towards "rejection" or away
from it (<cite>Kruschke 2014, 340f</cite>).
<br><br><code>equivalence_test()</code> performs a simple check for pairwise correlations
between parameters, but as there can be collinearity between more than two variables,
a first step to check the assumptions of this hypothesis testing is to look
at different pair plots. An even more sophisticated check is the projection
predictive variable selection (<cite>Piironen and Vehtari 2017</cite>).
</p>


<h3>Value</h3>

<p>A data frame with following columns:
</p>

<ul>
<li> <p><code>Parameter</code> The model parameter(s), if <code>x</code> is a model-object. If <code>x</code> is a vector, this column is missing.
</p>
</li>
<li> <p><code>CI</code> The probability of the HDI.
</p>
</li>
<li> <p><code>ROPE_low</code>, <code>ROPE_high</code> The limits of the ROPE. These values are identical for all parameters.
</p>
</li>
<li> <p><code>ROPE_Percentage</code> The proportion of the HDI that lies inside the ROPE.
</p>
</li>
<li> <p><code>ROPE_Equivalence</code> The "test result", as character. Either "rejected", "accepted" or "undecided".
</p>
</li>
<li> <p><code>HDI_low</code> , <code>HDI_high</code> The lower and upper HDI limits for the parameters.
</p>
</li>
</ul>
<h3>Note</h3>

<p>There is a <code>print()</code>-method with a <code>digits</code>-argument to control
the amount of digits in the output, and there is a
<a href="https://easystats.github.io/see/articles/bayestestR.html"><code>plot()</code>-method</a>
to visualize the results from the equivalence-test (for models only).
</p>


<h3>References</h3>


<ul>
<li>
<p> Kruschke, J. K. (2018). Rejecting or accepting parameter values in Bayesian estimation. Advances in Methods and Practices in Psychological Science, 1(2), 270-280. <a href="https://doi.org/10.1177/2515245918771304">doi:10.1177/2515245918771304</a>
</p>
</li>
<li>
<p> Kruschke, J. K. (2014). Doing Bayesian data analysis: A tutorial with R, JAGS, and Stan. Academic Press
</p>
</li>
<li>
<p> Piironen, J., &amp; Vehtari, A. (2017). Comparison of Bayesian predictive methods for model selection. Statistics and Computing, 27(3), 711–735. <a href="https://doi.org/10.1007/s11222-016-9649-y">doi:10.1007/s11222-016-9649-y</a>
</p>
</li>
</ul>
<h3>Examples</h3>

<pre><code class="language-R">
library(bayestestR)

equivalence_test(x = rnorm(1000, 0, 0.01), range = c(-0.1, 0.1))
equivalence_test(x = rnorm(1000, 0, 1), range = c(-0.1, 0.1))
equivalence_test(x = rnorm(1000, 1, 0.01), range = c(-0.1, 0.1))
equivalence_test(x = rnorm(1000, 1, 1), ci = c(.50, .99))

# print more digits
test &lt;- equivalence_test(x = rnorm(1000, 1, 1), ci = c(.50, .99))
print(test, digits = 4)

model &lt;- rstanarm::stan_glm(mpg ~ wt + cyl, data = mtcars)
equivalence_test(model)

# plot result
test &lt;- equivalence_test(model)
plot(test)

equivalence_test(emmeans::emtrends(model, ~1, "wt", data = mtcars))

model &lt;- brms::brm(mpg ~ wt + cyl, data = mtcars)
equivalence_test(model)

bf &lt;- BayesFactor::ttestBF(x = rnorm(100, 1, 1))
# equivalence_test(bf)


</code></pre>


</div>