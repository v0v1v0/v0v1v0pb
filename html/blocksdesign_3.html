<div class="container">

<table style="width: 100%;"><tr>
<td>blocks</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Block designs for unstructured treatment sets</h2>

<h3>Description</h3>

<p>Constructs randomized multi-level nested block designs for unstructured treatment sets.
</p>


<h3>Usage</h3>

<pre><code class="language-R">blocks(
  treatments,
  replicates,
  blocks = NULL,
  searches = NULL,
  seed = NULL,
  jumps = 1
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>treatments</code></td>
<td>
<p>the total required number of treatments partitioned into equally replicated treatment sets.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>replicates</code></td>
<td>
<p>the replication numbers of the equally replicated treatment sets.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>blocks</code></td>
<td>
<p>the number of nested blocks in each level of nesting from the top level down.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>searches</code></td>
<td>
<p>the maximum number of local optima searched for a design optimization.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>seed</code></td>
<td>
<p>an integer initializing the random number generator.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>jumps</code></td>
<td>
<p>the number of pairwise random treatment swaps used to escape a local maxima.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>Constructs randomized multi-level nested block designs for any arbitrary
number of unstructured treatments and any arbitrary feasible depth of nesting.
</p>
<p><code>treatments</code> is a partition of the number of treatments into equi-replicate treatment sets.
</p>
<p><code>replicates</code> is a set of replication numbers for the equi-replicate treatment sets.
</p>
<p><code>blocks</code> are the nested blocks levels in decreasing order of block size where
each level defines the number of blocks nested within the blocks of the preceding level.
The top-level block is assumed to be single super-block containing a full set of plots. 
The algorithm finds block sizes automatically for each level of nesting and the block sizes within
each level of nesting will never differ by more than a single plot.
</p>
<p>Unreplicated treatments are allowed and any simple nested block design can be augmented by any number 
of unreplicated treatments using the <code>treatments</code> and <code>replicates</code> formula. 
However, it may be preferable to find an efficient blocked design
for the replicated treatment sets and then to add the unreplicated treatments heuristically. 
</p>
<p>The <code>blocks</code> function constructs all block designs algorithmically except for certain special block designs
for r replicates of <code>v x v</code> treatments or r-1 replicates of <code>v x (v-1)</code> treatments in blocks of size v.
Provided that a set of r-1 mutually orthogonal Latin squares of size <code>v x v</code> exists, these designs are
constructed algebraically and are guaranteed to achieve optimality. See <code>squarelattice</code> 
and <code>rectlattice</code> for information about which design sizes are constructed algebraically.
</p>


<h3>Value</h3>

<table>
<tr style="vertical-align: top;">
<td><code>Replication</code></td>
<td>
<p>A table showing the replication number of each treatment in the design.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>Design</code></td>
<td>
<p>Data frame giving the optimized block and treatment design in plot order.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>Plan</code></td>
<td>
<p>Data frame showing a plan view of the treatment design in the bottom level of the design.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>Blocks_model</code></td>
<td>
<p>The D-efficiencies and the A-efficiencies of the blocks in each nested level of the 
design together with A-efficiency upper-bounds, where available.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>seed</code></td>
<td>
<p>Numerical seed used for random number generator.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>searches</code></td>
<td>
<p>Maximum number of searches used for each level.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>jumps</code></td>
<td>
<p>Number of random treatment swaps used to escape a local maxima.</p>
</td>
</tr>
</table>
<h3>References</h3>

<p>Cochran, W.G., and G.M. Cox. 1957. Experimental Designs, 2nd ed., Wiley, New York.
</p>


<h3>Examples</h3>

<pre><code class="language-R">
## The number of searches in the following examples have been limited for fast execution.  
## In practice, the number of searches may need to be increased for optimum results.
## Designs should be rebuilt several times to check that a near-optimum design has been found.  

# Completely randomized design for 6 treatments with 2 replicates and 1 control with 4 replicates 
blocks(treatments=list(6,1),replicates=list(2,4))

# 12 treatments x 4 replicates in 4 complete blocks with 4 sub-blocks of size 3
# rectangular lattice see Plan 10.10 Cochran and Cox 1957.
blocks(treatments=12,replicates=4,blocks=list(4,4))

# 3 treatments x 2 replicates + 2 treatments x 4 replicates in two complete randomized blocks
blocks(treatments=list(3,2),replicates=list(2,4),blocks=2)

# 50 treatments x 4 replicates with 4 main blocks and 5 nested sub-blocks in each main block
blocks(treatments=50,replicates=4,blocks=list(4,5))

# as above but with 20 additional single replicate treatments, one single treatment per sub-block
blocks(treatments=list(50,20),replicates=list(4,1),blocks=list(4,5))

# 6 replicates of 6 treatments in 4 blocks of size 9 (non-binary block design)
blocks(treatments=6,replicates=6,blocks=4)

# 128 treatments x 2 replicates with two main blocks and 3 levels of nesting
 blocks(128,2,list(2,2,2,2))

# 64 treatments x 4 replicates with 4 main blocks, 8 nested sub-blocks of size 8
# (lattice), 16 nested sub-sub blocks of size 4 and 32 nested sub-sub-sub blocks of size 2
 blocks(64,4,list(4,8,2,2))

# 100 treatments x 4 replicates with 4 main blocks nested blocks of size 10 (lattice square)
blocks(100,4,list(4,10)) 

</code></pre>


</div>