<div class="container">

<table style="width: 100%;"><tr>
<td>BondVal.Yield</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>BondVal.Yield (calculation of YtM, AccrInt, DP, ModDUR, MacDUR and Conv)</h2>

<h3>Description</h3>

<p><b>BondVal.Yield</b> returns a bond's yield to maturity given its clean price.
</p>


<h3>Usage</h3>

<pre><code class="language-R">BondVal.Yield(
  CP = as.numeric(NA),
  SETT = as.Date(NA),
  Em = as.Date(NA),
  Mat = as.Date(NA),
  CpY = as.numeric(NA),
  FIPD = as.Date(NA),
  LIPD = as.Date(NA),
  FIAD = as.Date(NA),
  RV = as.numeric(NA),
  Coup = as.numeric(NA),
  DCC = as.numeric(NA),
  EOM = as.numeric(NA),
  DateOrigin = as.Date("1970-01-01"),
  InputCheck = 1,
  FindEOM = FALSE,
  RegCF.equal = 0,
  SimpleLastPeriod = TRUE,
  Precision = .Machine$double.eps^0.75,
  Calc.Method = 1,
  AnnivDatesOutput = as.list(NA)
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>CP</code></td>
<td>
<p>The bond's clean price on <code>SETT</code>. (required)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>SETT</code></td>
<td>
<p>The settlement date. Date class object with format "%Y-%m-%d". (required)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>Em</code></td>
<td>
<p>The bond's issue date. Date class object with format "%Y-%m-%d". (required)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>Mat</code></td>
<td>
<p>So-called "maturity date" i.e. date on which the redemption value and the final interest
are paid. Date class object with format "%Y-%m-%d". (required)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>CpY</code></td>
<td>
<p>Number of interest payments per year (non-negative integer; element of the set
{0,1,2,3,4,6,12}. Default: 2.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>FIPD</code></td>
<td>
<p>First interest payment date after <code>Em</code>. Date class object with format "%Y-%m-%d". Default: <code>NA</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>LIPD</code></td>
<td>
<p>Last interest payment date before <code>Mat</code>. Date class object with format "%Y-%m-%d". Default: <code>NA</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>FIAD</code></td>
<td>
<p>Date on which the interest accrual starts (so-called "dated date"). Date class object with format "%Y-%m-%d". Default: <code>NA</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>RV</code></td>
<td>
<p>The redemption value of the bond. Default: <code>100</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>Coup</code></td>
<td>
<p>Nominal interest rate per year in percent. Default: <code>NA</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>DCC</code></td>
<td>
<p>The day count convention the bond follows. Default: <code>NA</code>.
For a list of day count conventions currently implemented type <code>View(List.DCC)</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>EOM</code></td>
<td>
<p>Boolean indicating whether the bond follows the End-of-Month rule. Default: <code>NA</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>DateOrigin</code></td>
<td>
<p>Determines the starting point for the daycount in "Date" objects.
Default: "1970-01-01".</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>InputCheck</code></td>
<td>
<p>If 1, the input variables are checked for the correct format. Default: 1.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>FindEOM</code></td>
<td>
<p>If <code>TRUE</code>, <code>EOM</code> is overridden by the value inferred from the data.
Default: <code>FALSE</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>RegCF.equal</code></td>
<td>
<p>If 0, the amounts of regular cash flows are calculated according to the
stipulated <code>DCC</code>. Any other value forces all regular cash flows to be equal sized.
Default: 0.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>SimpleLastPeriod</code></td>
<td>
<p>Specifies the interest calculation method in the final coupon period. Default: <code>TRUE</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>Precision</code></td>
<td>
<p>desired precision in YtM-calculation. Default: <code>.Machine$double.eps^0.75</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>Calc.Method</code></td>
<td>
<p>If 1, discount powers are computed with the same DCC as accrued interest.
If 0, discount powers are computed with DCC=2. Default: 1.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>AnnivDatesOutput</code></td>
<td>
<p>A list containing the output of the function AnnivDates. Default: <code>NA</code>.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p><b>BondVal.Yield</b> uses the function <b>AnnivDates</b> to analyze the bond
and computes the yield to maturity, the accrued interest, the dirty price and the sensitivity
measures modified duration (ModDUR), MacAulay duration (MacDUR) and convexity according
to the methodology presented in Djatschenko (2018). The yield to maturity is determined
numerically using the Newton-Raphson method.
</p>


<h3>Value</h3>


<dl>
<dt>CP</dt>
<dd>
<p>The bond's clean price.</p>
</dd>
<dt>AccrInt</dt>
<dd>
<p>The amount of accrued interest.</p>
</dd>
<dt>DP</dt>
<dd>
<p>The bond's dirty price.</p>
</dd>
<dt>ytm.p.a.</dt>
<dd>
<p>Annualized yield to maturity.</p>
</dd>
<dt>ModDUR.inYears</dt>
<dd>
<p>Modified duration in years.</p>
</dd>
<dt>MacDUR.inYears</dt>
<dd>
<p>MacAulay duration in years.</p>
</dd>
<dt>Conv.inYears</dt>
<dd>
<p>Convexity in years.</p>
</dd>
<dt>ModDUR.inPeriods</dt>
<dd>
<p>Modified duration in periods.</p>
</dd>
<dt>MacDUR.inPeriods</dt>
<dd>
<p>MacAulay duration in periods.</p>
</dd>
<dt>Conv.inPeriods</dt>
<dd>
<p>Convexity in periods.</p>
</dd>
<dt>tau</dt>
<dd>
<p>Relative Position of the settlement date in regular periods.</p>
</dd>
</dl>
<h3>References</h3>


<ol><li>
<p>Djatschenko, Wadim, The Nitty Gritty of Bond Valuation: A Generalized Methodology for Fixed Coupon Bond Analysis Allowing for Irregular Periods and Various Day Count Conventions (November 5, 2018). Available at SSRN: https://ssrn.com/abstract=3205167.
</p>
</li></ol>
<h3>Examples</h3>

<pre><code class="language-R">data(PanelSomeBonds2016)
randombond&lt;-sample(c(1:length(which(!(duplicated(PanelSomeBonds2016$ID.No))))),1)
df.randombond&lt;-PanelSomeBonds2016[which(PanelSomeBonds2016$ID.No==randombond),]

PreAnalysis.randombond&lt;-suppressWarnings(AnnivDates(
  unlist(df.randombond[
           1,c('Issue.Date','Mat.Date','CpY.Input','FIPD.Input','LIPD.Input',
               'FIAD.Input','RV.Input','Coup.Input','DCC.Input','EOM.Input')],
         use.names=FALSE)))

system.time(
  for (i in c(1:nrow(df.randombond))) {
BondVal.Yield.Output&lt;-suppressWarnings(BondVal.Yield(
      unlist(df.randombond[i,c('CP.Input','TradeDate','Issue.Date','Mat.Date',
                'CpY.Input','FIPD.Input','LIPD.Input','FIAD.Input','RV.Input',
                'Coup.Input','DCC.Input','EOM.Input')],use.names=FALSE),
      AnnivDatesOutput=PreAnalysis.randombond))
    df.randombond$YtM.Out[i]&lt;-BondVal.Yield.Output$ytm.p.a.
  }
)
plot(seq(1,nrow(df.randombond),by=1),df.randombond$YtM.Out,"l")

</code></pre>


</div>