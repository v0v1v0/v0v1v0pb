<div class="container">

<table style="width: 100%;"><tr>
<td>bagger</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Bagging functions</h2>

<h3>Description</h3>

<p>General suite of bagging functions for several models.
</p>


<h3>Usage</h3>

<pre><code class="language-R">bagger(x, ...)

## Default S3 method:
bagger(x, ...)

## S3 method for class 'data.frame'
bagger(
  x,
  y,
  weights = NULL,
  base_model = "CART",
  times = 11L,
  control = control_bag(),
  cost = NULL,
  ...
)

## S3 method for class 'matrix'
bagger(
  x,
  y,
  weights = NULL,
  base_model = "CART",
  times = 11L,
  control = control_bag(),
  cost = NULL,
  ...
)

## S3 method for class 'formula'
bagger(
  formula,
  data,
  weights = NULL,
  base_model = "CART",
  times = 11L,
  control = control_bag(),
  cost = NULL,
  ...
)

## S3 method for class 'recipe'
bagger(
  x,
  data,
  base_model = "CART",
  times = 11L,
  control = control_bag(),
  cost = NULL,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>A data frame, matrix, or recipe (depending on the method being used).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Optional arguments to pass to the base model function.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>y</code></td>
<td>
<p>A numeric or factor vector of outcomes. Categorical outcomes (i.e
classes) should be represented as factors, not integers.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>weights</code></td>
<td>
<p>A numeric vector of non-negative case weights. These values are
not used during bootstrap resampling.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>base_model</code></td>
<td>
<p>A single character value for the model being bagged. Possible
values are "CART", "MARS", "nnet", and "C5.0" (classification only).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>times</code></td>
<td>
<p>A single integer greater than 1 for the maximum number of bootstrap
samples/ensemble members (some model fits might fail).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>control</code></td>
<td>
<p>A list of options generated by <code>control_bag()</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cost</code></td>
<td>
<p>A non-negative scale (for two class problems) or a cost matrix.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>formula</code></td>
<td>
<p>An object of class "formula" (or one that can be coerced to
that class): a symbolic description of the model to be fitted. Note that
this package does not support multivariate outcomes and that, if some
predictors are factors, dummy variables will <em>not</em> be created unless by the
underlying model function.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>data</code></td>
<td>
<p>A data frame containing the variables used in the formula or
recipe.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p><code>bagger()</code> fits separate models to bootstrap samples. The
prediction function for each model object is encoded in an R expression and
the original model object is discarded. When making predictions, each
prediction formula is evaluated on the new data and aggregated using the
mean.
</p>
<p>Variable importance scores are calculated using implementations in each
package. When requested, the results are in a tibble with column names
<code>term</code> (the predictor), <code>value</code> (the importance score), and <code>used</code> (the
percentage of times that the variable was in the prediction equation).
</p>
<p>The models can be fit in parallel using the <span class="pkg">future</span> package. The
enable parallelism, use the <code>future::plan()</code> function to declare <em>how</em> the
computations should be distributed. Note that this will almost certainly
multiply the memory requirements required to fit the models.
</p>
<p>For neural networks, variable importance is calculated using the method
of Garson described in Gevrey <em>et al</em> (2003)
</p>


<h3>References</h3>

<p>Gevrey, M., Dimopoulos, I., and Lek, S. (2003). Review and
comparison of methods to study the contribution of variables in artificial
neural network models. Ecological Modelling, 160(3), 249-264.
</p>


<h3>Examples</h3>

<pre><code class="language-R">library(recipes)
library(dplyr)

data(biomass, package = "modeldata")

biomass_tr &lt;-
  biomass %&gt;%
  dplyr::filter(dataset == "Training") %&gt;%
  dplyr::select(-dataset, -sample)

biomass_te &lt;-
  biomass %&gt;%
  dplyr::filter(dataset == "Testing") %&gt;%
  dplyr::select(-dataset, -sample)

# ------------------------------------------------------------------------------

ctrl &lt;- control_bag(var_imp = TRUE)

# ------------------------------------------------------------------------------

# `times` is low to make the examples run faster


set.seed(7687)
cart_bag &lt;- bagger(x = biomass_tr[, -6], y = biomass_tr$HHV,
                   base_model = "CART", times = 5, control = ctrl)
cart_bag

# ------------------------------------------------------------------------------
# Other interfaces

# Recipes can be used
biomass_rec &lt;-
  recipe(HHV ~ ., data = biomass_tr) %&gt;%
  step_pca(all_predictors())

set.seed(7687)
cart_pca_bag &lt;- bagger(biomass_rec, data = biomass_tr, base_model = "CART",
                       times = 5, control = ctrl)

cart_pca_bag

</code></pre>


</div>