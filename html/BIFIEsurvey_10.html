<div class="container">

<table style="width: 100%;"><tr>
<td>BIFIE.data.jack</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>
Create <code>BIFIE.data</code> Object with Jackknife Zones
</h2>

<h3>Description</h3>

<p>Creates a <code>BIFIE.data</code> object for designs with jackknife zones,
especially for TIMSS/PIRLS and PISA studies.
</p>


<h3>Usage</h3>

<pre><code class="language-R">BIFIE.data.jack(data, wgt=NULL, jktype="JK_TIMSS", pv_vars=NULL,
     jkzone=NULL, jkrep=NULL, jkfac=NULL, fayfac=NULL,
     wgtrep="W_FSTR", pvpre=paste0("PV",1:5), ngr=100,
     seed=.Random.seed, cdata=FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>data</code></td>
<td>

<p>Data frame: Can be a single or a list of multiply-imputed datasets
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>wgt</code></td>
<td>

<p>A string indicating the label of case weight.
In case of <code>jktype="JK_TIMSS"</code> the weight is specified as
<code>wgt="TOTWGT"</code> as the default.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>pv_vars</code></td>
<td>

<p>An optional vector of plausible values which define multiply-imputed datasets.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>jktype</code></td>
<td>

<p>Type of jackknife procedure for creating the <code>BIFIE.data</code> object.
<code>jktype="JK_TIMSS"</code> refers to TIMSS/PIRLS datasets up to 2011 data,
<code>jktype="JK_TIMSS2"</code> refers to TIMSS/PIRLS datasets starting from 2015 data. The type
<code>"JK_GROUP"</code> creates jackknife weights based on a user defined
grouping, the type <code>"JK_RANDOM"</code> creates random groups. The number
of random groups can be defined in <code>ngr</code>. The argument <code>jktype="RW_PISA"</code>
converts PISA datasets into objects of class <code>BIFIEdata</code>.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>jkzone</code></td>
<td>

<p>Jackknife zones. If <code>jktype="JK_TIMSS"</code>, then <code>jkzone="JKZONE"</code>.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>jkrep</code></td>
<td>

<p>Jackknife replicate factors. If <code>jktype="JK_TIMSS"</code>, then <code>jkrep="JKREP"</code>.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>jkfac</code></td>
<td>

<p>Factor for multiplying jackknife replicate weights.
If <code>jktype="JK_TIMSS"</code>, then <code>jkfac=2</code>.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>fayfac</code></td>
<td>

<p>Fay factor for statistical inference. The default is set to <code>NULL</code>.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>wgtrep</code></td>
<td>
<p>Variables in the dataset which refer to the replicate
weights. In case of <code>cdata=TRUE</code>, the replicate weights
are deleted from <code>datalistM</code>.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>pvpre</code></td>
<td>
<p>Only applicable for <code>jktype="RW_PISA"</code>. The vector contains
the prefixes of the variables containing plausible values.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ngr</code></td>
<td>
<p>Number of randomly created groups in <code>"JK_RANDOM"</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>seed</code></td>
<td>
<p>The simulation seed if <code>"JK_RANDOM"</code> is chosen.
If <code>seed=NULL</code>, then the grouping is done according the
order in the dataset.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cdata</code></td>
<td>
<p>An optional logical indicating whether the <code>BIFIEdata</code>
object should be compactly saved. The default is <code>FALSE</code>.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>Object of class <code>BIFIEdata</code>
</p>


<h3>See Also</h3>

<p><code>BIFIE.data</code>, <code>BIFIE.data.boot</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">#############################################################################
# EXAMPLE 1: Convert TIMSS dataset to BIFIE.data object
#############################################################################

data(data.timss3)

# define plausible values
pv_vars &lt;- c("ASMMAT", "ASSSCI" )
# create BIFIE.data objects -&gt; 5 imputed datasets
bdat1 &lt;- BIFIEsurvey::BIFIE.data.jack( data=data.timss3,  pv_vars=pv_vars,
             jktype="JK_TIMSS"  )
summary(bdat1)

# create BIFIE.data objects -&gt; all PVs are included in one dataset
bdat2 &lt;- BIFIEsurvey::BIFIE.data.jack( data=data.timss3,  jktype="JK_TIMSS"  )
summary(bdat2)

#############################################################################
# EXAMPLE 2: Creation of Jackknife zones and replicate weights for data.test1
#############################################################################

data(data.test1)

# create jackknife zones based on random group creation
bdat1 &lt;- BIFIEsurvey::BIFIE.data.jack( data=data.test1,  jktype="JK_RANDOM",
                    ngr=50 )
summary(bdat1)
stat1 &lt;- BIFIEsurvey::BIFIE.univar( bdat1, vars="math",  group="stratum" )
summary(stat1)

# random creation of groups and inclusion of weights
bdat2 &lt;- BIFIEsurvey::BIFIE.data.jack( data=data.test1,  jktype="JK_RANDOM",
                ngr=75, seed=987, wgt="wgtstud")
summary(bdat2)
stat2 &lt;- BIFIEsurvey::BIFIE.univar( bdat2, vars="math",  group="stratum" )
summary(stat2)

# using idclass as jackknife zones
bdat3 &lt;- BIFIEsurvey::BIFIE.data.jack( data=data.test1,  jktype="JK_GROUP",
                jkzone="idclass", wgt="wgtstud")
summary(bdat3)
stat3 &lt;- BIFIEsurvey::BIFIE.univar( bdat3, vars="math",  group="stratum" )
summary(stat3)

# create BIFIEdata object with a list of imputed datasets
dataList &lt;- list( data.test1, data.test1, data.test1 )
bdat4 &lt;- BIFIEsurvey::BIFIE.data.jack( data=dataList,  jktype="JK_GROUP",
                jkzone="idclass", wgt="wgtstud")
summary(bdat4)

## Not run: 
#############################################################################
# EXAMPLE 3: Converting a PISA dataset into a BIFIEdata object
#############################################################################

data(data.pisaNLD)

# BIFIEdata with cdata=FALSE
bifieobj &lt;- BIFIEsurvey::BIFIE.data.jack( data.pisaNLD, jktype="RW_PISA", cdata=FALSE)
summary(bifieobj)
# BIFIEdata with cdata=TRUE
bifieobj1 &lt;- BIFIEsurvey::BIFIE.data.jack( data.pisaNLD, jktype="RW_PISA", cdata=TRUE)
summary(bifieobj1)

## End(Not run)
</code></pre>


</div>