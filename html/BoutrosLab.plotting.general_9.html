<div class="container">

<table style="width: 100%;"><tr>
<td>create.colourkey</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Create Colourkey</h2>

<h3>Description</h3>

<p>A function for generating and placing a colour key. Good for use in multiplots when a smaller colour key is desired.</p>


<h3>Usage</h3>

<pre><code class="language-R">create.colourkey(
	x,
	scale.data = FALSE,
	colour.scheme = c(),
	total.colours = 99,
	colour.centering.value = 0,
	colour.alpha = 1,
	fill.colour = 'darkgray',
	at = NULL,
	colourkey.labels.at = NULL,
	colourkey.labels = colourkey.labels.at,
	colourkey.labels.cex = 1,
	placement = NULL
	);
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>Either a data-frame or a matrix from which the heatmap was created</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>scale.data</code></td>
<td>
<p>Was the data for the heatmap scaled? Defaults to FALSE.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>colour.scheme</code></td>
<td>
<p>Heatmap colouring. Accepts old-style themes, or a vector of either two or three colours that are gradiated to create the final palette.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>total.colours</code></td>
<td>
<p>Total number of colours to plot.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>colour.centering.value</code></td>
<td>
<p>The center of the colour-map.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>colour.alpha</code></td>
<td>
<p>Bias to be added to colour selection (uses x^colour.alpha in mapping).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>fill.colour</code></td>
<td>
<p>The background fill (only exposed where missing values are present.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>at</code></td>
<td>
<p>A vector specifying the breakpoints along the range of x.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>colourkey.labels.at</code></td>
<td>
<p>A vector specifying the tick-positions on the colourkey.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>colourkey.labels</code></td>
<td>
<p>A vector specifying tick-labels of the colourkey</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>colourkey.labels.cex</code></td>
<td>
<p>Size of colourkey labels. Defaults to 1</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>placement</code></td>
<td>
<p>Location and size of the colourkey.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>Returns a key in the format specified in the xyplot documentation.</p>


<h3>Author(s)</h3>

<p>Stephenie Prokopec</p>


<h3>See Also</h3>

<p>xyplot, plotmath</p>


<h3>Examples</h3>

<pre><code class="language-R">set.seed(1234567890);
x &lt;- outer(-5:5, -5:5, '*') + matrix(nrow = 11, ncol = 11, data = runif(11 * 11));
colnames(x) &lt;- paste('col', 1:11, sep = '-');
rownames(x) &lt;- paste('row', 1:11, sep = '-');

y &lt;- as.data.frame(x);
y$mean &lt;- apply(x,1,mean);

# example of a simple multiplot with colourkey
heatmap1 &lt;- create.heatmap(
    x = t(x),
    filename = NULL,
    clustering.method = 'none',
    scale.data = FALSE,
    yaxis.lab = NA,
    print.colour.key = FALSE,
    colour.scheme = c('chartreuse3', 'white', 'blue'),
    at = seq(-25, 25, 0.01)
    );

barplot1 &lt;- create.barplot(
    1:nrow(y) ~ mean,
    y,
    plot.horizontal = TRUE
    );

create.multiplot(
    plot.objects = list(heatmap1, barplot1),
    # filename = tempfile(pattern = 'multiplot_with_colourkey', fileext = '.tiff'),
    plot.layout = c(2,1),
    panel.widths = c(2,1),
    yat = list(1:nrow(y), NULL),
    yaxis.labels = rownames(y),
    xlimits = list(NULL, c(0,1)),
    xat = list(NULL, seq(0,1,0.5)),
    xaxis.labels = list(NULL, seq(0,1,0.5)),
    x.spacing = 0,
    print.new.legend = TRUE,
    legend = list(
        inside = list(
            fun = BoutrosLab.plotting.general::create.colourkey(
                x = x,
                colour.scheme = c('chartreuse3', 'white', 'blue'),
                at = seq(-25, 25, 0.01),
                colourkey.labels.at = c(-25, 0, 25),
                placement = viewport(just = 'left', x = 0.55, y = -0.55, width = 0.5)
                )
            )
        ),
    bottom.padding = 4,
    width = 10,
    height = 8,
    resolution = 500
    );
</code></pre>


</div>