<div class="container">

<table style="width: 100%;"><tr>
<td>diagonAlley</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Find fill-down errors</h2>

<h3>Description</h3>

<p>A simple function that looks for potential latitude and longitude fill-down errors by
identifying consecutive occurrences with coordinates at regular intervals. This is accomplished
by using a sliding window with the length determined by minRepeats.
</p>


<h3>Usage</h3>

<pre><code class="language-R">diagonAlley(
  data = NULL,
  minRepeats = NULL,
  groupingColumns = c("eventDate", "recordedBy", "datasetName"),
  ndec = 3,
  stepSize = 1e+06,
  mc.cores = 1
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>data</code></td>
<td>
<p>A data frame or tibble. Occurrence records as input.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>minRepeats</code></td>
<td>
<p>Numeric. The minimum number of lat or lon repeats needed to flag a record</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>groupingColumns</code></td>
<td>
<p>Character. The column(s) to group the analysis by and search for fill-down
errors within. Default = c("eventDate", "recordedBy", "datasetName").</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ndec</code></td>
<td>
<p>Numeric. The number of decimal places below which records will not be considered
in the diagonAlley function. This is fed into <code>jbd_coordinates_precision()</code>. Default = 3.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>stepSize</code></td>
<td>
<p>Numeric. The number of occurrences to process in each chunk. Default = 1000000.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>mc.cores</code></td>
<td>
<p>Numeric. If &gt; 1, the function will run in parallel
using mclapply using the number of cores specified. If = 1 then it will be run using a serial
loop. NOTE: Windows machines must use a value of 1 (see ?parallel::mclapply). Additionally,
be aware that each thread can use large chunks of memory.
Default = 1.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>The sliding window (and hence fill-down errors) will only be examined
within the user-defined groupingColumns; if any of those
columns are empty, that record will be excluded.
</p>


<h3>Value</h3>

<p>The function returns the input data with a new column, .sequential, where FALSE =
records that have consecutive latitudes or longitudes greater than or equal to the user-defined
threshold.
</p>


<h3>Examples</h3>

<pre><code class="language-R"># Read in the example data
  data(beesRaw)
 # Run the function
  beesRaw_out &lt;- diagonAlley(
    data = beesRaw,
    # The minimum number of repeats needed to find a sequence in for flagging
    minRepeats = 4,
    groupingColumns = c("eventDate", "recordedBy", "datasetName"),
    ndec = 3,
    stepSize = 1000000,
    mc.cores = 1)
  

</code></pre>


</div>