<div class="container">

<table style="width: 100%;"><tr>
<td>fitFunc</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>
A function to fit a parametric distribution to binned data.
</h2>

<h3>Description</h3>

<p>This function fits a parametric distribution binned data. The data are subdivided using 
ID.  
</p>


<h3>Usage</h3>

<pre><code class="language-R">fitFunc(ID, hb, bin_min, bin_max, obs_mean, ID_name,
  distribution = "LOGNO", distName = "LNO", links = c(muLink = 
  "identity", sigmaLink = "log", nuLink = NULL, tauLink = NULL),
   qFunc = qLOGNO, quantiles = seq(0.006, 0.996, length.out = 
   1000), linksq = c(identity, exp, NULL, NULL), con = 
   gamlss.control(c.crit=0.1,n.cyc=200, trace=FALSE), 
   saveQuants = FALSE, muStart = NULL, sigmaStart = NULL,
    nuStart = NULL, tauStart = NULL, muFix = FALSE, 
    sigmaFix = FALSE, nuFix = FALSE, tauFix = FALSE, 
    freeParams = c(TRUE, TRUE, FALSE, FALSE), 
    smartStart = FALSE, tstamp = as.numeric(Sys.time()))
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>ID</code></td>
<td>

<p>a (non-empty) object containing the group ID for each row. Importantly, ID, bh, bin_min, bin_max, and obs_mean MUST be the same length and be in the SAME order.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>hb</code></td>
<td>

<p>a (non-empty) object containing the number of observations in each bin.  Importantly, ID, bh, bin_min, bin_max, and obs_mean MUST be the same length and be in the SAME order.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>bin_min</code></td>
<td>

<p>a (non-empty) object containing the lower bound of each bin. Currently, this package cannot handle data with open lower bounds. Importantly, ID, bh, bin_min, bin_max, and obs_mean MUST be the same length and be in the SAME order.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>bin_max</code></td>
<td>

<p>a (non-empty) object the upper bound of each bin. Currently, this package can only handle the upper-most bin being open ended. Importantly, ID, bh, bin_min, bin_max, and obs_mean MUST be the same length and be in the SAME order.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>obs_mean</code></td>
<td>

<p>a (non-empty) object containing the mean for each group.  Importantly, ID, bh, bin_min, bin_max, and obs_mean MUST be the same length and be in the SAME order.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ID_name</code></td>
<td>

<p>a (non-empty) object containing column name for the ID column.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>distribution</code></td>
<td>

<p>a (non-empty) character naming a gamlss family.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>distName</code></td>
<td>

<p>a (non-empty) character object with the name of the distribution.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>links</code></td>
<td>

<p>a (non-empty) vector of link characters naming functions with the following items: muLink, sigmaLink, nuLink, and tauLink.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>qFunc</code></td>
<td>

<p>a (non-empty)gamlss function for calculating quantiles, this should match the distribution in distribution.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>quantiles</code></td>
<td>

<p>a (non-empty) numeric vectors of the desired quantiles, these are used in calculating metrics.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>linksq</code></td>
<td>

<p>a (non-empty) vector of functions, which undue the link functions.  For example, if muLink = log, then the first entry in linksq should be exp.  If you are using an indentity link function in links, then the corresponding entry in linksq should be indentity. 
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>con</code></td>
<td>

<p>an optional lists modifying gamlss.control.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>saveQuants</code></td>
<td>

<p>an optional logical value indicating whether to save the quantiles.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>muStart</code></td>
<td>

<p>an optional numerical value for the starting value of mu.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>sigmaStart</code></td>
<td>

<p>an optional numerical value for the starting value of sigma.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>nuStart</code></td>
<td>

<p>an optional numerical value for the starting value of nu.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>tauStart</code></td>
<td>

<p>an optional numerical value for the starting value of tau.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>muFix</code></td>
<td>

<p>an logical value indicating whether mu is fixed or is free to vary during the fitting process.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>sigmaFix</code></td>
<td>

<p>an logical value indicating whether sigma is fixed or is free to vary during the fitting process.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>nuFix</code></td>
<td>

<p>an logical value indicating whether nu is fixed or is free to vary during the fitting process.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>tauFix</code></td>
<td>

<p>an logical value indicating whether tau is fixed or is free to vary during the fitting process.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>freeParams</code></td>
<td>

<p>a vector of logical values indicating whether each of the four parameters is free == TRUE or fixed == FALSE.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>smartStart</code></td>
<td>

<p>a logical indicating whether a smart starting place should be chosen, this applies only when fitting the GB2 distribution.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>tstamp</code></td>
<td>

<p>a time stamp.
</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>Fits a GAMLSS and estimates a number of metrics, see value.
</p>


<h3>Value</h3>

<p>returns a list with 'datOut' a data.frame with the IDs, observer mean, distribution, estimated mean, variance, coefficient of variation, cv squared, gini, theil, MLD, aic, bic, the results of a convergence test, log likelihood, number of parameters, median, and std. deviation; 'timeStamp' a time stamp; 'parameters' the estiamted parameter; and 'quantiles' the quantile estimates if saveQuants == TRUE)
</p>


<h3>References</h3>

<p>FIXME - references
</p>


<h3>See Also</h3>

<p><code>gamlss</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">data(state_bins)

use_states &lt;- which(state_bins[,'State'] == 'Texas' | state_bins[,'State'] == 'California')

ID &lt;- state_bins[use_states,'State']
hb &lt;- state_bins[use_states,'hb']
bmin &lt;- state_bins[use_states,'bin_min']
bmax &lt;- state_bins[use_states,'bin_max']
omu &lt;- rep(NA, length(use_states))
fitFunc(ID = ID, hb = hb, bin_min = bmin, bin_max = bmax, obs_mean = omu, ID_name = 'State')
</code></pre>


</div>