<div class="container">

<table style="width: 100%;"><tr>
<td>module_testing</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>The BioCro module testing system</h2>

<h3>Description</h3>

<p>BioCro provides several functions for defining, modifying, and running module
test cases. These functions together allow module developers to easily create
regression tests that ensure the modules continue to function correctly.
</p>


<h3>Details</h3>

<p>Together, <code>test_module_library</code>, <code>test_module</code>,
<code>case</code>, <code>cases_from_csv</code>,
<code>initialize_csv</code>, <code>add_csv_row</code>, and
<code>update_csv_cases</code> form a simple and convenient system for
defining and running module test cases. Such tests form a critical component
of BioCro's regression testing system, and test cases should be defined for
all BioCro modules in all BioCro module libraries. These functions are not
required in order to use the BioCro package, but they are critical to
understand when creating or modifying modules.
</p>
<p>A module test case consists of a set of module inputs, a set of module
outputs, and a short description of the case. To run the test, the inputs are
passed to the module, and then the calculated outputs are compared to the
expected ones. If the outputs match, the test is passed; otherwise, it fails.
This operation is handled by the <code>test_module</code> function.
</p>
<p>For simple on-the-fly testing, it is possible to define a test case using the
<code>case</code> function and run it using <code>test_module</code>.
However, a more robust method is available to facilitate regression testing,
where module test cases are stored in suitably-formatted <code>csv</code> files,
allowing multiple test cases to be defined for each module and easily checked
afterwards. If test case files for each module in a module library are stored
in a single directory, all the test cases can be checked with one call to
<code>test_module_library</code>.
</p>
<p>In this system, test cases for a module with fully-qualified name
<code>module_name</code> must be stored in <code>module_name.csv</code>,
where the colon in the module name has been replaced by an underscore; for
example, the module named <code>BioCro:total_biomass</code> would be associated with
<code>BioCro_total_biomass.csv</code>. The first row of a test case file must be the
quantity types (<code>input</code> or <code>output</code>), the second row must be the
quantity names, and the remaining rows must each specify input quantity values
along with the expected output values they should produce. There must also be
a <code>description</code> column (with <code>description</code> in the first row)
containing short descriptions of the test cases. These formatting requirements
will automatically be satisfied for any test case file produced by
<code>initialize_csv</code> or modified by <code>add_csv_row</code> or
<code>update_csv_cases</code>. Such files can be read from R using
<code>cases_from_csv</code>, and the resulting case objects can be passed to
<code>test_module</code>.
</p>
<p>Although it is possible, directly editing the case files is not recommended
since <code>initialize_csv</code>, <code>add_csv_row</code>, and
<code>update_csv_cases</code> are easier to use. There are several exceptions
to this suggestion: (1) when a case must be deleted, (2) when a module input
must be added or removed, and (3) during the initialization of a test file,
where a user may wish to batch-initialize using <code>update_csv_cases</code>
(see its documentation for an explanation of batch-initialization).
</p>
<p>Case files can easily be viewed using Excel or other spreadsheet viewers, and
are also nicely formatted when viewed on the GitHub website for the
repository.
</p>
<p>Examples of module test case files can be found in the
<code>tests/module_test_cases</code> directory, while code that uses the
<code>testthat</code> package to automatically run all the defined
test cases for the standard BioCro module library via
<code>test_module_library</code> can be found in the
<code>tests/testthat/test.Modules.R</code> file.
</p>


<h3>See Also</h3>


<ul>
<li> <p><code>modules</code>
</p>
</li>
<li> <p><code>module_case_files</code>
</p>
</li>
<li> <p><code>test_module_library</code>
</p>
</li>
<li> <p><code>test_module</code>
</p>
</li>
</ul>
</div>