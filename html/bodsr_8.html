<div class="container">

<table style="width: 100%;"><tr>
<td>get_timetable_metadata</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Return timetable metadata from the 'BODS' API</h2>

<h3>Description</h3>

<p>Return timetable metadata from the 'BODS' API
</p>


<h3>Usage</h3>

<pre><code class="language-R">get_timetable_metadata(
  api_key = Sys.getenv("BODS_KEY"),
  limit = 25,
  search = NULL,
  noc = NULL,
  admin_area = NULL,
  status = NULL,
  end_date_start = NULL,
  end_date_end = NULL,
  modified_date = NULL,
  start_date_start = NULL,
  start_date_end = NULL,
  dq_rag = NULL,
  bods_compliance = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>api_key</code></td>
<td>
<p>API key for the 'BODS' dataset passed as a string. Can be obtained from <a href="https://data.bus-data.dft.gov.uk/api/">the BODS API login</a></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>limit</code></td>
<td>
<p>integer. Maximum number of records to return for a query. Defaults to 25</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>search</code></td>
<td>
<p>string to search records on; can be a value or partial value to
match the data set name, data set description, organisation name, or admin
area name. Defaults to NULL.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>noc</code></td>
<td>
<p>string or vector of strings. Limit results to fares data sets for specified National Operator Codes.
A full lookup of NOC to bus operator names can be seen using noc_lookup().
Defaults to NULL.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>admin_area</code></td>
<td>
<p>string or vector of strings. Limit results to datasets with services that stop
within the specified area(s).  'ATCO' Area Codes are as specified in the <a href="https://www.data.gov.uk/dataset/3b1766bf-04a3-44f5-bea9-5c74cf002e1d/national-public-transport-gazetteer-nptg">NPTG area codes</a>
Defaults to NULL.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>status</code></td>
<td>
<p>string. Limit results to data sets with the specified status,
accepted values are "published" or "inactive". Defaults to NULL.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>end_date_start</code></td>
<td>
<p>datetime. Limit results to data sets with services with
end dates after this date. Defaults to NULL.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>end_date_end</code></td>
<td>
<p>datetime. Limit results to data sets with services with
end dates before this date. Defaults to NULL.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>modified_date</code></td>
<td>
<p>datetime. Limit results to data sets that have been
created or updated since the specified date. Defaults to NULL.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>start_date_start</code></td>
<td>
<p>datetime. Limit results to data sets with services
with start dates after this date. Defaults to NULL.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>start_date_end</code></td>
<td>
<p>datetime. Limit results to data sets with services
with start dates before this date. Defaults to NULL.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>dq_rag</code></td>
<td>
<p>string. Limit results to data sets with the specified RAG status.
Accepted options are "red", "amber" and "green". Defaults to NULL.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>bods_compliance</code></td>
<td>
<p>logical. Limit results to datasets with the specified
BODS compliance status. Defaults to NULL.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>Returns a data frame of timetable metadata including links to data from the 'BODS' API.
</p>


<h3>Examples</h3>

<pre><code class="language-R">
## Not run: 
#Before running these examples, ensure you have an API key saved
#Return the first 25 results of timetable metadata with no filters
get_timetable_metadata()

#Return timetable metadata for National Express
get_timetable_metadata(noc = "NATX")

#Return only published timetable metadata for Go Ahead with a green RAG status
get_timetable_metadata(noc = "BHBC", status = "published", dq_rag = "green")

#Return timetable metadata for the Devon admin area and search string
get_timetable_metadata(admin_area = "110", search = "Plymouth Citybus")

## End(Not run)
</code></pre>


</div>