<div class="container">

<table style="width: 100%;"><tr>
<td>diag,formula-method</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Diagonalize the random-effect covariance structure, possibly assisting convergence</h2>

<h3>Description</h3>

<p>Diagonalize the random-effect covariance structure, possibly assisting convergence
</p>


<h3>Usage</h3>

<pre><code class="language-R">## S4 method for signature 'formula'
diag(x)
</code></pre>


<h3>Arguments</h3>

<table><tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>A model formula.</p>
</td>
</tr></table>
<h3>Value</h3>

<p>The formula with all random-effect correlations forced to zero, per Pinheiro &amp; Bates (2000)
</p>


<h3>Examples</h3>

<pre><code class="language-R"># 1. Create explicit columns for factor variables
library(buildmer)
vowels &lt;- cbind(vowels,model.matrix(~vowel,vowels))
# 2. Create formula with diagonal covariance structure
form &lt;- diag(f1 ~ (vowel1+vowel2+vowel3+vowel4)*timepoint*following + 
	     ((vowel1+vowel2+vowel3+vowel4)*timepoint*following | participant) +
	     (timepoint | word))
# 3. Convert formula to buildmer terms list, grouping terms starting with 'vowel'
terms &lt;- tabulate.formula(form,group='vowel[^:]')
# 4. Directly pass the terms object to buildmer, using the 'dep' argument to specify the
# dependent variable
model &lt;- buildmer(terms,data=vowels,buildmerControl=list(dep='f1'))
</code></pre>


</div>