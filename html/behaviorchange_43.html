<div class="container">

<table style="width: 100%;"><tr>
<td>convert.threshold.to.er</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Visualising Numbers Needed for Change</h2>

<h3>Description</h3>

<p>These functions can be used to visualise Numbers Needed for Change (or
Numbers Needed to Treat).
<code>erDataSeq</code> is a helper function to generate an Event Rate Data
Sequence, and it uses <code>convert.threshold.to.er</code> and
<code>convert.er.to.threshold</code> to convert thresholds to event rates and vice
versa.
</p>


<h3>Usage</h3>

<pre><code class="language-R">convert.threshold.to.er(
  threshold,
  mean,
  sd,
  eventIfHigher = TRUE,
  pdist = stats::pnorm
)

convert.er.to.threshold(
  er,
  mean,
  sd,
  eventIfHigher = TRUE,
  qdist = stats::qnorm
)

erDataSeq(
  er = NULL,
  threshold = NULL,
  mean = NULL,
  sd = NULL,
  eventIfHigher = TRUE,
  pRange = c(1e-06, 0.99999),
  xStep = 0.01
)

ggNNC(
  cerDataSeq,
  d = NULL,
  eventDesirable = TRUE,
  r = 1,
  xlab = "Continuous outcome",
  plotTitle = c("Numbers Needed for Change = ", ""),
  theme = ggplot2::theme_bw(),
  lineSize = 1,
  cerColor = "#EBF2F8",
  eerColor = "#172F47",
  cerLineColor = "#888888",
  eerLineColor = "#000000",
  dArrowColor = "#000000",
  cerAlpha = 0.66,
  eerAlpha = 0.66,
  xLim = NULL,
  xLimAutoDensityTolerance = 0.001,
  showLegend = TRUE,
  verticalLineColor = "#172F47",
  desirableColor = "#00FF00",
  desirableAlpha = 0.2,
  undesirableColor = "#FF0000",
  undesirableAlpha = 0.2,
  desirableTextColor = "#009900",
  undesirableTextColor = "#990000",
  dArrowDistance = 0.04 * max(cerDataSeq$density),
  dLabelDistance = 0.08 * max(cerDataSeq$density)
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>threshold</code></td>
<td>
<p>If the event rate is not available, a threshold value can
be specified instead, which is then used in conjunction with the mean
(<code>mean</code>) and standard deviation (<code>sd</code>) and assuming a normal
distribution to compute the event rate.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>mean</code></td>
<td>
<p>The mean of the control group distribution.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>sd</code></td>
<td>
<p>The standard deviation (of the control distribution, but assumed
to be the same for both distributions).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>eventIfHigher</code></td>
<td>
<p>Whether scores above or below the threshold are
considered 'an event'.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>pdist, qdist</code></td>
<td>
<p>Distributions to use when converting thresholds to event
rates and vice versa; defaults to the normal distribution.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>er</code></td>
<td>
<p>Event rate to visualise (or convert).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>pRange</code></td>
<td>
<p>The range of probabilities for which to so the distribution.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>xStep</code></td>
<td>
<p>Precision of the drawn distribution; higher values mean lower
precision/granularity/resolution.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cerDataSeq</code></td>
<td>
<p>The <code>cerDataSeq</code> object.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>d</code></td>
<td>
<p>The value of Cohen's <em>d</em>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>eventDesirable</code></td>
<td>
<p>Whether an event is desirable or undesirable.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>r</code></td>
<td>
<p>The correlation between the determinant and behavior (for mediated
NNC's).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>xlab</code></td>
<td>
<p>The label to display for the X axis.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>plotTitle</code></td>
<td>
<p>The title of the plot; either one character value, this
value if used; if two, they are considered a prefix and suffix to be
pre/appended to the NNC value.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>theme</code></td>
<td>
<p>The theme to use for the plot.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>lineSize</code></td>
<td>
<p>The thickness of the lines in the plot.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cerColor</code></td>
<td>
<p>The color to use for the event rate portion of the control
group distribution.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>eerColor</code></td>
<td>
<p>The color to use for the event rate portion of the
experimental group distribution.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cerLineColor</code></td>
<td>
<p>The line color to use for the control group
distribution.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>eerLineColor</code></td>
<td>
<p>The line color to use for the experimental group
distribution.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>dArrowColor</code></td>
<td>
<p>The color of the arrow to show the effect size.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cerAlpha</code></td>
<td>
<p>The alpha value (transparency) to use for the control group
distribution.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>eerAlpha</code></td>
<td>
<p>The alpha value (transparency) to use for the control group
distribution.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>xLim</code></td>
<td>
<p>This can be used to manually specify the limits for the X axis;
if <code>NULL</code>, sensible limits will be derived using
<code>xLimAutoDensityTolerance</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>xLimAutoDensityTolerance</code></td>
<td>
<p>If <code>xLim</code> is <code>NULL</code>, the limits
will be set where the density falls below this proportion of its maximum
value.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>showLegend</code></td>
<td>
<p>Whether to show the legend (only if showing two
distributions).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>verticalLineColor</code></td>
<td>
<p>The color of the vertical line used to indicate the
threshold.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>desirableColor</code></td>
<td>
<p>The color for the desirable portion of the X axis.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>desirableAlpha</code></td>
<td>
<p>The alpha for the desirable portion of the X axis.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>undesirableColor</code></td>
<td>
<p>The color for the undesirable portion of the X axis.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>undesirableAlpha</code></td>
<td>
<p>The color for the undesirable portion of the X axis.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>desirableTextColor</code></td>
<td>
<p>The color for the text to indicate the desirable
portion of the X axis.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>undesirableTextColor</code></td>
<td>
<p>The color for the text to indicate the
undesirable portion of the X axis.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>dArrowDistance</code></td>
<td>
<p>The distance of the effect size arrow from the top of
the distributions.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>dLabelDistance</code></td>
<td>
<p>The distance of the effect size label from the top of
the distributions.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>These functions are used by <code>nnc()</code> to show the distributions, and
event rates. They probably won't be used much on their own.
</p>


<h3>Value</h3>

<p><code>erDataSeq</code> returns a data sequence; <code>ggNNC</code> a
<code>ggplot2::ggplot()</code>.
</p>


<h3>Author(s)</h3>

<p>Gjalt-Jorn Peters &amp; Stefan Gruijters
</p>
<p>Maintainer: Gjalt-Jorn Peters <a href="mailto:gjalt-jorn@userfriendlyscience.com">gjalt-jorn@userfriendlyscience.com</a>
</p>


<h3>References</h3>

<p>Gruijters, S. L., &amp; Peters, G. Y. (2019). Gauging the
impact of behavior change interventions: A tutorial on the Numbers
Needed to Treat. <em>PsyArXiv.</em> <a href="https://doi.org/10.31234/osf.io/2bau7">doi:10.31234/osf.io/2bau7</a>
</p>


<h3>See Also</h3>

<p><code>nnc()</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">
### Show distribution for an event rate value of 125
behaviorchange::ggNNC(behaviorchange::erDataSeq(threshold=125, mean=90, sd=30));

### If the event occurs under the threshold instead of
### above it
behaviorchange::ggNNC(behaviorchange::erDataSeq(threshold=125,
                                                mean=90, sd=30,
                      eventIfHigher = FALSE));

### ... And for undesirable events (note how
### desirability is an argument for ggNNC, whereas
### whether an event occurs 'above' or 'below' the
### threshold is an argument for erDataSeq):
behaviorchange::ggNNC(behaviorchange::erDataSeq(threshold=125,
                                                mean=90, sd=30,
                      eventIfHigher = FALSE),
      eventDesirable = FALSE);

### Show event rate for both experimental and
### control conditions, and show the numbers
### needed for change
behaviorchange::ggNNC(behaviorchange::erDataSeq(threshold=125,
                                                mean=90, sd=30),
                      d=.5);

### Illustration of how even with very large effect
### sizes, if the control event rate is very high,
### you'll still need a high number of NNC
behaviorchange::ggNNC(behaviorchange::erDataSeq(er=.9),
                      d=1);

</code></pre>


</div>