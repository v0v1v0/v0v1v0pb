<div class="container">

<table style="width: 100%;"><tr>
<td>surv.pre.bart</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Data construction for survival analysis with BART</h2>

<h3>Description</h3>

<p>Survival data contained in <code class="reqn">(t,\delta, x)</code> must be translated to data
suitable for the BART survival analysis model; see <code>surv.bart</code> for more details.
</p>


<h3>Usage</h3>

<pre><code class="language-R">surv.pre.bart( times, delta, x.train=NULL, x.test=NULL,
               K=NULL, events=NULL, ztimes=NULL, zdelta=NULL )
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>times</code></td>
<td>

<p>The time of event or right-censoring.<br></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>delta</code></td>
<td>

<p>The event indicator: 1 is an event while 0 is censored.<br></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>x.train</code></td>
<td>

<p>Explanatory variables for training (in sample) data.<br>
If provided, must be a matrix
with (as usual) rows corresponding to observations and columns to variables.<br></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>x.test</code></td>
<td>

<p>Explanatory variables for test (out of sample) data.<br>
If provided, must be a matrix and have the same structure as x.train.<br></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>K</code></td>
<td>

<p>If provided, then coarsen <code>times</code> per the quantiles
<code class="reqn">1/K, 2/K, ..., K/K</code>.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>events</code></td>
<td>

<p>If provided, then use for the grid of time points.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ztimes</code></td>
<td>

<p>If provided, then these columns of <code>x.train</code> (and
<code>x.test</code> if any) are the times for time-dependent covariates.
They will be transformed into time-dependent covariate sojourn times.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>zdelta</code></td>
<td>

<p>If provided, then these columns of <code>x.train</code> (and
<code>x.test</code> if any) are the delta for time-dependent covariates.
They will be transformed into time-dependent covariate binary events.
</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p><code>surv.pre.bart</code> returns a list.
Besides the items listed below, the list has
a <code>times</code> component giving the unique times and <code>K</code> which is the number of
unique times.
</p>
<table>
<tr style="vertical-align: top;">
<td><code>y.train</code></td>
<td>
<p>A vector of binary responses.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>tx.train</code></td>
<td>
<p>A matrix with rows consisting of time and the covariates of the training data.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>tx.test</code></td>
<td>
<p>A matrix with rows consisting of time and the
covariates of the test data, if any.</p>
</td>
</tr>
</table>
<h3>See Also</h3>

<p><code>surv.bart</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">
## load the advanced lung cancer example
data(lung)

group &lt;- -which(is.na(lung[ , 7])) ## remove missing row for ph.karno
times &lt;- lung[group, 2]   ##lung$time
delta &lt;- lung[group, 3]-1 ##lung$status: 1=censored, 2=dead
                          ##delta: 0=censored, 1=dead

summary(times)
table(delta)

x.train &lt;- as.matrix(lung[group, c(4, 5, 7)]) ## matrix of observed covariates
## lung$age:        Age in years
## lung$sex:        Male=1 Female=2
## lung$ph.karno:   Karnofsky performance score (dead=0:normal=100:by=10)
##                  rated by physician

dimnames(x.train)[[2]] &lt;- c('age(yr)', 'M(1):F(2)', 'ph.karno(0:100:10)')

summary(x.train[ , 1])
table(x.train[ , 2])
table(x.train[ , 3])

x.test &lt;- matrix(nrow=84, ncol=3) ## matrix of covariate scenarios

dimnames(x.test)[[2]] &lt;- dimnames(x.train)[[2]]

i &lt;- 1

for(age in 5*(9:15)) for(sex in 1:2) for(ph.karno in 10*(5:10)) {
    x.test[i, ] &lt;- c(age, sex, ph.karno)
    i &lt;- i+1
}

pre &lt;- surv.pre.bart(times=times, delta=delta, x.train=x.train, x.test=x.test)
str(pre)
    
</code></pre>


</div>