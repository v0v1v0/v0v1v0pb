<div class="container">

<table style="width: 100%;"><tr>
<td>align_test_files</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Align test sound files</h2>

<h3>Description</h3>

<p><code>align_test_files</code> aligns test (re-recorded) sound files.
</p>


<h3>Usage</h3>

<pre><code class="language-R">align_test_files(
  X,
  Y,
  path = getOption("sound.files.path", "."),
  by.song = TRUE,
  marker = NULL,
  cores = getOption("mc.cores", 1),
  pb = getOption("pb", TRUE),
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>X</code></td>
<td>
<p>object of class 'data.frame', 'selection_table' or 'extended_selection_table' (the last 2 classes are created by the function <code>selection_table</code> from the warbleR package). This should be the same data than that was used for finding the position of markers in <code>find_markers</code>. It should also contain a 'sound.id' column that will be used to label re-recorded sounds according to their counterpart in the master sound file.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>Y</code></td>
<td>
<p>object of class 'data.frame' with the output of <code>find_markers</code>. This object contains the position of markers in the re-recorded sound files. If more than one marker is supplied for a sound file only the one with the highest correlation score ('scores' column in 'X') is used.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>path</code></td>
<td>
<p>Character string containing the directory path where test (re-recorded) sound files are found.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>by.song</code></td>
<td>
<p>Logical argument to indicate if the extended selection table should be created by song (see 'by.song' <code>selection_table</code> argument). Default is <code>TRUE</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>marker</code></td>
<td>
<p>Character string to define whether a "start" or "end" marker would be used for aligning re-recorded sound files. Default is <code>NULL</code>. DEPRECATED.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cores</code></td>
<td>
<p>Numeric vector of length 1. Controls whether parallel computing is applied by specifying the number of cores to be used. Default is 1 (i.e. no parallel computing). Can be set globally for the current R session via the "mc.cores" option (see <code>options</code>).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>pb</code></td>
<td>
<p>Logical argument to control if progress bar is shown. Default is <code>TRUE</code>.  Can be set globally for the current R session via the "pb" option (see <code>options</code>).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Additional arguments to be passed to <code>selection_table</code> for customizing extended selection table.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>The function aligns sounds found in re-recorded sound files (referenced in 'Y') according to a master sound file (referenced in 'X'). If more than one marker is supplied for a sound file only the one with the highest correlation score ('scores' column in 'X') is used. The function outputs an 'extended selection table' by default.
</p>


<h3>Value</h3>

<p>An object of the same class than 'X' with the aligned sounds from test (re-recorded) sound files.
</p>


<h3>Author(s)</h3>

<p>Marcelo Araya-Salas (<a href="mailto:marcelo.araya@ucr.ac.cr">marcelo.araya@ucr.ac.cr</a>)
</p>


<h3>References</h3>


<p>Araya-Salas M., E. Grabarczyk, M. Quiroz-Oliva, A. Garcia-Rodriguez, A. Rico-Guevara. (2023), baRulho: an R package to quantify degradation in animal acoustic signals .bioRxiv 2023.11.22.568305.

</p>


<h3>See Also</h3>

<p><code>manual_realign</code>; <code>find_markers</code>; <code>plot_aligned_sounds</code>
</p>
<p>Other test sound alignment: 
<code>auto_realign()</code>,
<code>find_markers()</code>,
<code>manual_realign()</code>,
<code>plot_aligned_sounds()</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">{
  # load example data
  data(list = c("master_est", "test_sounds_est"))

  # save example files in working director to recreate a case in which working
  # with sound files instead of extended selection tables.
  # This doesn't have to be done with your own data as you will
  # have them as sound files already.
  for (i in unique(test_sounds_est$sound.files)[1:2]) {
    writeWave(object = attr(test_sounds_est, "wave.objects")[[i]], 
              file.path(tempdir(), i))
  }

  # save master file
  writeWave(object = attr(master_est, "wave.objects")[[1]], 
        file.path(tempdir(), "master.wav"))

  # get marker position for the first test file
    markers &lt;- find_markers(X = master_est,
    test.files = unique(test_sounds_est$sound.files)[1],
    path = tempdir())

  # align all test sounds
  alg.tests &lt;- align_test_files(X = master_est, Y = markers, 
  path = tempdir())
}
</code></pre>


</div>