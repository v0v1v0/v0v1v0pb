<div class="container">

<table style="width: 100%;"><tr>
<td>pnbd.DERT</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Pareto/NBD Discounted Expected Residual Transactions</h2>

<h3>Description</h3>

<p>Calculates the discounted expected residual transactions of a customer, given
their behavior during the calibration period.
</p>


<h3>Usage</h3>

<pre><code class="language-R">pnbd.DERT(params, x, t.x, T.cal, d, hardie = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>params</code></td>
<td>
<p>Pareto/NBD parameters - a vector with r, alpha, s, and beta, in
that order. r and alpha are unobserved parameters for the NBD transaction
process. s and beta are unobserved parameters for the Pareto (exponential
gamma) dropout process.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>number of repeat transactions in the calibration period T.cal, or a
vector of transaction frequencies.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>t.x</code></td>
<td>
<p>time of most recent repeat transaction, or a vector of recencies.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>T.cal</code></td>
<td>
<p>length of calibration period, or a vector of calibration period
lengths.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>d</code></td>
<td>
<p>the discount rate to be used. Make sure that it matches up with your
chosen time period (do not use an annual rate for monthly data, for
example).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>hardie</code></td>
<td>
<p>if TRUE, use <code>h2f1</code> instead of
<code>hypergeo</code>.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>DERT(d | r, alpha, s, beta, X = x, t.x, T.cal)
</p>
<p>x, t.x, T.cal may be vectors. The standard rules for vector operations apply
</p>

<ul><li>
<p> if they are not of the same length, shorter vectors will be recycled (start
over at the first element) until they are as long as the longest vector. It
is advisable to keep vectors to the same length and to use single values for
parameters that are to be the same for all calculations. If one of these
parameters has a length greater than one, the output will be also be a
vector.
</p>
</li></ul>
<h3>Value</h3>

<p>The number of discounted expected residual transactions for a
customer with a particular purchase pattern during the calibration period.
</p>


<h3>References</h3>

<p>Fader, Peter S., Bruce G.S. Hardie, and Ka L. Lee. "RFM and CLV:
Using Iso-Value Curves for Customer Base Analysis." Journal of Marketing
Research Vol.42, pp.415-430. November. 2005.
<a href="http://www.brucehardie.com/papers.html">http://www.brucehardie.com/papers.html</a>
</p>
<p>See equation 2.
</p>
<p>Note that this paper refers to what this package is calling
discounted expected residual transactions (DERT) simply as discounted
expected transactions (DET).
</p>


<h3>Examples</h3>

<pre><code class="language-R"># elog &lt;- dc.ReadLines(system.file("data/cdnowElog.csv", package="BTYD2"),2,3)
# elog[, 'date'] &lt;- as.Date(elog[, 'date'], format = '%Y%m%d')
# cal.cbs &lt;- dc.ElogToCbsCbt(elog)$cal$cbs
# params &lt;- pnbd.EstimateParameters(cal.cbs, hardie = TRUE)
params &lt;- c(0.5629966, 12.5590370, 0.4081095, 10.5148048)

# 15% compounded annually has been converted to 0.0027 compounded continuously,
# as we are dealing with weekly data and not annual data.
d &lt;- 0.0027

# calculate the discounted expected residual transactions of a customer
# who made 7 transactions in a calibration period that was 77.86
# weeks long, with the last transaction occurring at the end of
# the 35th week.
pnbd.DERT(params, 
          x = 7, 
          t.x = 35, 
          T.cal = 77.86, 
          d, 
          hardie = TRUE)

# We can also use vectors to compute DERT for several customers:
pnbd.DERT(params, 
          x = 1:10, 
          t.x = 30, 
          T.cal = 77.86, 
          d, 
          hardie = TRUE)
</code></pre>


</div>