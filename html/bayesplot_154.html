<div class="container">

<table style="width: 100%;"><tr>
<td>PPC-intervals</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>PPC intervals</h2>

<h3>Description</h3>

<p>Medians and central interval estimates of <code>yrep</code> with <code>y</code> overlaid.
See the <strong>Plot Descriptions</strong> section, below.
</p>


<h3>Usage</h3>

<pre><code class="language-R">ppc_intervals(
  y,
  yrep,
  x = NULL,
  ...,
  prob = 0.5,
  prob_outer = 0.9,
  alpha = 0.33,
  size = 1,
  fatten = 2.5,
  linewidth = 1
)

ppc_intervals_grouped(
  y,
  yrep,
  x = NULL,
  group,
  ...,
  facet_args = list(),
  prob = 0.5,
  prob_outer = 0.9,
  alpha = 0.33,
  size = 1,
  fatten = 2.5,
  linewidth = 1
)

ppc_ribbon(
  y,
  yrep,
  x = NULL,
  ...,
  prob = 0.5,
  prob_outer = 0.9,
  alpha = 0.33,
  size = 0.25,
  y_draw = c("line", "points", "both")
)

ppc_ribbon_grouped(
  y,
  yrep,
  x = NULL,
  group,
  ...,
  facet_args = list(),
  prob = 0.5,
  prob_outer = 0.9,
  alpha = 0.33,
  size = 0.25,
  y_draw = c("line", "points", "both")
)

ppc_intervals_data(
  y,
  yrep,
  x = NULL,
  group = NULL,
  ...,
  prob = 0.5,
  prob_outer = 0.9
)

ppc_ribbon_data(
  y,
  yrep,
  x = NULL,
  group = NULL,
  ...,
  prob = 0.5,
  prob_outer = 0.9
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>y</code></td>
<td>
<p>A vector of observations. See <strong>Details</strong>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>yrep</code></td>
<td>
<p>An <code>S</code> by <code>N</code> matrix of draws from the posterior (or prior)
predictive distribution. The number of rows, <code>S</code>, is the size of the
posterior (or prior) sample used to generate <code>yrep</code>. The number of columns,
<code>N</code> is the number of predicted observations (<code>length(y)</code>). The columns of
<code>yrep</code> should be in the same order as the data points in <code>y</code> for the plots
to make sense. See the <strong>Details</strong> and <strong>Plot Descriptions</strong> sections for
additional advice specific to particular plots.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>A numeric vector to use as the x-axis
variable. For example, <code>x</code> could be a predictor variable from a
regression model, a time variable for time-series models, etc. If <code>x</code>
is missing or <code>NULL</code> then the observation index is used for the x-axis.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Currently unused.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>prob, prob_outer</code></td>
<td>
<p>Values between <code>0</code> and <code>1</code> indicating the desired
probability mass to include in the inner and outer intervals. The defaults
are <code>prob=0.5</code> and <code>prob_outer=0.9</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>alpha, size, fatten, linewidth</code></td>
<td>
<p>Arguments passed to geoms. For ribbon
plots <code>alpha</code> is passed to <code>ggplot2::geom_ribbon()</code> to control the opacity
of the outer ribbon and <code>size</code> is passed to <code>ggplot2::geom_line()</code> to
control the size of the line representing the median prediction (<code>size=0</code>
will remove the line). For interval plots <code>alpha</code>, <code>size</code>, <code>fatten</code>, and
<code>linewidth</code> are passed to <code>ggplot2::geom_pointrange()</code> (<code>fatten=0</code> will
remove the point estimates).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>group</code></td>
<td>
<p>A grouping variable of the same length as <code>y</code>.
Will be coerced to factor if not already a factor.
Each value in <code>group</code> is interpreted as the group level pertaining
to the corresponding observation.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>facet_args</code></td>
<td>
<p>A named list of arguments (other than <code>facets</code>) passed
to <code>ggplot2::facet_wrap()</code> or <code>ggplot2::facet_grid()</code>
to control faceting. Note: if <code>scales</code> is not included in <code>facet_args</code>
then <strong>bayesplot</strong> may use <code>scales="free"</code> as the default (depending
on the plot) instead of the <strong>ggplot2</strong> default of <code>scales="fixed"</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>y_draw</code></td>
<td>
<p>For ribbon plots only, a string specifying how to draw <code>y</code>. Can
be <code>"line"</code> (the default), <code>"points"</code>, or <code>"both"</code>.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>The plotting functions return a ggplot object that can be further
customized using the <strong>ggplot2</strong> package. The functions with suffix
<code style="white-space: pre;">⁠_data()⁠</code> return the data that would have been drawn by the plotting
function.
</p>


<h3>Plot Descriptions</h3>


<dl>
<dt><code style="white-space: pre;">⁠ppc_intervals(), ppc_ribbon()⁠</code></dt>
<dd>
<p><code>100*prob</code>% central intervals for <code>yrep</code> at each <code>x</code>
value. <code>ppc_intervals()</code> plots intervals as vertical bars with points
indicating <code>yrep</code> medians and darker points indicating observed
<code>y</code> values. <code>ppc_ribbon()</code> plots a ribbon of connected intervals
with a line through the median of <code>yrep</code> and a darker line connecting
observed <code>y</code> values. In both cases an optional <code>x</code> variable can
also be specified for the x-axis variable.
</p>
<p>Depending on the number of observations and the variability in the
predictions at different values of <code>x</code>, one of these plots may be easier
to read than the other.
</p>
</dd>
<dt><code style="white-space: pre;">⁠ppc_intervals_grouped(), ppc_ribbon_grouped()⁠</code></dt>
<dd>
<p>Same as <code>ppc_intervals()</code> and <code>ppc_ribbon()</code>, respectively, but a
separate plot (facet) is generated for each level of a grouping variable.
</p>
</dd>
</dl>
<h3>References</h3>

<p>Gabry, J. , Simpson, D. , Vehtari, A. , Betancourt, M. and
Gelman, A. (2019), Visualization in Bayesian workflow.
<em>J. R. Stat. Soc. A</em>, 182: 389-402. doi:10.1111/rssa.12378.
(<a href="https://rss.onlinelibrary.wiley.com/doi/full/10.1111/rssa.12378">journal version</a>,
<a href="https://arxiv.org/abs/1709.01449">arXiv preprint</a>,
<a href="https://github.com/jgabry/bayes-vis-paper">code on GitHub</a>)
</p>
<p>Gelman, A., Carlin, J. B., Stern, H. S., Dunson, D. B., Vehtari,
A., and Rubin, D. B. (2013). <em>Bayesian Data Analysis.</em> Chapman &amp; Hall/CRC
Press, London, third edition. (Ch. 6)
</p>


<h3>See Also</h3>

<p>Other PPCs: 
<code>PPC-censoring</code>,
<code>PPC-discrete</code>,
<code>PPC-distributions</code>,
<code>PPC-errors</code>,
<code>PPC-loo</code>,
<code>PPC-overview</code>,
<code>PPC-scatterplots</code>,
<code>PPC-test-statistics</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">y &lt;- rnorm(50)
yrep &lt;- matrix(rnorm(5000, 0, 2), ncol = 50)

color_scheme_set("brightblue")
ppc_intervals(y, yrep)
ppc_ribbon(y, yrep)
ppc_ribbon(y, yrep, y_draw = "points")
## Not run: 
ppc_ribbon(y, yrep, y_draw = "both")

## End(Not run)

ppc_intervals(y, yrep, size = 1.5, fatten = 0) # remove the yrep point estimates

color_scheme_set("teal")
year &lt;- 1950:1999
ppc_intervals(y, yrep, x = year, fatten = 1) + ggplot2::xlab("Year")
ppc_ribbon(y, yrep, x = year) + ggplot2::xlab("Year")

color_scheme_set("pink")
year &lt;- rep(2000:2009, each = 5)
group &lt;- gl(5, 1, length = 50, labels = LETTERS[1:5])
ppc_ribbon_grouped(y, yrep, x = year, group, y_draw = "both") +
  ggplot2::scale_x_continuous(breaks = pretty)

ppc_ribbon_grouped(y, yrep, x = year, group,
                   facet_args = list(scales = "fixed")) +
 xaxis_text(FALSE) +
 xaxis_ticks(FALSE) +
 panel_bg(fill = "gray20")

# get the data frames used to make the ggplots
ppc_dat &lt;- ppc_intervals_data(y, yrep, x = year, prob = 0.5)
ppc_group_dat &lt;- ppc_intervals_data(y, yrep, x = year, group = group, prob = 0.5)

## Not run: 
library("rstanarm")
fit &lt;- stan_glmer(mpg ~ wt + (1|cyl), data = mtcars, refresh = 0)
yrep &lt;- posterior_predict(fit)

color_scheme_set("purple")
ppc_intervals(y = mtcars$mpg, yrep = yrep, x = mtcars$wt, prob = 0.8) +
 panel_bg(fill="gray90", color = NA) +
 grid_lines(color = "white")

ppc_ribbon(y = mtcars$mpg, yrep = yrep, x = mtcars$wt,
           prob = 0.6, prob_outer = 0.8)

ppc_ribbon_grouped(y = mtcars$mpg, yrep = yrep, x = mtcars$wt,
                   group = mtcars$cyl)


color_scheme_set("gray")
ppc_intervals(mtcars$mpg, yrep, prob = 0.5) +
 ggplot2::scale_x_continuous(
   labels = rownames(mtcars),
   breaks = 1:nrow(mtcars)
 ) +
 xaxis_text(angle = -70, vjust = 1, hjust = 0) +
 xaxis_title(FALSE)


## End(Not run)


</code></pre>


</div>