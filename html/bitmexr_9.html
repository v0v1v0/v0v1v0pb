<div class="container">

<table style="width: 100%;"><tr>
<td>map_trades</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Trade data over an extended period</h2>

<h3>Description</h3>

<p>The map variant of <code>trades()</code> uses a repeat loop to continually
request trade data between two time points.
The function will stop when the <code>start_date</code> is greater than <code>end_date</code>.
Given the large number of trades executed per day,
a warning message with a choice to continue is presented when inputting a
date range spanning more than one day.
</p>


<h3>Usage</h3>

<pre><code class="language-R">map_trades(
  symbol = "XBTUSD",
  start_date = "2019-01-01 12:00:00",
  end_date = "2019-01-01 12:15:00",
  filter = NULL,
  use_auth = FALSE,
  verbose = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>symbol</code></td>
<td>
<p>a character string for the instrument symbol.
Use <code>available_symbols()</code> to see available symbols.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>start_date</code></td>
<td>
<p>character string.
Starting date for results in the format <code>"yyyy-mm-dd"</code> or <code>"yyyy-mm-dd hh-mm-ss"</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>end_date</code></td>
<td>
<p>character string.
Ending date for results in the format <code>"yyyy-mm-dd"</code> or <code>"yyyy-mm-dd hh-mm-ss"</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>filter</code></td>
<td>
<p>an optional character string for table filtering.
Send JSON key/value pairs, such as <code>"{'key':'value'}"</code>. See examples in <code>trades()</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>use_auth</code></td>
<td>
<p>logical. Use <code>TRUE</code> to enable authentication with API key.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>verbose</code></td>
<td>
<p>logical. If <code>TRUE</code>, will print information to the console. Useful for
long running requests.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>Warning! Due to the extremely large number of trades executed on the exchange,
using this function over an extended of time frame will result in an extremely
long running process.
For example, during 2019 the exchange averaged approximately 630000 trades per day,
with a maximum of 2114878 trades being executed in a single day.
Obtaining the trade data for this day alone would take over an hour, and the use of
<code>map_bucket_trades()</code> with a small 'binSize' (e.g., <code>"1m"</code>) is preferrable.
</p>


<h3>Value</h3>

<p><code>map_trades()</code> returns a <code>data.frame</code> containing:
</p>

<ul>
<li>
<p>timestamp: POSIXct. Date and time of trade.
</p>
</li>
<li>
<p>symbol: character. The instrument ticker.
</p>
</li>
<li>
<p>side: character. Whether the trade was buy or sell.
</p>
</li>
<li>
<p>size: numeric. Size of the trade.
</p>
</li>
<li>
<p>price: numeric. Price the trade was executed at
</p>
</li>
<li>
<p>tickDirection: character. Indicates if the trade price was higher,
lower or the same as the previous trade price.
</p>
</li>
<li>
<p>trdMatchID: character. Unique trade ID.
</p>
</li>
<li>
<p>grossValue: numeric. How many satoshi were exchanged. 1 satoshi = 0.00000001 BTC.
</p>
</li>
<li>
<p>homeNotional: numeric. BTC value of the trade.
</p>
</li>
<li>
<p>foreignNotional: numeric. USD value of the trade.
</p>
</li>
</ul>
<h3>References</h3>

<p><a href="https://www.bitmex.com/api/explorer/#!/Trade/Trade_get">https://www.bitmex.com/api/explorer/#!/Trade/Trade_get</a>
</p>


<h3>Examples</h3>

<pre><code class="language-R">## Not run: 

# Get all trade data between 2019-05-03 12:00:00 and 2019-05-03 12:15:00

map_trades(
  start_date = "2019-05-03 12:00:00",
  end_date = "2019-05-03 12:15:00",
  symbol = "XBTUSD"
)

## End(Not run)

</code></pre>


</div>