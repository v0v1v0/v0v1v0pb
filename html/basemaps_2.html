<div class="container">

<table style="width: 100%;"><tr>
<td>basemap</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Get a spatial basemap</h2>

<h3>Description</h3>

<p>These functions (down)load and cache a basemap of a defined extent <code>ext</code>, <code>map_service</code> and <code>map_type</code> and return it as an object of the defined class. Alternatively to defining the following arguments, <code>set_defaults</code> can be used to define basemap preferences once for the running session.
</p>


<h3>Usage</h3>

<pre><code class="language-R">basemap(
  ext = NULL,
  map_service = NULL,
  map_type = NULL,
  map_res = NULL,
  map_token = NULL,
  map_dir = NULL,
  class = "plot",
  force = FALSE,
  ...,
  verbose = TRUE
)

basemap_plot(
  ext = NULL,
  map_service = NULL,
  map_type = NULL,
  map_res = NULL,
  map_token = NULL,
  map_dir = NULL,
  force = NULL,
  ...,
  verbose = TRUE
)

basemap_magick(
  ext = NULL,
  map_service = NULL,
  map_type = NULL,
  map_res = NULL,
  map_token = NULL,
  map_dir = NULL,
  force = NULL,
  ...,
  verbose = TRUE
)

basemap_png(
  ext = NULL,
  map_service = NULL,
  map_type = NULL,
  map_res = NULL,
  map_token = NULL,
  map_dir = NULL,
  force = NULL,
  ...,
  verbose = TRUE
)

basemap_geotif(
  ext = NULL,
  map_service = NULL,
  map_type = NULL,
  map_res = NULL,
  map_token = NULL,
  map_dir = NULL,
  force = NULL,
  ...,
  verbose = TRUE
)

basemap_terra(
  ext = NULL,
  map_service = NULL,
  map_type = NULL,
  map_res = NULL,
  map_token = NULL,
  map_dir = NULL,
  force = NULL,
  ...,
  verbose = TRUE
)

basemap_raster(
  ext = NULL,
  map_service = NULL,
  map_type = NULL,
  map_res = NULL,
  map_token = NULL,
  map_dir = NULL,
  force = NULL,
  ...,
  verbose = TRUE
)

basemap_stars(
  ext = NULL,
  map_service = NULL,
  map_type = NULL,
  map_res = NULL,
  map_token = NULL,
  map_dir = NULL,
  force = NULL,
  ...,
  verbose = TRUE
)

basemap_ggplot(
  ext = NULL,
  map_service = NULL,
  map_type = NULL,
  map_res = NULL,
  map_token = NULL,
  map_dir = NULL,
  force = NULL,
  ...,
  verbose = TRUE
)

basemap_gglayer(
  ext = NULL,
  map_service = NULL,
  map_type = NULL,
  map_res = NULL,
  map_token = NULL,
  map_dir = NULL,
  force = NULL,
  ...,
  verbose = TRUE
)

basemap_mapview(
  ext = NULL,
  map_service = NULL,
  map_type = NULL,
  map_res = NULL,
  map_token = NULL,
  map_dir = NULL,
  force = NULL,
  ...,
  verbose = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>ext</code></td>
<td>
<p>extent to be covered by the basemap as any spatial class supported by <code>st_bbox</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>map_service</code></td>
<td>
<p>character, a map service, either <code>"osm"</code>, <code>"carto"</code> or <code>"mapbox"</code>. Default is <code>"osm"</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>map_type</code></td>
<td>
<p>character, a map type, e.g. <code>"streets"</code>. For a full list of available map types, see <code>get_maptypes</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>map_res</code></td>
<td>
<p>numeric, resolution of base map in range from 0 to 1.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>map_token</code></td>
<td>
<p>character, authentication token for services that require registration, which are <code>"osm_stamen"</code>, <code>"osm_stadia"</code>, <code>"osm_thunderforest"</code> and <code>"mapbox"</code>. Register at <a href="https://stadiamaps.com/">https://stadiamaps.com/</a> (for stamen and stadia), <a href="https://www.thunderforest.com/">https://www.thunderforest.com/</a> and/or <a href="https://www.mapbox.com/">https://www.mapbox.com/</a> to get tokens. Ignored for all other map services.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>map_dir</code></td>
<td>
<p>character, cache directory where downloaded basemap tiles will be stored. By default, a temporary directory is used, which is destroyed when the session is terminated.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>class</code></td>
<td>
<p>character, output class, either either <code>plot</code> (default), <code>magick</code>, <code>png</code>, <code>geotif</code> or if suggested packages are installed, <code>terra</code>, <code>raster</code>, <code>stars</code>, <code>ggplot</code>, <code>gglayer</code> or <code>mapview</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>force</code></td>
<td>
<p>logical, whether to force download over cached files or not. Default is <code>FALSE</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>additional arguments, including
</p>

<ul>
<li> <p><code>browse</code>, logical, for <code>class = "png"</code> and interactive sessions only. Whether to open the png file in the system's default PNG viewer or not. Default is <code>TRUE</code>.
</p>
</li>
<li> <p><code>col</code>, character vector of colours for transforming single-layer basemaps into RGB, if <code>class = "png"</code> or <code>class = "magick"</code>. Default is <code>topo.colors(25)</code>.
</p>
</li>
<li> <p><code>dpi</code>,  numeric vector of length 1 or 2 specifying the resolution of the image in DPI (dots per inch) for x and y (in that order) - it is recycled to length 2.
</p>
</li>
<li>
<p> etc. (see <code>?gg_raster</code> for valid arguments when using <code>class = "gglayer"</code> or <code>class = "ggplot"</code>, including <code>maxpixels</code> to control resolution of ggplot outputs
</p>
</li>
</ul>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>verbose</code></td>
<td>
<p>logical, if <code>TRUE</code>, messages and progress information are displayed on the console (default).</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>A basemap of the defined class in Web/Pseudo Mercator Projection (EPSG: 3857)
</p>


<h3>Note</h3>

<p>See get_maptypes for available map services and their sources.
</p>
<p>The use of the map services <code>"osm_thunderforest"</code> and <code>"mapbox"</code> require registration to obtain an API token/key which can be supplied to <code>map_token</code>. Register at <a href="https://www.thunderforest.com/">https://www.thunderforest.com/</a> and/or <a href="https://www.mapbox.com/">https://www.mapbox.com/</a> to get a token.
</p>


<h3>Examples</h3>

<pre><code class="language-R">library(basemaps)

# example extent
data(ext)

# view all available maps
get_maptypes()

# set defaults for the basemap
set_defaults(map_service = "osm", map_type = "terrain_bg")
# for "osm_stamen", "osm_stadia", osm "thunderforest" and "mapbox" maps, you need a API token. 
# Register for free at stadiamaps.com, thunderforest.com and mapbox.com to get tokens.

## Not run: 
# load and return basemap map as raster (default)
map &lt;- basemap(ext)

# or explicitely as different classes such as:
basemap_magick(ext)
basemap_raster()
basemap_stars()

# or as files:
basemap_geotif()
basemap_png()

# or as plots:
basemap_plot(ext)
basemap_mapview()

# including ggplot2:
basemap_ggplot(ext)

# or as ggplot2 layer:
library(ggplot2)
ggplot() + 
  basemap_gglayer(ext) +
  scale_fill_identity() + 
  coord_sf()

# or, when combined with an sf vector object,
# make sure to use Web/Pseudo Mercator (EPSG 3857), as this is
# the CRS in which all basemaps are returned (see "Value"):
library(sf)
ext &lt;- st_transform(ext,  crs = st_crs(3857))
ggplot() + 
  basemap_gglayer(ext) + 
  geom_sf(data = ext, color = "red", fill = "transparent") +
  coord_sf() +
  scale_fill_identity()
 
## End(Not run)
</code></pre>


</div>