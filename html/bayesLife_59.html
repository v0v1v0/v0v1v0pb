<div class="container">

<table style="width: 100%;"><tr>
<td>e0options</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>
Global options
</h2>

<h3>Description</h3>

<p>Setting, retrieving and updating global options.
</p>


<h3>Usage</h3>

<pre><code class="language-R">using.bayesLife()
e0options()
e0mcmc.options(..., annual = FALSE)
e0pred.options(...)

e0mcmc.dlpriors.options(prior.choice = "B", annual = FALSE, 
    un.constraints = FALSE)
    
get.DLpriors(prior.choice = NULL, annual = FALSE)

data(DLpriors)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Arguments in <code>tag = value</code> form, or names of options to retrieve.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>annual</code></td>
<td>
<p>Logical indicating if the options are for an annual simulation (<code>TRUE</code>) or a 5-year simulation(<code>FALSE</code>).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>prior.choice</code></td>
<td>
<p>A character indicating for which combination of the upper bound on the <code class="reqn">z</code> parameter and the upper bound of <code>sumTriangle.lim</code> priors for <code>a</code>, <code>delta</code> and <code>tau</code> should be used. Choices are “A” (0.653, 83), “B” (0.653, 86; default), “C” (1.150, 83), “D” (1.150, 86). See Details for more information. Use <code>get.DLpriors()</code> to view the priors. If this argument is <code>NULL</code> no update/choice is taken.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>un.constraints</code></td>
<td>
<p>Logical indicating if constraints on the lower bounds of the <code>Triangle</code> parameter posed by the UN in WPP 2022 should be used.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>Function <code>using.bayesLife</code> sets all global options to their default values. Function <code>e0options</code> is used to get all options as a named list. 
</p>
<p>The global options are divided into three main categories, namely options used for MCMC estimations in a 5-year simulation, in a 1-year simulation, and options used for predictions. To set or retrieve options of the first two categories, use <code>e0mcmc.options</code> and use the argument <code>annual</code> to distinguish between them (see section MCMC Options below), while the third category is controlled by <code>e0pred.options</code> (see section Prediction Options below). 
</p>
<p>Many options are in the form of a list and it is possible to overwrite only single elements of the list. However, if an option is a vector, all elements of the vector have to be defined when updating (see Example).
</p>
<p>The dataset <code>DLpriors</code> contains four sets of parameters <code>a</code>, <code>delta</code> and <code>tau</code> (see section MCMC Options below) estimated for different combinations of the upper limit on the <code>z</code> parameter (i.e. maximum 5-year increase of e0; column “Uz”) and the upper bound of the sum of <code class="reqn">\Delta_i</code> (column “Sa”; set in the <code>sumTriangle.lim</code> option which is interpreted as the value of e0 for which the transition is completed; see below for more detail). A <code>get.DLpriors()</code> call retrieves all available combinations. Function <code>e0mcmc.dlpriors.options</code> can be used to change the default option B (i.e. the upper limit on <code>z</code> being 0.653 and the transition being completed at e0 of 86). Use the column “option” from <code>DLpriors</code> to select the desired combination. In addition, setting the argument <code>un.constraints</code> to <code>TRUE</code> will set the lower limit on the <code class="reqn">\Delta_i</code> parameters (<code>Triangle</code>, <code>Triangle.c</code>) to the same values as the UN used for WPP 2022. Note that the <code>DLpriors</code> dataset corresponds to parameter values designed for a 5-year simulation. Use <code>get.DLprior(annual = TRUE)</code> to see the equivalents for an annual simulation where various values are divided by five.
</p>


<h3>Value</h3>

<p><code>e0options</code> returns a list of all global options.<br><br><code>e0mcmc.options</code>, when called with no argument other than <code>annual</code>, it returns a list of options related to the MCMC estimation. The <code>annual</code> argument determines if the values correspond to an annual or 5-year simulation.<br><br><code>e0pred.options</code>, when called with no argument, it returns a list of options related to the prediction. <br><br>
For both, <code>e0mcmc.options</code> and <code>e0pred.options</code>, when a specific option is queried, it returns the value of that option. When an option is set, a list of the previous values of all MCMC/prediction options is returned invisibly. <br><br><code>get.DLpriors</code> returns the content of the <code>DLpriors</code> dataset. <br><br><code>e0mcmc.dlpriors.options</code> overwrites various values and like <code>e0mcmc.options</code>, it returns a list of the previous values of all MCMC options invisibly. 
</p>


<h3>MCMC Options</h3>


<dl>
<dt>a</dt>
<dd>
<p>vector of the <code class="reqn">a_1</code>, ... ,<code class="reqn">a_6</code> parameters, which are the prior means of the world-level parameters (<code class="reqn">\Delta_1</code>, ..., <code class="reqn">\Delta_4</code>, <code class="reqn">k</code>, <code class="reqn">z</code>).</p>
</dd>
<dt>delta</dt>
<dd>
<p>vector of the <code class="reqn">\delta_1</code>, ... ,<code class="reqn">\delta_6</code> parameters, 
which are the prior standard deviations of the world-level parameters (<code class="reqn">\Delta_1</code>, ..., <code class="reqn">\Delta_4</code>, <code class="reqn">k</code>, <code class="reqn">z</code>).</p>
</dd>
<dt>tau</dt>
<dd>
<p>vector of the <code class="reqn">\tau_1</code>, ... ,<code class="reqn">\tau_6</code> parameters, which is the square root rate of the prior Gamma distribution of the world-level parameters (<code class="reqn">\lambda_1</code>, ..., <code class="reqn">\lambda_4</code>, <code class="reqn">\lambda_k</code>, <code class="reqn">\lambda_z</code>).</p>
</dd>
<dt>Triangle</dt>
<dd>
<p>list with elements:
</p>

<dl>
<dt>ini</dt>
<dd>
<p>list with elements:
</p>

<dl>
<dt>T1, T2, T3, T4</dt>
<dd>
<p>initial values for <code class="reqn">\Delta_1</code>, ..., <code class="reqn">\Delta_4</code>. If not <code>NULL</code>, then each element should be of the same length as the number of MCMC chains. If it is <code>NULL</code>, the initial values are equally spaced between <code>ini.low</code> and <code>ini.up</code> for the respective parameter. By default in the estimation, if there is just one chain, the initial value is the middle point of the interval.</p>
</dd>
</dl>
</dd>
<dt>ini.low, ini.up</dt>
<dd>
<p>vectors of length four. They are the lower and upper bounds for initial values of <code class="reqn">\Delta_1</code>, ..., <code class="reqn">\Delta_4</code>. An <code class="reqn">i</code>-th item is only used if <code>ini$Ti</code> is <code>NULL</code>.</p>
</dd>
<dt>prior.low, prior.up</dt>
<dd>
<p>vectors of length four. They are the lower and upper bounds for the prior (truncated normal) distribution of <code class="reqn">\Delta_1</code>, ..., <code class="reqn">\Delta_4</code>.</p>
</dd>   
<dt>slice.width</dt>
<dd>
<p>vector of length four defining the slice width for MCMC slice sampling for the four parameters, <code class="reqn">\Delta_1</code>, ..., <code class="reqn">\Delta_4</code>.</p>
</dd>
</dl>
</dd>
<dt>k, z</dt>
<dd>
<p>lists with elements:
</p>

<dl>
<dt>ini</dt>
<dd>
<p>vector of initial values for <code class="reqn">k</code> (<code class="reqn">z</code>). Its length (if not <code>NULL</code>) should correspond to the number of MCMC chains. By default, the initial values are equally spaced between <code>ini.low</code> and <code>ini.up</code>. In case of one chain, the initial value is by default the middle point of the interval.</p>
</dd>
<dt>ini.low, ini.up</dt>
<dd>
<p>single value giving the lower and upper bounds for initial values of <code class="reqn">k</code> (<code class="reqn">z</code>). It is only used if <code>ini</code> is <code>NULL</code>. Regarding defaults for the <code class="reqn">z</code> parameter, see Note below.</p>
</dd>
<dt>prior.low, prior.up</dt>
<dd>
<p>single value giving the lower and upper bounds for the prior (truncated normal) distribution  of <code class="reqn">k</code> (<code class="reqn">z</code>). Regarding defaults for the <code class="reqn">z</code> parameter, see Note below.</p>
</dd>
<dt>slice.width</dt>
<dd>
<p>single value giving the slice width for MCMC slice sampling of the <code class="reqn">z</code> parameter (not available for <code class="reqn">k</code>).</p>
</dd>
</dl>
</dd>
<dt>lambda</dt>
<dd>
<p>list with elements:
</p>

<dl>
<dt>ini</dt>
<dd>
<p>list with elements:
</p>

<dl>
<dt>T1, T2, T3, T4</dt>
<dd>
<p>initial values for <code class="reqn">\lambda_1</code>, ..., <code class="reqn">\lambda_4</code>. Each element should be of the same length as the number of MCMC chains. If it is <code>NULL</code>, the initial values are equally spaced between <code>ini.low</code> and <code>ini.up</code> of the respective parameter. By default, if there is just one chain, the value is the middle point of the interval.</p>
</dd>
</dl>
</dd>
<dt>ini.low, ini.up</dt>
<dd>
<p>vectors of length four. They are the lower and upper bounds for initial values of <code class="reqn">\lambda_1</code>, ..., <code class="reqn">\lambda_4</code>. An <code class="reqn">i</code>-th item is only used if <code>ini$Ti</code> is <code>NULL</code>.</p>
</dd>
<dt>slice.width</dt>
<dd>
<p>vector of length four defining the slice width for MCMC slice sampling for the four parameters, <code class="reqn">\lambda_1</code>, ..., <code class="reqn">\lambda_4</code>.</p>
</dd>
</dl>
</dd>
<dt>lambda.k, lambda.z</dt>
<dd>
<p>lists with elements:
</p>
     
<dl>
<dt>ini</dt>
<dd>
<p>vector of initial values for <code class="reqn">\lambda_k</code> (<code class="reqn">\lambda_z</code>). Its length (if not <code>NULL</code>) should correspond to the number of MCMC chains. By default, the initial values are equally spaced between <code>ini.low</code> and <code>ini.up</code>. In case of one chain, the initial value is by default the middle point of the interval.</p>
</dd>
<dt>ini.low, ini.up</dt>
<dd>
<p>single value giving the lower and upper bounds for initial values of <code class="reqn">\lambda_k</code> (<code class="reqn">\lambda_z</code>). It is only used if <code>ini</code> is <code>NULL</code>.</p>
</dd> 
<dt>slice.width</dt>
<dd>
<p>single value giving the slice width for MCMC slice sampling of the <code class="reqn">\lambda_z</code> parameter (not available for <code class="reqn">\lambda_k</code>).</p>
</dd>
</dl>
</dd>
<dt>omega</dt>
<dd>
<p>list with elements:
</p>
 
<dl>
<dt>ini</dt>
<dd>
<p>vector of initial values for <code class="reqn">\omega</code>. Its length (if not <code>NULL</code>) should correspond to the number of MCMC chains. By default, the initial values are equally spaced between <code>ini.low</code> and <code>ini.up</code>. In case of one chain, the initial value is by default the middle point of the interval.</p>
</dd>
<dt>ini.low, ini.up</dt>
<dd>
<p>single value giving the lower and upper bounds for initial values of <code class="reqn">\omega</code>. It is only used if <code>ini</code> is <code>NULL</code>.</p>
</dd>
</dl>
</dd>
<dt>Triangle.c</dt>
<dd>
<p>list with elements:
</p>
  
<dl>
<dt>ini.norm</dt>
<dd>
<p>list with elements:
</p>

<dl>
<dt>mean, sd</dt>
<dd>
<p>vectors of size four. They correspond to the means and standard deviations, respectively, for the initial values of the country-specific parameters <code class="reqn">\Delta_1^c</code>, ..., <code class="reqn">\Delta_4^c</code> which are drawn from a truncated normal distribution with bounds defined by <code>prior.low</code> and <code>prior.up</code>.</p>
</dd>
</dl>
</dd>
<dt>prior.low, prior.up</dt>
<dd>
<p>vectors of length four. They are the lower and upper bounds for the prior (truncated normal) distribution of country-specific <code class="reqn">\Delta_1^c</code>, ..., <code class="reqn">\Delta_4^c</code>.</p>
</dd> 
<dt>slice.width</dt>
<dd>
<p>vector of length four defining the slice width for MCMC slice sampling of the country-specific <code class="reqn">\Delta_1^c</code>, ..., <code class="reqn">\Delta_4^c</code>.</p>
</dd>
</dl>
</dd>
<dt>k.c, z.c</dt>
<dd>
<p>list with elements:
</p>
  
<dl>
<dt>ini.norm</dt>
<dd>
<p>named vector of length two, called “mean” and “sd”. The elements correspond to the means and standard deviations, respectively, for the initial values of the country-specific parameters <code class="reqn">k^c</code> (<code class="reqn">z^c</code>) which are drawn from a normal distribution truncated between <code>prior.low</code> and <code>prior.up</code>.</p>
</dd>
<dt>prior.low, prior.up</dt>
<dd>
<p>single values giving the lower and upper bounds for the prior (truncated normal) distribution  of country-specific <code class="reqn">k^c</code> (<code class="reqn">z^c</code>). Regarding defaults for <code class="reqn">z^c</code>, see Note below.</p>
</dd>
<dt>slice.width</dt>
<dd>
<p>single value giving the slice width for MCMC slice sampling of the <code class="reqn">k^c</code> (<code class="reqn">z^c</code>) parameter.</p>
</dd>
</dl>
</dd>
<dt>nu</dt>
<dd>
<p>the shape parameter of the Gamma distributions of all <code class="reqn">\lambda</code> parameters is <code>nu/2</code>.</p>
</dd>
<dt>dl.p1, dl.p2</dt>
<dd>
<p>values of the parameters <code class="reqn">p_1</code> and <code class="reqn">p_2</code> of the double logistic function.</p>
</dd>
<dt>sumTriangle.lim</dt>
<dd>
<p>lower and upper limits for the sum of the <code class="reqn">\Delta_i</code> parameters. MCMC proposals that are outside of this limit are rejected. It is applied to both, the world parameters as well as the country specific parameters. The sum of <code class="reqn">\Delta_i</code> can be interpreted as the level of e0 at which the transition is completed and is followed by an e0 increase with a constant rate <code>z</code>.</p>
</dd>
<dt>world.parameters</dt>
<dd>
<p>named vector where names are the world parameters and values are the number of sub-parameters. For example, <code class="reqn">\Delta</code> has 4 sub-parameters, while <code class="reqn">k</code> and <code class="reqn">z</code> are both just one parameter.</p>
</dd>
<dt>country.parameters</dt>
<dd>
<p>named vector where names are the country-specific parameters and values are the number of sub-parameters.</p>
</dd>
<dt>outliers</dt>
<dd>
<p>ranges for determining outliers in the historical data. If <code>outliers=c(x, y)</code> then any increase in life expectancy smaller than <code>x</code> or larger than <code>y</code> is considered as an outlier and removed from the estimation.</p>
</dd>
<dt>buffer.size</dt>
<dd>
<p>buffer size (in number of [thinned] iterations) for keeping data in the memory. The smaller the <code>buffer.size</code> the more often will the process access the hard disk and thus, the slower the run. On the other hand, the smaller the <code>buffer.size</code> the less data will be lost in case of failure.</p>
</dd>
<dt>auto.conf</dt>
<dd>
<p>list containing a configuration for an ‘automatic’ run. All items in this list must be integer values. The option is only used if the argument <code>iter</code> in <code>run.e0.mcmc</code> is set to ‘auto’ (see description of argument <code>iter</code> in <code>run.e0.mcmc</code>). The list contains the following elements:
</p>
  
<dl>
<dt>iter</dt>
<dd>
<p>gives the number of iterations in the first chunk of the MCMC simulation.</p>
</dd>
<dt>iter.incr</dt>
<dd>
<p>gives the number of iterations in the following chunks.</p>
</dd>
<dt>nr.chains</dt>
<dd>
<p>gives the number of chains in all chunks of the MCMC simulation.</p>
</dd>
<dt>thin, burnin</dt>
<dd>
<p>used in the convergence diagnostics following each chunk.</p>
</dd>
<dt>max.loops</dt>
<dd>
<p>controls the maximum number of chunks.</p>
</dd>
</dl>
</dd>
<dt>country.overwrites</dt>
<dd>
<p>This option allows to overwrite some of the prior parameters for specific countries. If it is not <code>NULL</code> it should be a data frame with an obligatory column ‘country_code’. Each row then corresponds to one country. Other columns can be ‘k.c.prior.low’, ‘k.c.prior.up’, ‘z.c.prior.low’, ‘z.c.prior.up’, ‘Triangle_<code class="reqn">x</code>.c.prior.low’ and ‘Triangle_<code class="reqn">x</code>.c.prior.up’ where <code class="reqn">x</code> can be an integer from 1 to 4.</p>
</dd>
</dl>
<h3>Note</h3>

<p>Parameter <code class="reqn">z</code> determines the asymptote in gains in life expectancy. The following text gives an explanation for the choice of  upper limits on <code class="reqn">z</code>-related parameters: 
</p>
<p>The pace of improvement and the asymptotic limit in future gains in female life expectancy vary for each projected trajectory, but ultimately is informed and constrained by the finding that the rate of increase of maximum female life expectancy over the past 150 year has been highly linear (2a, 2b) (i.e., about 2.4 years per decade), albeit at slightly lower pace once the leading countries started to exceed 75 years of female life expectancy at birth in the 1960s (3) (about 2.26 years of gains per decade). By assuming that the asymptotic average rate of increase in life expectancy is nonnegative, life expectancy is assumed to continually increase (on average), and no limit is imposed to life expectancy in the foreseeable future. The increase in maximum female life span among countries with highest life expectancy and reliable data on very old age provide further guidance on future rate of progress which has also been increasingly linear at least since the 1970s (4a-4c) (about 1.25 years per decade for countries like Sweden and Norway), and is used to inform the asymptotic average rate of increase in female life expectancy used in the 2012 WPP Revision. To set the posterior median to an annual gain of 0.125 year (or 5-year gain of 0.625 in this context) the upper bound value of 0.653 is used for the world prior (<code class="reqn">z</code>) and country-specific prior (<code class="reqn">z_c</code>) as default values in the estimation of the double-logistic parameters.
</p>


<h3>Author(s)</h3>

<p>Hana Sevcikova, Patrick Gerland contributed to the documentation.
</p>


<h3>References</h3>

<p>(1) J. L. Chunn, A. E. Raftery, P. Gerland, H. Sevcikova (2013): Bayesian Probabilistic Projections of Life Expectancy for All Countries. Demography 50(3):777-801. &lt;doi:10.1007/s13524-012-0193-x&gt;
</p>
<p>(2a)  Oeppen J, and J.W. Vaupel (2002) Broken limits to life expectancy. Science 296:1029-1031. 
</p>
<p>(2b) Vaupel, J.W. and K.G.V. Kistowski. 2005. Broken Limits to Life Expectancy. Ageing Horizons (3):6-13.
</p>
<p>(3) Vallin, J., and F. Mesle (2009). The Segmented Trend Line of Highest Life Expectancies. Population and Development Review, 35(1), 159-187. doi:10.1111/j.1728-4457.2009.00264.x
</p>
<p>(4a) Wilmoth, J. R., L. J. Deegan, H. Lundstrom, and S. Horiuchi (2000). Increase of maximum life-span in Sweden, 1861-1999. Science, 289(5488), 2366-2368. 
</p>
<p>(4b) Wilmoth, J. R. and J-M. Robine. (2003). The world trend in maximum life span, in: J. R. Carey and S. Tuljapurkar (eds.), Life Span: Evolutionary, Ecological, and Demographic Perspectives, supplement to vol. 29, Population and Development Review, pp. 239-257. 
</p>
<p>(4c) Wilmoth, J. R. and N. Ouellette (2012). Maximum human lifespan: Will the records be unbroken?, Paper presented at the European Population Conference, Stockholm, Sweden, 13-16 June.
</p>


<h3>See Also</h3>

<p><code>run.e0.mcmc</code>, <code>e0.predict</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">e0mcmc.options("z", "Triangle")
# Set new z$ini.up and Triangle$prior.up
# Modifying single elements of the z-list and Triangle-list.
# However, Triangle$prior.up is a vector and needs all four values.
e0mcmc.options(z = list(ini.up = 0.8), Triangle = list(prior.up = rep(120, 4)))
e0mcmc.options("z", "Triangle")

# revert to defaults
using.bayesLife()
e0mcmc.options("z", "Triangle")

# options for an annual simulation
e0mcmc.options("z", "sumTriangle.lim", annual = TRUE)

# modify using a different set from DLpriors
get.DLpriors(annual = TRUE) # view the DLpriors dataset
e0mcmc.dlpriors.options("C", annual = TRUE) # use C option
# upper bounds for z correspond to values from DLpriors divided by 5
e0mcmc.options("z", "sumTriangle.lim", annual = TRUE)
# set the UN's Triangle lower bound constraints 
e0mcmc.dlpriors.options(NULL, annual = TRUE, un.constraints = TRUE)
e0mcmc.options("Triangle", "Triangle.c", annual = TRUE) # prior.low is modified

</code></pre>


</div>