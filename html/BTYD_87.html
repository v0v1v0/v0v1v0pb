<div class="container">

<table style="width: 100%;"><tr>
<td>pnbd.PlotFreqVsConditionalExpectedFrequency</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Pareto/NBD Plot Frequency vs. Conditional Expected Frequency</h2>

<h3>Description</h3>

<p>Plots the actual and conditional expected number transactions made by
customers in the holdout period, binned according to calibration period
frequencies. Also returns a matrix with this comparison and the number of
customers in each bin.
</p>


<h3>Usage</h3>

<pre><code class="language-R">pnbd.PlotFreqVsConditionalExpectedFrequency(
  params,
  T.star,
  cal.cbs,
  x.star,
  censor,
  hardie = TRUE,
  xlab = "Calibration period transactions",
  ylab = "Holdout period transactions",
  xticklab = NULL,
  title = "Conditional Expectation"
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>params</code></td>
<td>
<p>Pareto/NBD parameters - a vector with r, alpha, s, and beta, in
that order. r and alpha are unobserved parameters for the NBD transaction
process. s and beta are unobserved parameters for the Pareto (exponential
gamma) dropout process.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>T.star</code></td>
<td>
<p>length of the holdout period. It must be a scalar for this
plot's purposes: you have one holdout period of a given length.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cal.cbs</code></td>
<td>
<p>calibration period CBS (customer by sufficient statistic). It
must contain columns for frequency ("x"), recency ("t.x"), and total time
observed ("T.cal"). Note that recency must be the time between the start of
the calibration period and the customer's last transaction, not the time
between the customer's last transaction and the end of the calibration
period.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>x.star</code></td>
<td>
<p>vector of transactions made by each customer in the holdout
period.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>censor</code></td>
<td>
<p>integer used to censor the data. See details.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>hardie</code></td>
<td>
<p>if TRUE, have
<code>pnbd.ConditionalExpectedTransactions</code> use <code>h2f1</code>
instead of <code>hypergeo</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>xlab</code></td>
<td>
<p>descriptive label for the x axis.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ylab</code></td>
<td>
<p>descriptive label for the y axis.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>xticklab</code></td>
<td>
<p>vector containing a label for each tick mark on the x axis.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>title</code></td>
<td>
<p>title placed on the top-center of the plot.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>This function requires a censor number, which cannot be higher than the
highest frequency in the calibration period CBS. The output matrix will have
(censor + 1) bins, starting at frequencies of 0 transactions and ending at a
bin representing calibration period frequencies at or greater than the censor
number.
</p>


<h3>Value</h3>

<p>Holdout period transaction frequency comparison matrix (actual vs. expected).
</p>


<h3>Examples</h3>

<pre><code class="language-R">data(cdnowSummary)

cal.cbs &lt;- cdnowSummary$cbs
# cal.cbs already has column names required by method

# number of transactions by each customer in the 39 weeks
# following the calibration period
x.star &lt;- cal.cbs[,"x.star"]

# parameters estimated using pnbd.EstimateParameters
est.params &lt;- cdnowSummary$est.params
# the maximum censor number that can be used
max(cal.cbs[,"x"])

# plot conditional expected holdout period frequencies,
# binned according to calibration period frequencies
pnbd.PlotFreqVsConditionalExpectedFrequency(params = est.params, 
                                            T.star = 39, 
                                            cal.cbs = cal.cbs, 
                                            x.star = x.star, 
                                            censor = 7, 
                                            hardie = TRUE)
</code></pre>


</div>