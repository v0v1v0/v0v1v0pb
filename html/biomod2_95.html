<div class="container">

<table style="width: 100%;"><tr>
<td>bm_PlotRangeSize</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Plot species range change</h2>

<h3>Description</h3>

<p>This function represents species range change from object that can be obtained 
from <code>BIOMOD_RangeSize</code> function. Several graphics can be obtained, representing 
global counts or proportions of gains / losses, as well as spatial representations (see Details).
</p>


<h3>Usage</h3>

<pre><code class="language-R">bm_PlotRangeSize(
  bm.range,
  do.count = TRUE,
  do.perc = TRUE,
  do.maps = TRUE,
  do.mean = TRUE,
  do.plot = TRUE,
  row.names = c("Species", "Dataset", "Run", "Algo")
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>bm.range</code></td>
<td>
<p>an object returned by the <code>BIOMOD_RangeSize</code> function</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>do.count</code></td>
<td>
<p>(<em>optional, default</em> <code>TRUE</code>) <br> 
A <code>logical</code> value defining whether the count plot is to be computed or not</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>do.perc</code></td>
<td>
<p>(<em>optional, default</em> <code>TRUE</code>) <br> 
A <code>logical</code> value defining whether the percentage plot is to be computed or not</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>do.maps</code></td>
<td>
<p>(<em>optional, default</em> <code>TRUE</code>) <br> 
A <code>logical</code> value defining whether the maps plot is to be computed or not</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>do.mean</code></td>
<td>
<p>(<em>optional, default</em> <code>TRUE</code>) <br> 
A <code>logical</code> value defining whether the mean maps plot is to be computed or not</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>do.plot</code></td>
<td>
<p>(<em>optional, default</em> <code>TRUE</code>) <br> 
A <code>logical</code> value defining whether the plots are to be rendered or not</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>row.names</code></td>
<td>
<p>(<em>optional, default</em> <code>c('Species', 'Dataset', 'Run', 'Algo')</code>) <br> 
A <code>vector</code> containing tags matching <code>bm.range$Compt.By.Models</code> rownames splitted by 
'_' character</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>4 plots can be obtained with this function :
</p>

<dl>
<dt>Count barplot</dt>
<dd>
<p>representing absolute number of locations (pixels) lost, stable and 
gained</p>
</dd>
<dt>Percentage barplot</dt>
<dd>
<p>representing percentage of locations (pixels) lost, stable, and 
the corresponding Species Range Change (<code>PercGain - PercLoss</code>)</p>
</dd>
<dt>SRC models maps</dt>
<dd>
<p>representing spatially locations (pixels) lost, stable and 
gained for each single distribution model</p>
</dd>
<dt>SRC community averaging maps</dt>
<dd>
<p>representing spatially locations (pixels) lost, stable 
and gained, taking the majoritary value across single distribution models (and representing 
the percentage of models' agreement)</p>
</dd>
</dl>
<p><em>Please see <code>BIOMOD_RangeSize</code> function for more details about the values.</em>
</p>


<h3>Value</h3>

<p>A <code>list</code> containing one or several <code>data.frame</code> and the corresponding 
<code>ggplot</code> object representing species range change.
</p>


<h3>Author(s)</h3>

<p>Maya Gueguen
</p>


<h3>See Also</h3>

<p><code>BIOMOD_RangeSize</code>
</p>
<p>Other Secundary functions: 
<code>bm_BinaryTransformation()</code>,
<code>bm_CrossValidation()</code>,
<code>bm_FindOptimStat()</code>,
<code>bm_MakeFormula()</code>,
<code>bm_ModelingOptions()</code>,
<code>bm_PlotEvalBoxplot()</code>,
<code>bm_PlotEvalMean()</code>,
<code>bm_PlotResponseCurves()</code>,
<code>bm_PlotVarImpBoxplot()</code>,
<code>bm_PseudoAbsences()</code>,
<code>bm_RunModelsLoop()</code>,
<code>bm_SRE()</code>,
<code>bm_SampleBinaryVector()</code>,
<code>bm_SampleFactorLevels()</code>,
<code>bm_Tuning()</code>,
<code>bm_VariablesImportance()</code>
</p>
<p>Other Plot functions: 
<code>bm_PlotEvalBoxplot()</code>,
<code>bm_PlotEvalMean()</code>,
<code>bm_PlotResponseCurves()</code>,
<code>bm_PlotVarImpBoxplot()</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">library(terra)

# Load species occurrences (6 species available)
data(DataSpecies)
head(DataSpecies)

# Select the name of the studied species
myRespName &lt;- 'GuloGulo'

# Get corresponding presence/absence data
myResp &lt;- as.numeric(DataSpecies[, myRespName])

# Get corresponding XY coordinates
myRespXY &lt;- DataSpecies[, c('X_WGS84', 'Y_WGS84')]

# Load environmental variables extracted from BIOCLIM (bio_3, bio_4, bio_7, bio_11 &amp; bio_12)
data(bioclim_current)
myExpl &lt;- terra::rast(bioclim_current)



# ---------------------------------------------------------------#
file.out &lt;- paste0(myRespName, "/", myRespName, ".AllModels.models.out")
if (file.exists(file.out)) {
  myBiomodModelOut &lt;- get(load(file.out))
} else {

  # Format Data with true absences
  myBiomodData &lt;- BIOMOD_FormatingData(resp.var = myResp,
                                       expl.var = myExpl, 
                                       resp.xy = myRespXY,
                                       resp.name = myRespName)

  # Model single models
  myBiomodModelOut &lt;- BIOMOD_Modeling(bm.format = myBiomodData,
                                      modeling.id = 'AllModels',
                                      models = c('RF', 'GLM'),
                                      CV.strategy = 'random',
                                      CV.nb.rep = 2,
                                      CV.perc = 0.8,
                                      OPT.strategy = 'bigboss',
                                      metric.eval = c('TSS','ROC'),
                                      var.import = 3,
                                      seed.val = 42)
}

models.proj &lt;- get_built_models(myBiomodModelOut, algo = "RF")
  # Project single models
  myBiomodProj &lt;- BIOMOD_Projection(bm.mod = myBiomodModelOut,
                                    proj.name = 'CurrentRangeSize',
                                    new.env = myExpl,
                                    models.chosen = models.proj,
                                    metric.binary = 'all')



# ---------------------------------------------------------------#
# Load environmental variables extracted from BIOCLIM (bio_3, bio_4, bio_7, bio_11 &amp; bio_12)
data(bioclim_future)
myExplFuture &lt;- terra::rast(bioclim_future)


# Project onto future conditions
myBiomodProjectionFuture &lt;- BIOMOD_Projection(bm.mod = myBiomodModelOut,
                                              proj.name = 'FutureRangeSize',
                                              new.env = myExplFuture,
                                              models.chosen = models.proj,
                                              metric.binary = 'TSS')

# Load current and future binary projections
CurrentProj &lt;- get_predictions(myBiomodProj,
                               metric.binary = "TSS",
                               model.as.col = TRUE)
FutureProj &lt;- get_predictions(myBiomodProjectionFuture,
                               metric.binary = "TSS",
                               model.as.col = TRUE)

# Compute differences
myBiomodRangeSize &lt;- BIOMOD_RangeSize(proj.current = CurrentProj, proj.future = FutureProj)


# ---------------------------------------------------------------#
myBiomodRangeSize$Compt.By.Models
plot(myBiomodRangeSize$Diff.By.Pixel)

# Represent main results 
bm_PlotRangeSize(bm.range = myBiomodRangeSize)


</code></pre>


</div>