<div class="container">

<table style="width: 100%;"><tr>
<td>robustify</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>
Robustify a model
</h2>

<h3>Description</h3>

<p>Create a robustified object that includes robust or clustered robust
standard errors.
</p>


<h3>Usage</h3>

<pre><code class="language-R">robustify(x, cluster, type, omega, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>

<p>A model of class <code>lm</code>, <code>glm</code>, or any other class which
contains a <code>call</code> object and methods for <code>estfun</code> and <code>nobs</code>.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cluster</code></td>
<td>

<p>The variable on which to cluster (if any). If this is not specified,
unclustered robust standard errors using <code>vcovHC</code> are
used. If this is specified, clustered robust standard errors using
<code>vcovCR</code> are used.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>type</code></td>
<td>

<p>A character string specifying the estimation type. The default for
linear models of class <code>lm</code> but not <code>glm</code> is to use
"HC1" for <code>vcovHC</code> or "CR1" for
<code>vcovCR</code>, depending on whether <code>cluster</code> is
specified. For other models, the default is to use "HC" for
<code>vcovHC</code> or "CR" for <code>vcovCR</code>,
depending on whether <code>cluster</code> is specified. This mirrors the
defaults used by Stata as closely as possible.
For details, see <code>vcovHC</code> or <code>vcovCR</code>.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>omega</code></td>
<td>

<p>A vector or a function depending on the arguments ‘residuals’
(the working residuals of the model), ‘diaghat’ (the diagonal
of the corresponding hat matrix) and ‘df’ (the residual
degrees of freedom). For details, see <code>vcovHC</code> or <code>vcovCR</code>.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>

<p>Any additional arguments to be passed to <code>coeftest</code>.
</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>This function creates a <code>robustified</code> object containing the
model, coefficients, and variance-covariance matrix based on
<code>vcovHC</code> or <code>vcovCR</code>, respectively. If the <code>cluster</code>
option is specified, the variance-covariance matrix is computed using
<code>vcovCR</code> with clustering on <code>cluster</code>. If not, the
variance-covariance matrix is computed using
<code>vcovHC</code>. For generating formatted tables of
regression coefficients, the outputted objects should be
compatible with the 'texreg' package. When used with <code>lm</code>,
<code>glm</code> or a few other types of models, these objects are also
compatible with the 'stargazer' package.
</p>


<h3>Value</h3>

<p>An object of class <code>robustified</code> with the <code>method</code>
attribute specifying the type of standard errors used.
</p>


<h3>References</h3>

<p>Cameron, A. Colin, and Douglas L. Miller.
“A Practitioner's Guide to Cluster-Robust Inference.”
<em>Journal of Human Resources</em> 50, no. 2 (Spring 2015): 317-372.
doi: <a href="https://doi.org/10.3368/jhr.50.2.317">10.3368/jhr.50.2.317</a>
</p>


<h3>See Also</h3>

<p>See Also <code>summary.robustified</code>, <code>vcovHC</code>, <code>vcovCR</code> and <code>coeftest</code>.
</p>


<h3>Examples</h3>

<pre><code class="language-R">## With clustering
clotting &lt;- data.frame(
    cl = 1:9,
    u = c(5,10,15,20,30,40,60,80,100),
    lot = c(118,58,42,35,27,25,21,19,18,
            69,35,26,21,18,16,13,12,12))
clot.model &lt;- glm(lot ~ log(u), data = clotting, family = Gamma)
robust.clot.model &lt;- robustify(clot.model, cluster=cl)
robust.clot.model
summary(robust.clot.model)

## Without clustering
data(swiss)
model1 &lt;- robustify(lm(Fertility ~ ., data = swiss))
model1
summary(model1)
</code></pre>


</div>