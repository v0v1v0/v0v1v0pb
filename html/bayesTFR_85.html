<div class="container">

<table style="width: 100%;"><tr>
<td>get.regtfr.prediction</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>
Accessing Subnational Prediction Objects
</h2>

<h3>Description</h3>

<p>Retrieve subnational (regional) prediction results produced by <code>tfr.predict.subnat</code>, either for one country or for all available countries.
</p>


<h3>Usage</h3>

<pre><code class="language-R">get.regtfr.prediction(sim.dir, country = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>sim.dir</code></td>
<td>
<p>Simulation directory of the subnational predictions. It corresponds to the argument <code>output.dir</code> in <code>tfr.predict.subnat</code>.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>country</code></td>
<td>
<p>Numerical country code. If it is not given, all available subnational predictions are retrieved.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>Predictions for country <code class="reqn">x</code> are assumed to be stored in “<code>sim.dir</code>/subnat/c<code class="reqn">x</code>”.
</p>


<h3>Value</h3>

<p>If argument <code>country</code> is given, the function returns an object of class <code>bayesTFR.prediction</code>. If it is <code>NULL</code>, it returns a list of such objects. Names of the list items are the country codes.
</p>


<h3>See Also</h3>

<p><code>tfr.predict.subnat</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R"># Subnational example data
my.subtfr.file &lt;- file.path(find.package("bayesTFR"), 'extdata', 'subnational_tfr_template.txt')
subtfr &lt;- read.delim(my.subtfr.file, check.names=FALSE, stringsAsFactor=FALSE)
countries &lt;- unique(subtfr[, c("country_code", "country")])

# Directory with national projections (contains 30 trajectories for each country)
nat.dir &lt;- file.path(find.package("bayesTFR"), "ex-data", "bayesTFR.output")

# Subnational projections for all three countries ()
subnat.dir &lt;- tempfile()
tfr.predict.subnat(countries$country_code, my.tfr.file=my.subtfr.file,
    sim.dir=nat.dir, output.dir=subnat.dir, start.year=2013)
    
# Retrieve results for all countries
preds &lt;- get.regtfr.prediction(subnat.dir)
names(preds)

# View tables of subregions for each country
for(i in 1:nrow(countries)) {
  cat("\n\n", countries$country[i], "\n")
  print(get.countries.table(preds[[as.character(countries$country_code[i])]]))
}
# Quantiles for individual subregions
tfr.trajectories.table(preds[["218"]], "Bolivar")

# Retrieve results for one country
pred &lt;- get.regtfr.prediction(subnat.dir, 218)
tfr.trajectories.plot(pred, "Loja")

# cleanup
unlink(subnat.dir)

# See more examples in ?tfr.predict.subnat
</code></pre>


</div>