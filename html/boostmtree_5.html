<div class="container">

<table style="width: 100%;"><tr>
<td>marginalPlot</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Marginal plot analysis</h2>

<h3>Description</h3>

<p>Marginal plot of x against the unadjusted predicted y. This is mainly used to obtain
marginal relationships between x and the unadjusted predicted
y. Marginal plots have a faster
execution compared to partial plots (Friedman, 2001).
</p>


<h3>Usage</h3>

<pre><code class="language-R">marginalPlot(object,
             xvar.names,
             tm.unq,
             subset,
             plot.it = FALSE,
             path_saveplot = NULL,
             Verbose = TRUE,
             ...)</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>object</code></td>
<td>
<p>A boosting object of class <code>(boostmtree, grow)</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>xvar.names</code></td>
<td>
<p>Names of the x-variables to be used.  By default,
all variables are plotted.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>tm.unq</code></td>
<td>
<p>Unique time points used for the plots of x against y.  By default,
the deciles of the observed time values are used.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>subset</code></td>
<td>
<p>Vector indicating which rows of the x-data to be used for the
analysis.  The default is to use the entire data.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>plot.it</code></td>
<td>
<p>Should plots be displayed? If <code>xvar.names</code> is a vector with more than
one variable name, then instead of displaying, plot is stored as "MarginalPlot.pdf" in the location specified
by <code>path_saveplot</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>path_saveplot</code></td>
<td>
<p>Provide the location where plot should be saved. By default the plot will be saved at temporary folder.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>Verbose</code></td>
<td>
<p>Display the path where the plot is saved?</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Further arguments passed to or from other methods.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>Marginal plot of x values specified by
<code>xvar.names</code> against the unadjusted predicted y-values over a set
of time points specified by <code>tm.unq</code>.  Analysis can be restricted to
a subset of the data using <code>subset</code>.
</p>


<h3>Author(s)</h3>

<p>Hemant Ishwaran, Amol Pande and Udaya B. Kogalur
</p>


<h3>References</h3>

<p>Friedman J.H. Greedy function approximation: a gradient
boosting machine, <em>Ann. of Statist.</em>, 5:1189-1232, 2001.
</p>


<h3>Examples</h3>

<pre><code class="language-R">## Not run: 
##------------------------------------------------------------
## Synthetic example (Response is continuous)
## High correlation, quadratic time with quadratic interaction
##-------------------------------------------------------------
#simulate the data
dta &lt;- simLong(n = 50, N = 5, rho =.80, model = 2,family = "Continuous")$dtaL

#basic boosting call
boost.grow &lt;- boostmtree(dta$features, dta$time, dta$id, dta$y, family = "Continuous", M = 300)

#plot results
#x1 has a linear main effect
#x2 is quadratic with quadratic time trend
marginalPlot(boost.grow, "x1",plot.it = TRUE)
marginalPlot(boost.grow, "x2",plot.it = TRUE)

#Plot of all covariates. The plot will be stored as the "MarginalPlot.pdf"
# in the current working directory.
marginalPlot(boost.grow,plot.it = TRUE)


##------------------------------------------------------------
## Synthetic example (Response is binary)
## High correlation, quadratic time with quadratic interaction
##-------------------------------------------------------------
#simulate the data
dta &lt;- simLong(n = 50, N = 5, rho =.80, model = 2,family = "Binary")$dtaL

#basic boosting call
boost.grow &lt;- boostmtree(dta$features, dta$time, dta$id, dta$y, family = "Binary", M = 300)

#plot results
#x1 has a linear main effect
#x2 is quadratic with quadratic time trend
marginalPlot(boost.grow, "x1",plot.it = TRUE)
marginalPlot(boost.grow, "x2",plot.it = TRUE)

#Plot of all covariates. The plot will be stored as the "MarginalPlot.pdf"
# in the current working directory.
marginalPlot(boost.grow,plot.it = TRUE)

##----------------------------------------------------------------------------
## spirometry data
##----------------------------------------------------------------------------
data(spirometry, package = "boostmtree")

#boosting call: cubic B-splines with 15 knots
spr.obj &lt;- boostmtree(spirometry$features, spirometry$time, spirometry$id, spirometry$y,
            family = "Continuous",M = 300, nu = .025, nknots = 15)

#marginal plot of double-lung group at 5 years
dltx &lt;- marginalPlot(spr.obj, "AGE", tm.unq = 5, subset = spr.obj$x$DOUBLE==1,plot.it = TRUE)

#marginal plot of single-lung group at 5 years
sltx &lt;- marginalPlot(spr.obj, "AGE", tm.unq = 5, subset = spr.obj$x$DOUBLE==0,plot.it = TRUE)

#combine the two plots
dltx &lt;- dltx[[2]][[1]]
sltx &lt;- sltx[[2]][[1]]
plot(range(c(dltx[[1]][, 1], sltx[[1]][, 1])), range(c(dltx[[1]][, -1], sltx[[1]][, -1])),
     xlab = "age", ylab = "predicted y", type = "n")
lines(dltx[[1]][, 1][order(dltx[[1]][, 1]) ], dltx[[1]][, -1][order(dltx[[1]][, 1]) ], 
      lty = 1, lwd = 2, col = "red")
lines(sltx[[1]][, 1][order(sltx[[1]][, 1]) ], sltx[[1]][, -1][order(sltx[[1]][, 1]) ], 
      lty = 1, lwd = 2, col = "blue")
legend("topright", legend = c("DLTx", "SLTx"), lty = 1, fill = c(2,4))

## End(Not run)
</code></pre>


</div>