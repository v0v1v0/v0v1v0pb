<div class="container">

<table style="width: 100%;"><tr>
<td>Matrix utilities</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Matrix/array utility functions</h2>

<h3>Description</h3>

<p>These functions are utility/helper functions when working with matrices or
arrays.
</p>
<p><code>diag_sq</code> is a pared-down version of <code>diag</code> for square
matrices. It does not return any dimnames, does not check if <code>x</code> is a
square matrix, and it cannot be used to <em>create</em> a matrix with a given
value along the diagonal. Meant to be used in code that is called repeatedly
(thousands of times).
</p>
<p><code>get_thresholds</code> calculates the threshold values that would result in a
specific graph density. These depend, necessarily on the values in the matrix
themselves.
</p>
<p><code>qr.array</code> will calculate the QR decomposition for each matrix in a 3D
array.
</p>
<p><code>qr_Q2</code> and <code>qr_R2</code> are simplified versions of <code>qr.Q</code>
and <code>qr.R</code>.
</p>
<p><code>symm_mean</code> returns a symmetric matrix in which the off-diagonal
elements <code class="reqn">A[i, j]</code> and <code class="reqn">A[j, i]</code> are set to the mean of the values
in the input matrix.
</p>
<p><code>symmetrize</code> will symmetrize a numeric matrix (or each matrix in an
array) by assigning to the off-diagonal elements either the <code>max</code>
(default), <code>min</code>, or <code>average</code> of <code class="reqn">\{A(i, j), A(j, i)\}</code>.
</p>


<h3>Usage</h3>

<pre><code class="language-R">colMax(x, n = dim(x)[1L])

colMaxAbs(x, n = dim(x)[1L])

colMin(x, n = dim(x)[1L])

diag_sq(x, n = dim(x)[1L], inds = 1L + 0L:(n - 1L) * (n + 1L))

get_thresholds(x, densities, emax = dim(x)[1L] * (dim(x)[1L] - 1L)/2,
  ...)

is_binary(x)

## S3 method for class 'array'
qr(x, ...)

qr_Q2(QR, y = diag(1, n, p), n = dim(QR$qr)[1L], p = QR$rank)

qr_R2(QR, p = QR$rank)

symm_mean(x)

symmetrize(x, ...)

## S3 method for class 'matrix'
symmetrize(x, symm.by = c("max", "min", "avg"), ...)

## S3 method for class 'array'
symmetrize(x, symm.by = c("max", "min", "avg"), ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>Numeric matrix or array (the latter, for <code>qr.array</code> and
<code>symmetrize.array</code>)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>n, p</code></td>
<td>
<p>Integer; the number of rows or rank (respectively) of
the input matrix or QR decomposition</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>inds</code></td>
<td>
<p>Vector-based indices of the diagonal</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>densities</code></td>
<td>
<p>Numeric vector of densities</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>emax</code></td>
<td>
<p>Integer; the maximum number of edges</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Arguments passed to either <code>sort</code> (for
<code>get_thresholds</code>) or <code>qr.default</code> (for <code>qr.array</code>).
For the former, this will typically only be <code>decreasing=TRUE</code>, if that
is the desired behavior</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>QR</code></td>
<td>
<p>A <code>qr</code> object</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>y</code></td>
<td>
<p>A numeric matrix with <code>1</code> along the diagonal, of the same size
as the input matrix (i.e., <code>QR$qr</code>)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>symm.by</code></td>
<td>
<p>Character string; how to create symmetric off-diagonal
elements. Default: <code>max</code></p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>Given a vector of densities, <code>get_thresholds</code> returns the numeric values
that will result in graphs of the given densities after thresholding by those
values. In the <em>Examples</em> section, the thresholds should result in
graphs with densities of <code class="reqn">5, 15, \dots, 55</code> percent.
</p>


<h3>Value</h3>

<p><code>diag_sq</code> returns an unnamed numeric vector with the values
along the diagonal of the input matrix
</p>
<p><code>get_thresholds</code> returns a numeric vector of the thresholds
</p>
<p><code>is_binary</code> returns a logical of length 1
</p>
<p><code>qr.array</code> returns a <em>list</em> in which each element is the QR
decomposition of each matrix along <code>x</code>'s 3rd dimension
</p>


<h3>Examples</h3>

<pre><code class="language-R">x &lt;- matrix(runif(25 * 25), 25, 25)
x &lt;- symmetrize(x)
diag(x) &lt;- 0
densities &lt;- seq(0.05, 0.55, by=0.1)
threshes &lt;- get_thresholds(x, densities)
## Verify that the densities are correct
graphs &lt;- lapply(threshes, function(th) {
  graph_from_adjacency_matrix(x * (x &gt; th), mode='undirected',
                              diag=FALSE, weighted=TRUE)
  })
sapply(graphs, graph.density)
</code></pre>


</div>