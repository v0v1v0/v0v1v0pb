<div class="container">

<table style="width: 100%;"><tr>
<td>download</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Write the results of a query locally to a comma-separated file.</h2>

<h3>Description</h3>

<p>Write the results of a query locally to a comma-separated file.
</p>


<h3>Usage</h3>

<pre><code class="language-R">download(
  query = NULL,
  table = NULL,
  path,
  billing_project_id = get_billing_id(),
  .na = " "
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>query</code></td>
<td>
<p>a string containing a valid SQL query.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>table</code></td>
<td>
<p>defaults to <code>NULL</code>. If a table name is provided then it'll be concatenated with "basedosdados." and the whole table will be returned.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>path</code></td>
<td>
<p>String with the output file's name. If running an R Project relative location can be provided. Passed to <code>readr::write_csv</code>'s <code>file</code> argument.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>billing_project_id</code></td>
<td>
<p>a string containing your billing project id. If you've run <code>set_billing_id</code> then feel free to leave this empty.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>.na</code></td>
<td>
<p>how should missing values be written in the resulting file? Value passed to <code>na</code> argument of <code>readr::write_csv</code>. Defaults to a whitespace.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>Currently there's only support for UTF-8 encoding. Users requiring more control over writing should use <code>read_sql</code> to get the data in memory and custom code from there.
</p>


<h3>Value</h3>

<p>Invisibly returns the query's output in a tibble. Intended to be used for side-effects. If you simply want to load a query's result in memory, use <code>read_sql</code>.
</p>


<h3>Examples</h3>

<pre><code class="language-R">
## Not run: 

path &lt;- file.path(tempdir(), "pib_per_capita.csv")

bare_query &lt;- "SELECT *
FROM basedosdados.br_tse_eleicoes.bens_candidato
WHERE ano = 2020
AND sigla_uf = \'TO\'"

download(query = bare_query, path = path)

# or download the entire table
download(table = "br_tse_eleicoes.bens_candidato", path = path)


## End(Not run)


</code></pre>


</div>