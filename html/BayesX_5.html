<div class="container">

<table style="width: 100%;"><tr>
<td>Interface between sp and bnd format</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Convert sp and bnd format into each other</h2>

<h3>Description</h3>

<p>Convert geographical information objects of class "SpatialPolygons" (or
specializations) from R-package sp to objects of class "bnd" from
R-package BayesX and vice versa.
</p>


<h3>Usage</h3>

<pre><code class="language-R">sp2bnd(spObject, regionNames, height2width, epsilon)
bnd2sp(bndObject)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>spObject</code></td>
<td>
<p>object of class "SpatialPolygons" (or
specializations)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>regionNames</code></td>
<td>
<p>character vector of region names (parallel to the
Polygons list in spObject), defaults to the IDs</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>height2width</code></td>
<td>
<p>ratio of total height to width, defaults to the
bounding box values</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>epsilon</code></td>
<td>
<p>how much can two polygons differ (in maximum squared
Euclidean distance) and still match each other?, defaults to machine
precision</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>bndObject</code></td>
<td>
<p>object of class "bnd"</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>Equivalent object in the other format.  
</p>


<h3>Author(s)</h3>

<p>Daniel Sabanes Bove</p>


<h3>See Also</h3>

<p><code>nb2gra</code>, <code>gra2nb</code> for conversion
between the neighborhood structure formats and
<code>read.bnd</code>, <code>write.bnd</code> for the interface to
the BayesX files.</p>


<h3>Examples</h3>

<pre><code class="language-R">## Not run: ## bnd to sp:
germany &lt;- read.bnd(system.file("examples/germany2001.bnd", package="BayesX"))
spGermany &lt;- bnd2sp(germany)

## plot the result together with the neighborhood graph
library(sp)
plot(spGermany)
library(spdep)
nbGermany &lt;- poly2nb(spGermany)
plot(nbGermany, coords=coordinates(spGermany), add=TRUE)

## example with one region inside another
spExample &lt;- spGermany[c("7211", "7235"), ]
plot(spExample)
plot(poly2nb(spExample), coords=coordinates(spExample), add=TRUE)

## now back from sp to bnd:
bndGermany &lt;- sp2bnd(spGermany)
drawmap(map=bndGermany)

## compare names and number of polygons
stopifnot(identical(names(bndGermany),
                    names(germany)),
          identical(length(bndGermany),
                    length(germany)))

## compare contains-relations
surrounding &lt;- attr(bndGermany, "surrounding")
whichInner &lt;- which(sapply(surrounding, length) &gt; 0L)
bndContainsData &lt;- data.frame(inner=names(bndGermany)[whichInner],
                              outer=unlist(surrounding))

surrounding &lt;- attr(germany, "surrounding")
whichInner &lt;- which(sapply(surrounding, length) &gt; 0L)
originalContainsData &lt;- data.frame(inner=names(germany)[whichInner],
                                   outer=unlist(surrounding))

stopifnot(all(bndContainsData[order(bndContainsData$inner), ] ==
              originalContainsData[order(originalContainsData$inner), ]))

## End(Not run)</code></pre>


</div>