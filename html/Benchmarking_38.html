<div class="container">

<table style="width: 100%;"><tr>
<td>make.merge</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2> Make an aggregation matrix to perform mergers </h2>

<h3>Description</h3>

<p> Make an aggregation matrix to perform mergers of
firms. The matrix can be post multiplied (matrix multiplication) to
input and output matrices to make merged input and output matrices.
</p>


<h3>Usage</h3>

<pre><code class="language-R">make.merge(grp, nFirm = NULL, X = NULL, names = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>grp</code></td>
<td>
<p> Either a list of length Kg for Kg firms after mergers;
each component of the list is a (named) list with the firm numbers or
names going into this merger.
</p>
<p>Or a factor of length K with Kg levels where each level
determines a merger; to exclude firms for mergers set the
factor value to NA. </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>nFirm</code></td>
<td>
<p> Number of firms before the mergers </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>X</code></td>
<td>
<p>A matrix of inputs or outputs where the rows corresponds to
the number of original (starting) firms </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>names</code></td>
<td>
<p>A list with names of all firms, only needed if the
mergers are given as a list of names, i.e. <code>grp</code> is a list
of names.</p>
</td>
</tr>
</table>
<h3>Details</h3>

 
<p>Either <code>nFirm</code> or <code>X</code> must be present; if both are present
then <code>nFirm</code> must be equal to the number of rows in <code>X</code>, the
number of firms.
</p>
<p>When <code>X</code> is an input matrix of dimension <code>K x m</code>, <code>K</code>
firms and <code>m</code> inputs, and <code>M &lt;- make.merge(gr,K)</code> then
<code>M %*% X</code> is the input matrix for the merged firms.
</p>


<h3>Value</h3>

<p> Returns an aggregation matrix of dimension Kg times K where
rows corresponds to new merged firms and columns are 1 for firms to be
included and 0 for firms to be excluded in the given merger as
defined by the row. </p>


<h3>Note</h3>

<p> The argument <code>TRANSPOSE</code> has not been implemented for this
function. If you need transposed matrices you must transpose the
merger matrix yourself. If you define mergers via factors there is no
need to transpose in the arguments; just do not use <code>X</code> in the
arguments.  </p>


<h3>Author(s)</h3>

<p> Peter Bogetoft and Lars Otto <a href="mailto:larsot23@gmail.com">larsot23@gmail.com</a></p>


<h3>See Also</h3>

 <p><code>dea.merge</code> </p>


<h3>Examples</h3>

<pre><code class="language-R"># To merge firms 1,3, and 5; and 2 and 4 of 7 firms into 2 new firms
# the aggregation matrix is M; not all firms are involved in a merger.
M &lt;- make.merge(list(c(1,3,5), c(2,4)),7)
print(M)

# Merge 1 and 2, and 4 and 5, and leave 3 alone, total of 5 firms.
# Using a list
M1 &lt;- make.merge(list(c(1,2), c(4,5)), nFirm=5)
print(M1)

# Using a factor
fgr &lt;- factor(c("en","en",NA,"to","to"))
M2 &lt;- make.merge(fgr)
print(M2)

# Name of mergers
M3 &lt;- make.merge(list(AB=c("A","B"), DE=c("D","E")), names=LETTERS[1:5])
print(M3)

# No name of mergers
M4 &lt;- make.merge(list(c("A","B"), c("D","E")), names=LETTERS[1:5])
print(M4)
</code></pre>


</div>