<div class="container">

<table style="width: 100%;"><tr>
<td>plotFlagSummary</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Generate a plot summarising flagged data</h2>

<h3>Description</h3>

<p>Creates a compound bar plot that shows the proportion of records that pass or fail each flag (rows)
and for each data source (columns). The function can also optionally return a point map for
a user-specified species when plotMap = TRUE. This function requires that your dataset has been
run through some filtering functions - so that is can display logical columns starting with
".".
</p>


<h3>Usage</h3>

<pre><code class="language-R">plotFlagSummary(
  data = NULL,
  flagColours = c("#127852", "#A7002D", "#BDBABB"),
  fileName = NULL,
  outPath = OutPath_Figures,
  width = 15,
  height = 9,
  units = "in",
  dpi = 300,
  bg = "white",
  device = "pdf",
  speciesName = NULL,
  saveFiltered = FALSE,
  filterColumn = ".summary",
  nameColumn = NULL,
  plotMap = FALSE,
  mapAlpha = 0.5,
  xbuffer = c(0, 0),
  ybuffer = c(0, 0),
  ptSize = 1,
  saveTable = FALSE,
  jitterValue = NULL,
  returnPlot = FALSE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>data</code></td>
<td>
<p>A data frame or tibble. Occurrence records as input.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>flagColours</code></td>
<td>
<p>A character vector. Colours in order of pass (TRUE), fail (FALSE), and NA.
Default = c("#127852", "#A7002D", "#BDBABB").</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>fileName</code></td>
<td>
<p>Character. The name of the file to be saved, ending in ".pdf".
If saving as a different file type, change file type suffix - See <code>device</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>outPath</code></td>
<td>
<p>A character path. The path to the directory in which the figure will be saved.
Default = OutPath_Figures.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>width</code></td>
<td>
<p>Numeric. The width of the output figure in user-defined units Default = 15.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>height</code></td>
<td>
<p>Numeric. The height of the output figure in user-defined units Default = 9.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>units</code></td>
<td>
<p>Character. The units for the figure width and height passed to <code>ggplot2::ggsave()</code>
("in", "cm", "mm", or "px"). Default = "in".</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>dpi</code></td>
<td>
<p>Numeric. Passed to <code>ggplot2::ggsave()</code>. Plot resolution. Also accepts a string input: "retina" (320), "print" (300), or
"screen" (72). Applies only to raster output types. Default = 300.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>bg</code></td>
<td>
<p>Character. Passed to <code>ggplot2::ggsave()</code>. Background colour. If NULL, uses the plot.background fill value from the plot theme.
Default = "white."</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>device</code></td>
<td>
<p>Character. Passed to <code>ggplot2::ggsave()</code>. Device to use. Can either be a device function (e.g. png), or one of "eps", "ps", "tex" (pictex), "pdf", "jpeg", "tiff", "png", "bmp", "svg" or "wmf" (windows only).
Default = "pdf". If not using default, change file name suffix in fileName argument.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>speciesName</code></td>
<td>
<p>Optional. Character. A species name, as it occurs in the user-input nameColumn.
If provided, the data will be filtered to this species for the plot.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>saveFiltered</code></td>
<td>
<p>Optional. Logical. If TRUE, the filtered data will be saved to the computer
as a .csv file.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>filterColumn</code></td>
<td>
<p>Optional. The flag column to display on the map. Default = .summary.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>nameColumn</code></td>
<td>
<p>Optional. Character. If speciesName is not NULL, enter the column to look
for the species in. A User might realise that, combined with speciesName, figures can be made for
a variety of factors.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>plotMap</code></td>
<td>
<p>Logical. If TRUE, the function will produce a point map. Tested for use with one
species at a time; i.e., with speciesName is not NULL.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>mapAlpha</code></td>
<td>
<p>Optional. Numeric. The opacity for the points on the map.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>xbuffer</code></td>
<td>
<p>Optional. Numeric vector. A buffer in degrees of the amount to increase the
min and max bounds along the
x-axis. This may require some experimentation, keeping in mind
the negative and positive directionality of hemispheres. Default = c(0,0).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ybuffer</code></td>
<td>
<p>Optional. Numeric vector. A buffer in degrees of the amount to increase the
min and max bounds along the y-axis. This may require some experimentation, keeping in mind
the negative and positive directionality of hemispheres. Default = c(0,0).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ptSize</code></td>
<td>
<p>Optional. Numeric. The size of the points as passed to ggplot2. Default = 1.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>saveTable</code></td>
<td>
<p>Optional. Logical. If TRUE, the function will save the data used to produce the
compound bar plot.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>jitterValue</code></td>
<td>
<p>Optional. Numeric. The value to jitter points by in the map in decimal degrees.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>returnPlot</code></td>
<td>
<p>Logical. If TRUE, return the plot to the environment. Default = FALSE.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Optional. Extra variables to be fed into <code>forcats::fct_recode()</code> to change names on plot.
For example... 'B. Mont.' = "BMont", 'B. Minkley' = "BMin", Ecd = "Ecd", Gaiarsa = "Gai"</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>Exports a compound bar plot that summarises all flag columns. Optionally can also return
a point map for a particular species in tandem with the summary plot.
</p>


<h3>Examples</h3>

<pre><code class="language-R"># import data
data(beesFlagged)
OutPath_Figures &lt;- tempdir()
 # Visualise all flags for each dataSource (simplified to the text before the first underscore)
plotFlagSummary(
  data = beesFlagged,
  # Colours in order of pass (TRUE), fail (FALSE), and NA
  flagColours = c("#127852", "#A7002D", "#BDBABB"),
  fileName = paste0("FlagsPlot_TEST_", Sys.Date(),".pdf"),
  outPath = OutPath_Figures,
  width = 15, height = 9,
  # OPTIONAL:
  #\   #  # Filter to species
  #\   speciesName = "Holcopasites heliopsis",
  #\   # column to look in
  #\   nameColumn = "species",
  #\   # Save the filtered data
  #\   saveFiltered = TRUE,
  #\   # Filter column to display on map
  #\   filterColumn = ".summary",
  #\   plotMap = TRUE,
  #\   # amount to jitter points if desired, e.g. 0.25 or NULL
  #\   jitterValue = NULL,
  #\   # Map opacity value for points between 0 and 1
  #\   mapAlpha = 1,
  # Extra variables can be fed into forcats::fct_recode() to change names on plot
  GBIF = "GBIF", SCAN = "SCAN", iDigBio = "iDigBio", USGS = "USGS", ALA = "ALA", 
  ASP = "ASP", CAES = "CAES", 'B. Mont.' = "BMont", 'B. Minkley' = "BMin", Ecd = "Ecd",
  Gaiarsa = "Gai", EPEL = "EPEL"
)



</code></pre>


</div>