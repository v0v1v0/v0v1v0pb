<div class="container">

<table style="width: 100%;"><tr>
<td>sim_data</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Simulating Biomarker and Survival Observations</h2>

<h3>Description</h3>

<p>This function simulates biomarkers and generates survival observations depending on biomarker values. The simulated data can be used to explore prognostic enrichment using <code>surv_enrichment</code>.
</p>


<h3>Usage</h3>

<pre><code class="language-R">sim_data(n = 500, biomarker = "normal", effect.size = 1.25,
         baseline.hazard = "constant", end.time = 10,
         end.survival = 0.5, shape = NULL, seed = 2333)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>n</code></td>
<td>

<p>The number of observations to simulate.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>biomarker</code></td>
<td>

<p>Character specifying the shape of the biomarker distribution. Choices are <code>normal</code> for a symmetric distribution and <code>lognormal</code> for a right-skewed distribution.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>effect.size</code></td>
<td>

<p>The hazard ratio corresponding to one standard deviation increment in the biomarker.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>baseline.hazard</code></td>
<td>

<p>Character ("constant"/"increasing"/"decreasing") specifying whether the overall hazard in the population is constant, increasing or decreasing over time.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>end.time</code></td>
<td>

<p>The length of observation in the simulated dataset. In the data simulation, any events after this time will be censored at this time.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>end.survival</code></td>
<td>

<p>The survival rate in the population at the end of observation.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>shape</code></td>
<td>

<p>(Optional) the Weibull shape parameter for the baseline hazard. Values smaller and larger than 1 correspond to decreasing and increasing respectively.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>seed</code></td>
<td>

<p>(Optional) specify the random seed used for simulation.
</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>The biomarker will be simulated from a standardized normal or lognormal distribution. It is important that <code>effect.size</code> should correspond to a 1 SD increment in the biomarker. Conditioning on the biomarker values and assuming proportional hazards, survival times are simulated from a Weibull distribution with user-specified shape parameter, and the scale parameter is determined by the specified event rate and effect size.
</p>


<h3>Value</h3>

<p>Returns a list of the following items:
</p>
<table>
<tr style="vertical-align: top;">
<td><code>data</code></td>
<td>

<p>A data frame with 4 columns: the value of biomarker, observed event time, event indicator and the true event time.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>km.plot</code></td>
<td>

<p>The Kaplan-Meier survival curves of the simulated dataset at enrichment levels 0, 25%, 50% and 75%.
</p>
</td>
</tr>
</table>
<h3>Examples</h3>

<pre><code class="language-R">  ## Simulate a dataset with 500 observations,
  ## where the biomarker is Normally distributed (with SD=1).
  ## The hazard ratio corresponding to every one unit of increament in the biomarker is 1.25.
  ## The observation period is 10 months,
  ## and the survival probability of the population at the end of observation is 0.5.
  ## Hazards are constant over time.
  sim_obj &lt;- sim_data(n = 500, biomarker = "normal", effect.size = 1.25,
                     baseline.hazard = "constant", end.time = 10, end.survival = 0.5)
  dat &lt;- sim_obj$data
</code></pre>


</div>