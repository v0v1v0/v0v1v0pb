<div class="container">

<table style="width: 100%;"><tr>
<td>LOOKUP</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Search, match, and look up values (like Excel's functions <code>INDEX + MATCH</code>).</h2>

<h3>Description</h3>

<p>In Excel, we can use <code>VLOOKUP</code>, <code>HLOOKUP</code>, <code>XLOOKUP</code> (a new function released in 2019),
or the combination of <code>INDEX</code> and <code>MATCH</code> to search, match, and look up values.
Here I provide a similar function.
</p>


<h3>Usage</h3>

<pre><code class="language-R">LOOKUP(
  data,
  vars,
  data.ref,
  vars.ref,
  vars.lookup,
  return = c("new.data", "new.var", "new.value")
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>data</code></td>
<td>
<p>Main data.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>vars</code></td>
<td>
<p>Character (vector), specifying the variable(s) to be searched in <code>data</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>data.ref</code></td>
<td>
<p>Reference data containing both the reference variable(s) and the lookup variable(s).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>vars.ref</code></td>
<td>
<p>Character (vector), with the <strong>same length and order</strong> as <code>vars</code>,
specifying the reference variable(s) to be matched in <code>data.ref</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>vars.lookup</code></td>
<td>
<p>Character (vector), specifying the variable(s) to be looked up and returned from <code>data.ref</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>return</code></td>
<td>
<p>What to return. Default (<code>"new.data"</code>) is to return a data frame with the lookup values added.
You may also set it to <code>"new.var"</code> or <code>"new.value"</code>.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>If multiple values were simultaneously matched, a warning message would be printed.
</p>


<h3>Value</h3>

<p>New data object, new variable, or new value (see the argument <code>return</code>).
</p>


<h3>See Also</h3>

<p><code>dplyr::left_join()</code>
</p>
<p><a href="https://www.excel-university.com/xlookup/">XLOOKUP: Excel University</a>
</p>


<h3>Examples</h3>

<pre><code class="language-R">ref = data.table(City=rep(c("A", "B", "C"), each=5),
                 Year=rep(2013:2017, times=3),
                 GDP=sample(1000:2000, 15),
                 PM2.5=sample(10:300, 15))
ref

data = data.table(sub=1:5,
                  city=c("A", "A", "B", "C", "C"),
                  year=c(2013, 2014, 2015, 2016, 2017))
data

LOOKUP(data, c("city", "year"), ref, c("City", "Year"), "GDP")
LOOKUP(data, c("city", "year"), ref, c("City", "Year"), c("GDP", "PM2.5"))

</code></pre>


</div>