<div class="container">

<table style="width: 100%;"><tr>
<td>BIOMOD.formated.data.PA</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>
<code>BIOMOD_FormatingData()</code> output object class (with pseudo-absences)</h2>

<h3>Description</h3>

<p>Class returned by <code>BIOMOD_FormatingData</code>, and used by 
<code>bm_Tuning</code>, <code>bm_CrossValidation</code> and 
<code>BIOMOD_Modeling</code>
</p>


<h3>Usage</h3>

<pre><code class="language-R">## S4 method for signature 'numeric,data.frame'
BIOMOD.formated.data.PA(
  sp,
  env,
  xy = NULL,
  dir.name = ".",
  sp.name = NULL,
  eval.sp = NULL,
  eval.env = NULL,
  eval.xy = NULL,
  PA.nb.rep = 1,
  PA.strategy = "random",
  PA.nb.absences = NULL,
  PA.dist.min = 0,
  PA.dist.max = NULL,
  PA.sre.quant = 0.025,
  PA.user.table = NULL,
  na.rm = TRUE,
  filter.raster = FALSE
)

## S4 method for signature 'numeric,SpatRaster'
BIOMOD.formated.data.PA(
  sp,
  env,
  xy = NULL,
  dir.name = ".",
  sp.name = NULL,
  eval.sp = NULL,
  eval.env = NULL,
  eval.xy = NULL,
  PA.nb.rep = 1,
  PA.strategy = "random",
  PA.nb.absences = NULL,
  PA.dist.min = 0,
  PA.dist.max = NULL,
  PA.sre.quant = 0.025,
  PA.user.table = NULL,
  na.rm = TRUE,
  filter.raster = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>sp</code></td>
<td>
<p>A <code>vector</code>, a <code>SpatVector</code> without associated 
data (<em>if presence-only</em>), or a <code>SpatVector</code>
object containing binary data (<code>0</code> : absence,  <code>1</code> : presence,
<code>NA</code> : indeterminate) for a single species that will be used to 
build the species distribution model(s)
<br><em>Note that old format from <span class="pkg">sp</span> are still supported such as
<code>SpatialPoints</code>  (if presence-only) or <code>SpatialPointsDataFrame</code>
object containing binary data.</em></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>env</code></td>
<td>
<p>a <code>matrix</code>, <code>data.frame</code>, <code>SpatVector</code>
or <code>SpatRaster</code> object containing the explanatory variables 
(in columns or layers) that will be used to build the species distribution model(s).
<br><em>Note that old format from <span class="pkg">raster</span> and <span class="pkg">sp</span> are still supported such as 
<code>RasterStack</code> and <code>SpatialPointsDataFrame</code> objects. </em></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>xy</code></td>
<td>
<p>(<em>optional, default</em> <code>NULL</code>) <br> 
If <code>resp.var</code> is a <code>vector</code>, a 2-columns <code>matrix</code> or <code>data.frame</code> 
containing the corresponding <code>X</code> and <code>Y</code> coordinates that will be used to build the 
species distribution model(s)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>dir.name</code></td>
<td>
<p>a <code>character</code> corresponding to the modeling folder</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>sp.name</code></td>
<td>
<p>a <code>character</code> corresponding to the species name</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>eval.sp</code></td>
<td>
<p>(<em>optional, default</em> <code>NULL</code>) <br> 
A <code>vector</code>, a <code>SpatVector</code> without associated 
data (<em>if presence-only</em>), or a <code>SpatVector</code>
object containing binary data (<code>0</code> : absence, <code>1</code> : presence, 
<code>NA</code> : indeterminate) for a single species that will be used to
evaluate the species distribution model(s) with independent data
<br><em>Note that old format from <span class="pkg">sp</span> are still supported such as
<code>SpatialPoints</code>  (if presence-only) or <code>SpatialPointsDataFrame</code>
object containing binary data.</em></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>eval.env</code></td>
<td>
<p>(<em>optional, default</em> <code>NULL</code>) <br> 
A <code>matrix</code>, <code>data.frame</code>, <code>SpatVector</code> or
<code>SpatRaster</code> object containing the explanatory
variables (in columns or layers) that will be used to evaluate the species
distribution model(s) with independent data
<br><em>Note that old format from <span class="pkg">raster</span> and <span class="pkg">sp</span> are still
supported such as <code>RasterStack</code> and <code>SpatialPointsDataFrame</code>
objects. </em></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>eval.xy</code></td>
<td>
<p>(<em>optional, default</em> <code>NULL</code>) <br> 
If <code>resp.var</code> is a <code>vector</code>, a 2-columns <code>matrix</code> or
<code>data.frame</code> containing the corresponding <code>X</code> and <code>Y</code>
coordinates that will be used to evaluate the species distribution model(s)
with independent data</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>PA.nb.rep</code></td>
<td>
<p>(<em>optional, default</em> <code>0</code>) <br> 
If pseudo-absence selection, an <code>integer</code> corresponding to the number of sets 
(repetitions) of pseudo-absence points that will be drawn</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>PA.strategy</code></td>
<td>
<p>(<em>optional, default</em> <code>NULL</code>) <br> 
If pseudo-absence selection, a <code>character</code> defining the strategy that will be used to 
select the pseudo-absence points. Must be <code>random</code>, <code>sre</code>, <code>disk</code> or 
<code>user.defined</code> (see Details)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>PA.nb.absences</code></td>
<td>
<p>(<em>optional, default</em> <code>0</code>) <br> 
If pseudo-absence selection, and <code>PA.strategy = 'random'</code> or <code>PA.strategy = 'sre'</code> 
or <code>PA.strategy = 'disk'</code>, an <code>integer</code> (or a <code>vector</code> of <code>integer</code> the 
same size as <code>PA.nb.rep</code>) corresponding to the number of pseudo-absence points that 
will be selected for each pseudo-absence repetition (true absences included)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>PA.dist.min</code></td>
<td>
<p>(<em>optional, default</em> <code>0</code>) <br> 
If pseudo-absence selection and <code>PA.strategy = 'disk'</code>, a <code>numeric</code> defining the 
minimal distance to presence points used to make the <code>disk</code> pseudo-absence selection 
(in meters, see Details)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>PA.dist.max</code></td>
<td>
<p>(<em>optional, default</em> <code>0</code>) <br> 
If pseudo-absence selection and <code>PA.strategy = 'disk'</code>, a <code>numeric</code> defining the 
maximal distance to presence points used to make the <code>disk</code> pseudo-absence selection 
(in meters, see Details)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>PA.sre.quant</code></td>
<td>
<p>(<em>optional, default</em> <code>0</code>) <br> 
If pseudo-absence selection and <code>PA.strategy = 'sre'</code>, a <code>numeric</code> between <code>0</code> 
and <code>0.5</code> defining the half-quantile used to make the <code>sre</code> pseudo-absence selection 
(see Details)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>PA.user.table</code></td>
<td>
<p>(<em>optional, default</em> <code>NULL</code>) <br> 
If pseudo-absence selection and <code>PA.strategy = 'user.defined'</code>, a <code>matrix</code> or 
<code>data.frame</code> with as many rows as <code>resp.var</code> values, as many columns as 
<code>PA.nb.rep</code>, and containing <code>TRUE</code> or <code>FALSE</code> values defining which points 
will be used to build the species distribution model(s) for each repetition (see Details)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>na.rm</code></td>
<td>
<p>(<em>optional, default</em> <code>TRUE</code>) <br> 
A <code>logical</code> value defining whether points having one or several missing
values for explanatory variables should be removed from the analysis or not</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>filter.raster</code></td>
<td>
<p>(<em>optional, default</em> <code>FALSE</code>) <br> 
If <code>env</code> is of raster type, a <code>logical</code> value defining whether <code>sp</code> 
is to be filtered when several points occur in the same raster cell</p>
</td>
</tr>
</table>
<h3>Slots</h3>


<dl>
<dt><code>dir.name</code></dt>
<dd>
<p>a <code>character</code> corresponding to the modeling folder</p>
</dd>
<dt><code>sp.name</code></dt>
<dd>
<p>a <code>character</code> corresponding to the species name</p>
</dd>
<dt><code>coord</code></dt>
<dd>
<p>a 2-columns <code>data.frame</code> containing the corresponding <code>X</code> and <code>Y</code> 
coordinates</p>
</dd>
<dt><code>data.species</code></dt>
<dd>
<p>a <code>vector</code> containing the species observations (<code>0</code>, <code>1</code> or 
<code>NA</code>)</p>
</dd>
<dt><code>data.env.var</code></dt>
<dd>
<p>a <code>data.frame</code> containing explanatory variables</p>
</dd>
<dt><code>data.mask</code></dt>
<dd>
<p>a <code>SpatRaster</code> object containing 
the mask of the studied area</p>
</dd>
<dt><code>has.data.eval</code></dt>
<dd>
<p>a <code>logical</code> value defining whether evaluation data is given</p>
</dd>
<dt><code>eval.coord</code></dt>
<dd>
<p>(<em>optional, default</em> <code>NULL</code>) <br> 
A 2-columns <code>data.frame</code> containing the corresponding <code>X</code> and <code>Y</code> 
coordinates for evaluation data</p>
</dd>
<dt><code>eval.data.species</code></dt>
<dd>
<p>(<em>optional, default</em> <code>NULL</code>) <br> 
A <code>vector</code> containing the species observations (<code>0</code>, <code>1</code> or <code>NA</code>) for 
evaluation data</p>
</dd>
<dt><code>eval.data.env.var</code></dt>
<dd>
<p>(<em>optional, default</em> <code>NULL</code>) <br> 
A <code>data.frame</code> containing explanatory variables for evaluation data</p>
</dd>
<dt><code>PA.strategy</code></dt>
<dd>
<p>a <code>character</code> corresponding to the pseudo-absence selection strategy</p>
</dd>
<dt><code>PA.table</code></dt>
<dd>
<p>a <code>data.frame</code> containing the corresponding table of selected 
pseudo-absences (indicated by <code>TRUE</code> or <code>FALSE</code>) from the <code>pa.tab</code> list 
element returned by the <code>bm_PseudoAbsences</code> function</p>
</dd>
</dl>
<h3>Author(s)</h3>

<p>Damien Georges
</p>


<h3>See Also</h3>

<p><code>BIOMOD_FormatingData</code>, <code>bm_PseudoAbsences</code>, 
<code>bm_Tuning</code>, <code>bm_CrossValidation</code>, 
<code>BIOMOD_Modeling</code>, <code>bm_RunModelsLoop</code>
</p>
<p>Other Toolbox objects: 
<code>BIOMOD.ensemble.models.out</code>,
<code>BIOMOD.formated.data</code>,
<code>BIOMOD.models.options</code>,
<code>BIOMOD.models.out</code>,
<code>BIOMOD.options.dataset</code>,
<code>BIOMOD.options.default</code>,
<code>BIOMOD.projection.out</code>,
<code>BIOMOD.stored.data</code>,
<code>biomod2_ensemble_model</code>,
<code>biomod2_model</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">
showClass("BIOMOD.formated.data.PA")

## ----------------------------------------------------------------------- #
library(terra)

# Load species occurrences (6 species available)
data(DataSpecies)
head(DataSpecies)

# Select the name of the studied species
myRespName &lt;- 'GuloGulo'

# Keep only presence informations
DataSpecies &lt;- DataSpecies[which(DataSpecies[, myRespName] == 1), ]

# Get corresponding presence/absence data
myResp &lt;- as.numeric(DataSpecies[, myRespName])

# Get corresponding XY coordinates
myRespXY &lt;- DataSpecies[, c('X_WGS84', 'Y_WGS84')]

# Load environmental variables extracted from BIOCLIM (bio_3, bio_4, bio_7, bio_11 &amp; bio_12)
data(bioclim_current)
myExpl &lt;- terra::rast(bioclim_current)



## ----------------------------------------------------------------------- #
# Format Data with pseudo-absences : random method
myBiomodData &lt;- BIOMOD_FormatingData(resp.var = myResp,
                                     expl.var = myExpl,
                                     resp.xy = myRespXY,
                                     resp.name = myRespName,
                                     PA.nb.rep = 4,
                                     PA.strategy = 'random',
                                     PA.nb.absences = 1000)
myBiomodData
plot(myBiomodData)


</code></pre>


</div>