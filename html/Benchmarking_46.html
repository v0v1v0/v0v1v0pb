<div class="container">

<table style="width: 100%;"><tr>
<td>outlier.ap</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>
Detection of outliers in benchmark models
</h2>

<h3>Description</h3>

<p> The functions implements the Wilson (1993) outlier
detection method. One written entirely in R and another written in C++.</p>


<h3>Usage</h3>

<pre><code class="language-R">outlier.ap (X, Y, NDEL = 3, NLEN = 25, TRANSPOSE = FALSE)
outlierC.ap(X, Y, NDEL = 3, NLEN = 25, TRANSPOSE = FALSE)

outlier.ap.plot(ratio, NLEN = 25, xlab = "Number of firms deleted", 
                ylab = "Log ratio", ..., ylim)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>X</code></td>
<td>
<p> Input as a firms times goods matrix, see <code>TRANSPOSE</code>.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>Y</code></td>
<td>
<p> Output as a firms times goods matrix, see
<code>TRANSPOSE</code>.  </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>NDEL</code></td>
<td>
<p> The maximum number of firms to be considered as a group
of outliers, i.e. the maximum number of firms to be deleted.  </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>NLEN</code></td>
<td>
<p> The number of ratios to save for each level
or removal, the number of rows in <code>ratio</code> used.  </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>TRANSPOSE</code></td>
<td>
<p>Input and output matrices are treated as firms
times goods matrices for the default value <code>TRANSPOSE=FALSE</code>
corresponding to the standard in R for statistical models.  When
<code>TRUE</code> data matrices are transposed to good times firms
matrices as is normally used in LP formulation of the problem.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ratio</code></td>
<td>
<p> The <code>ratio</code> component from the list as output
from <code>outlier.ap</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>xlab</code></td>
<td>
<p> Label for the x-axis.  </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ylab</code></td>
<td>
<p> Label for the y-axis </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ylim</code></td>
<td>
<p> The y limits <code>(y1, y2)</code> of the plot, an
array/vector of length 2.  </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Usual options for the methods <code>plot</code> and
<code>lines</code>.</p>
</td>
</tr>
</table>
<h3>Details</h3>

 
<p>An implementation of the method in Wilson (1993) using only R
functions and especially the function <code>det</code> to calculate
<code class="reqn">R^{(i)}_{\min}</code>. The alternative method <code>outlierC.ap</code> 
is written completely in C++ and is much faster, but still not
as fast at the method in <span class="pkg">FEAR</span>.
</p>
<p>An elementary presentation of the method is found in Bogetoft and Otto
(2011), Sect. 5.13 on outliers.
</p>
<p>For a data set with 10 firms and considering at the most 3 outliers there are
175 combinations of firms to delete. For 100 firms there are 166,750
combinations and for at most 5 outliers there are 79,375,495 combinatins, for
at most 8 outliers there are  203,366,882,995 combinations. For 200 firms whith
respectively 3,5 and 8 outliers there are  1,333,500, and 2,601,668,490, and 
a number we do not know what to call
57,467,902,686,615 combinations. Thus the number of combinations are increasing
exponentialy in both number of firms and number of firms to be deleted and so
is the computational time. Thus you should limit the numbers <code>NDEL</code> to a
very small number like at the most 3 or perhabs 5 depending of the number
of firms. Or you should use the extremely fast method <code>ap</code> from the
package <span class="pkg">FEAR</span> mentioned in the references.
</p>


<h3>Value</h3>

<table>
<tr style="vertical-align: top;">
<td><code>ratio</code></td>
<td>
<p>A <code>min(NLEN,K) x NDEL</code> matrix with the log-ratios to
be plotted.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>imat</code></td>
<td>
<p>A <code>NDEL x NDEL</code> matrix with indicies for deleted firms.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>r0</code></td>
<td>
<p>A <code>NDEL</code> array with the minimum value <code class="reqn">R^{i}</code> of
the for each number of deleted firms. </p>
</td>
</tr>
</table>
<h3>Note</h3>

 
<p>The function <code>outlier.ap</code> is extremely slow and for <code>NDEL</code>
larger than 3 or 4 it might be advisable to use the function <code>ap</code>
from the package <span class="pkg">FEAR</span>.
</p>
<p>The name of the returned components are the same as for <code>ap</code> in
the package <span class="pkg">FEAR</span>.
</p>


<h3>Author(s)</h3>

<p> Peter Bogetoft and Lars Otto <a href="mailto:larsot23@gmail.com">larsot23@gmail.com</a></p>


<h3>References</h3>

<p> Bogetoft and Otto; <em>Benchmarking with DEA, SFA, and
R</em>; Springer 2011
</p>
<p>Wilson (1993), “Detecing outliers in deterministic
nonparametric frontier models with multiple outputs,” <em>Journal of
Business and Economic Statistics</em> 11, 319-323.
</p>
<p>Wilson (2008), “FEAR 1.0: A Software Package for Frontier
Efficiency Analysis with R,” <em>Socio-Economic Planning Sciences</em>
42, 247–254
</p>


<h3>See Also</h3>

<p>The function <code>ap</code> in the package <span class="pkg">FEAR</span>.
</p>


<h3>Examples</h3>

<pre><code class="language-R">n &lt;- 25
x &lt;- matrix(rnorm(n))
y &lt;- .5 + 2.5*x + 2*rnorm(25)
tap &lt;- outlier.ap(x,y, NDEL=2)
print(cbind(tap$imat,tap$rmin), na.print="", digit=2)
outlier.ap.plot(tap$ratio)
</code></pre>


</div>