<div class="container">

<table style="width: 100%;"><tr>
<td>resampling</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Rarefy BioTIME data to an equal number of samples per year</h2>

<h3>Description</h3>

<p>Takes the output of <code>gridding</code> and applies sample-based rarefaction to
standardise the number of samples per year within each cell-level time series
(i.e. assemblageID).
</p>


<h3>Usage</h3>

<pre><code class="language-R">resampling(x, measure, resamps = 1L, conservative = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>(<code>data.frame</code>) BioTIME gridded data to be resampled (in the format of
the output of the <code>gridding</code> function).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>measure</code></td>
<td>
<p>(<code>character</code>) currency to be retained during the sample-based
rarefaction. Can be either defined by a single column name or a vector of
two or more column names.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>resamps</code></td>
<td>
<p>(<code>integer</code>) number of repetitions. Default is 1.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>conservative</code></td>
<td>
<p>(<code>logical</code>). <code>FALSE</code> by default. If <code>TRUE</code>,
whenever a <code>NA</code>
is found in the measure field(s), the whole sample is removed instead of the
missing observations only.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>Sample-based rarefaction prevents temporal variation in sampling effort from
affecting diversity estimates (see Gotelli N.J., Colwell R.K. 2001 Quantifying biodiversity: procedures and pitfalls in the measurement and comparison of species richness. Ecology Letters 4(4), 379-391) by selecting an equal number of samples across all years in a time series.
<code>resampling</code> counts the number of unique samples taken in each year (sampling effort),
identifies the minimum number of samples across all years, and then uses this minimum to
randomly resample each year down to that number. Thus, standardising the
sampling effort between years,
standard biodiversity metrics can be calculated based on an equal number of
samples (e.g. using <code>getAlphaMetrics</code>, <code>getAlphaMetrics</code>).
<code>measure</code> is a <code>character</code>
input specifying the chosen currency to be used during the sample-based
rarefaction. It can be a single column name or a vector of two or more column
names - e.g. for BioTIME, <code>measure="ABUNDANCE"</code>, <code>measure="BIOMASS"</code>
or <code>measure = c("ABUNDANCE", "BIOMASS")</code>.
</p>
<p>By default, any observations with <code>NA</code> within the currency field(s) are
removed. You can choose to remove the full sample where such observations are
present by setting <code>conservative</code> to <code>TRUE</code>. <code>resamps</code> can be used to define
multiple iterations, effectively creating multiple alternative datasets
as in each iteration different samples will be randomly selected for the
years where number of samples &gt; minimum.
Note that the function always returns a single data frame, i.e. if <code>resamps</code> &gt; 1,
the returned data frame is the result of individual data frames concatenated
together, one from each iteration identified by a numerical
unique identifier 1:resamps.
</p>


<h3>Value</h3>

<p>Returns a single long form <code>data.frame</code> containing the total currency
or currencies of interest (sum) for each species in each year within each
rarefied time series (i.e. <code>assemblageID</code>). An extra integer column called
<code>resamp</code> indicates the specific iteration.
</p>


<h3>Examples</h3>

<pre><code class="language-R">
  library(BioTIMEr)
  set.seed(42)
  x &lt;- gridding(BTsubset_meta, BTsubset_data)
  resampling(x, measure = "BIOMASS")
  resampling(x, measure = "ABUNDANCE")
  resampling(x, measure = c("ABUNDANCE","BIOMASS"))


</code></pre>


</div>