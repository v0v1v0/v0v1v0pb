<div class="container">

<table style="width: 100%;"><tr>
<td>e0.map</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>
World Map of the Life Expectancy 
</h2>

<h3>Description</h3>

<p>Generates a world map of the life expectancy for given quantile and projection or estimation period, using different techniques: <code>e0.map</code> and <code>e0.map.all</code> use <span class="pkg">rworldmap</span>, <code>e0.ggmap</code> uses <span class="pkg">ggplot2</span>, and <code>e0.map.gvis</code> creates an interactive map via <span class="pkg">GoogleVis</span>.
</p>


<h3>Usage</h3>

<pre><code class="language-R">e0.map(pred, ...)
	
e0.ggmap(pred, ...)

e0.map.all(pred, output.dir, output.type = "png", 
    e0.range = NULL, nr.cats = 50, same.scale = TRUE, 
    quantile = 0.5, file.prefix = "e0wrldmap_", ...)
			
get.e0.map.parameters(pred, e0.range = NULL, 
    nr.cats = 50, same.scale = TRUE, quantile = 0.5, ...)
    
e0.map.gvis(pred, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>pred</code></td>
<td>
<p>Object of class <code>bayesLife.prediction</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>output.dir</code></td>
<td>
<p>Directory into which resulting maps are stored.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>output.type</code></td>
<td>
<p>Type of the resulting files. It can be “png”, “pdf”, “jpeg”, “bmp”, “tiff”, or “postscript”.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>e0.range</code></td>
<td>
<p>Range of the life expectancy to be displayed. It is of the form <code>c(</code><var>e0.min</var>, <var>e0.max</var><code>)</code>.
By default, the whole range is considered. Note that countries with values outside of the given range will appear white.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>nr.cats</code></td>
<td>
<p>Number of color categories.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>same.scale</code></td>
<td>
<p>Logical controlling if maps for all years of this prediction object should be on the same color scale.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>quantile</code></td>
<td>
<p>Quantile for which the map should be generated. It must be equal to one of the values in <code>dimnames(pred$quantiles[[2]])</code>, i.e. 0, 0.025, 0.05, 0.1, 0.2, 0.25, 0.3, 0.4, 0.5, 0.6, 0.7, 0.75, 0.8, 0.9, 0.95, 0.975, 1. Value 0.5 corresponds to the median.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>file.prefix</code></td>
<td>
<p>Prefix for file names.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>In <code>e0.map</code>, ... are all arguments that can be passed to <code>tfr.map</code>, such as <code>quantile</code>, <code>year</code>, <code>projection.index</code>, <code>par.name</code>, <code>adjusted</code>, <code>device</code>, <code>main</code>, <code>device.args</code>, and <code>data.args</code>. In <code>e0.map.gvis</code>, ... are all arguments that can be passed to <code>tfr.map.gvis</code>. In <code>e0.ggmap</code>, ... are arguments that can be passed to <code>tfr.ggmap</code>. In addition, functions that use the <span class="pkg">rworldmap</span> package accept
arguments passed to the <code>rworldmap::mapCountryData</code> function.
</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p><code>e0.map</code> creates a single map for the given time period and quantile. <code>e0.map.all</code> generates a sequence of maps, namely one for each projection period. If the package <span class="pkg">fields</span> is installed, a color bar legend at the botom of the map is created.
</p>
<p>Function <code>get.e0.map.parameters</code> can be used in combination with <code>e0.map</code>. (Note that <code>get.e0.map.parameters</code> is called from inside of <code>e0.map.all</code>.) It sets breakpoints for the color scheme using quantiles of a fitted gamma distribution.
</p>
<p>Function <code>e0.ggmap</code> is similar to <code>e0.map</code>, but used the <span class="pkg">ggplot2</span> package in combination with the <code>geom_sf</code> function.
</p>
<p>Function <code>e0.map.gvis</code> creates an interactive map using the <span class="pkg">googleVis</span> package and opens it in an internet browser. It also generates a table of the mapped values that can be sorted by columns interactively in the browser. 
</p>
<p>By default, both <code>e0.map</code>, <code>e0.ggmap</code> and <code>e0.map.gvis</code> produce maps of life expectancy. Alternatively, the functions can be used to plot country-specific MCMC parameters into a world map. They are given by the argument <code>par.name</code>. One can pass any value from <code>e0.parameter.names.cs.extended()</code>.
</p>


<h3>Value</h3>

<p><code>get.e0.map.parameters</code> returns a list with elements:
</p>
<table>
<tr style="vertical-align: top;">
<td><code>pred</code></td>
<td>
<p>The object of class <code>bayesLife.prediction</code> used in the function.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>quantile</code></td>
<td>
<p>Value of the argument <code>quantile</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>catMethod</code></td>
<td>
<p>If the argument <code>same.scale</code> is <code>TRUE</code>, this element contains breakpoints for categorization. It is generated from a fitted gamma distribution. Otherwise, it is <code>NULL</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>numCats</code></td>
<td>
<p>Number of categories.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>coulourPalette</code></td>
<td>
<p>Subset of the rainbow palette, starting from dark blue and ending at red.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Additional arguments passed to the function.</p>
</td>
</tr>
</table>
<h3>Author(s)</h3>

<p>Hana Sevcikova, Adrian Raftery
</p>


<h3>See Also</h3>

<p><code>tfr.map</code></p>


<h3>Examples</h3>

<pre><code class="language-R">## Not run: 
sim.dir &lt;- file.path(find.package("bayesLife"), "ex-data", "bayesLife.output")
pred &lt;- get.e0.prediction(sim.dir = sim.dir)

# Using ggplot2
e0.ggmap(pred, same.scale = TRUE)
e0.ggmap(pred, year = 2100, same.scale = TRUE)

# Using rworldmap
# Uses heat colors and seven categories by default
e0.map(pred)
# Uses more colors with more suitable categorization
params &lt;- get.e0.map.parameters(pred)
do.call('e0.map', params)
# Another projection year on the same scale
do.call('e0.map', c(list(year = 2043), params))

# Interactive map (requires Flash)
e0.map.gvis(pred, year = 2043)
## End(Not run)
</code></pre>


</div>