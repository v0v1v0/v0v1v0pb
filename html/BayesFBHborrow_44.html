<div class="container">

<table style="width: 100%;"><tr>
<td>BayesFBHborrow</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>BayesFBHborrow: Run MCMC for a piecewise exponential model</h2>

<h3>Description</h3>

<p>Main function of the BayesFBHborrow package. This generic function 
calls the correct MCMC sampler for time-to-event Bayesian borrowing.
</p>


<h3>Usage</h3>

<pre><code class="language-R">BayesFBHborrow(
  data,
  data_hist = NULL,
  borrow = TRUE,
  model_choice,
  tuning_parameters,
  hyperparameters,
  lambda_hyperparameters,
  iter,
  warmup_iter,
  refresh,
  verbose,
  max_grid
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>data</code></td>
<td>
<p>data.frame containing atleast three vectors of "tte" (time-to-event)
and "event" (censoring), and covariates "X_i" (where i should be a number/
indicator of the covariate)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>data_hist</code></td>
<td>
<p>data.frame containing atleast two vectors of "tte" 
(time-to-event) and "event" (censoring), with the option of adding covariates
named "X_0_i" (where i should be a number/indicator of the covariate), for 
historical data</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>borrow</code></td>
<td>
<p>TRUE (default), will run the model with borrowing</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>model_choice</code></td>
<td>
<p>choice of which borrowing model to use out of "mix", "uni"
or "all"</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>tuning_parameters</code></td>
<td>
<p>list of "cprop_beta" ("cprop_beta_0" for historical data),
"alpha", "Jmax", and "pi_b". Default is list("Jmax" = 5, "clam_smooth" = 0.8,
"cprop_beta" = 0.5, "cprop_beta_0"  = 0.5, "pi_b" = 0.5, "alpha" = 0.4)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>hyperparameters</code></td>
<td>
<p>list containing the hyperparameters ("a_tau", "b_tau",
"c_tau", "d_tau","type", "p_0", "a_sigma", "b_sigma"). Default is list("a_tau" = 1,
"b_tau" = 1,"c_tau" = 1, "d_tau" = 0.001, "type" = "mix", "p_0" = 0.5, 
"a_sigma" = 2, "b_sigma" = 2, "phi" = 3)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>lambda_hyperparameters</code></td>
<td>
<p>contains two hyperparameters (a_lambda and b_lambda)
used for the update of lambda and lambda_0. Default is c(0.01, 0.01)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>iter</code></td>
<td>
<p>number of iterations for MCMC sampler</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>warmup_iter</code></td>
<td>
<p>number of warmup iterations (burn-in) for MCMC sampler.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>refresh</code></td>
<td>
<p>number of iterations between printed screen updates</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>verbose</code></td>
<td>
<p>FALSE (default), choice of output, if TRUE will output 
intermittent results into console</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>max_grid</code></td>
<td>
<p>grid size for the smoothed baseline hazard</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>a nested list of two items, 'out' and 'plots'. The list 'out' will
contain all the samples of the MCMC chain, as well as acceptance ratios. The
latter, 'plots', contains plots (and data) of the smoothed baseline hazard, 
smoothed survival, a histogram of the sampled number of split points, and the
trace plot of the treatment effect beta_1
</p>


<h3>Examples</h3>

<pre><code class="language-R">set.seed(123)
# Load the example data
data(piecewise_exp_cc, package = "BayesFBHborrow")
data(piecewise_exp_hist, package = "BayesFBHborrow")

# Set your tuning parameters
tuning_parameters &lt;- list("Jmax" = 5,
                          "pi_b" = 0.5,
                          "cprop_beta" = 3.25,
                          "alpha" = 0.4)
                          
# Set hyperparameters to default, with the borrowing model "mix"
out &lt;- BayesFBHborrow(data = piecewise_exp_cc, data_hist = piecewise_exp_hist,
                      model_choice = 'mix', tuning_parameters = tuning_parameters,
                      iter = 2, warmup_iter = 0)

# Create a summary of the output
summary(out$out, estimator = "out_fixed")

# Plot the predictive curves for the treatment group
plots &lt;- plot(out$out, out$out$time_grid, x_pred = c(1))
</code></pre>


</div>