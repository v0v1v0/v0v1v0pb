<div class="container">

<table style="width: 100%;"><tr>
<td>breathtest_data</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Data structure with PDR data and descriptors for breath test records</h2>

<h3>Description</h3>

<p>Generates structure of class <code>breathtest_data</code> with 
required fields and optional fields. Optional fields by default are NA. 
This structure is used internally as an intermediate when reading in 
external file formats. All <code>read_xxx</code> functions return this structure, 
or a list of this structure (e.g. <code>read_breathid_xml</code>), and any
converter to  a new format should do  the same to be used with 
<code>cleanup_data</code>. 
To support a new format with, also update 
<code>breathtest_read_function</code> which returns the most likely function 
to read the file by reading a few lines in it.
</p>


<h3>Usage</h3>

<pre><code class="language-R">breathtest_data(
  patient_id,
  name = NA,
  first_name = NA,
  initials = NA,
  dob = NA,
  birth_year = NA,
  gender = NA,
  study = NA,
  pat_study_id = NA,
  file_name,
  device = "generic",
  substrate,
  record_date,
  start_time = record_date,
  end_time = record_date,
  test_no,
  dose = 100,
  height = 180,
  weight = 75,
  t50 = NA,
  gec = NA,
  tlag = NA,
  data = data
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>patient_id</code></td>
<td>
<p>required, string or number for unique identification</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>name</code></td>
<td>
<p>optional</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>first_name</code></td>
<td>
<p>optional</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>initials</code></td>
<td>
<p>optional, 2 characters, 1 number</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>dob</code></td>
<td>
<p>optional date of birth (not to be confused with "delta over baseline")</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>birth_year</code></td>
<td>
<p>optional</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>gender</code></td>
<td>
<p>optional <code>m</code> or <code>f</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>study</code></td>
<td>
<p>optional name of study; can be used in population fit</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>pat_study_id</code></td>
<td>
<p>optional; patient number within study_ does not need to be globally unique</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>file_name</code></td>
<td>
<p>required; file where data were read from, or other unique string_
when data are read again, this string is tested and record is skipped when
same filename is already in database, therefore uniqueness is important_ when some
record does not turn up in database after repeated reading, check if a record with
the same file name is already there, and rename the file to avoid collisions_</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>device</code></td>
<td>
<p>breath_id or iris; default "generic"</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>substrate</code></td>
<td>
<p>should contain string "ace" or "oct" or "okt", case insensitive_ will
be replaced by "acetate" or "octanoate". If empty, "ocatanoate" is assumed.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>record_date</code></td>
<td>
<p>required record date_</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>start_time</code></td>
<td>
<p>optional</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>end_time</code></td>
<td>
<p>optional</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>test_no</code></td>
<td>
<p>required integer; unique test number converted to integer if factor</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>dose</code></td>
<td>
<p>optional, default 100 mg</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>height</code></td>
<td>
<p>optional, in cm; when pdr must be calculated, default values are
used; see <code>dob_to_pdr</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>weight</code></td>
<td>
<p>optional, in kg</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>t50</code></td>
<td>
<p>optional, only present if device computes this value</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>gec</code></td>
<td>
<p>optional, only present if device computes this value</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>tlag</code></td>
<td>
<p>optional, only present if device computes this value</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>data</code></td>
<td>
<p>data frame with at least 5 rows and columns <code>minute</code> or 
<code>time</code> and one or both of <code>dob</code> or <code>pdr</code>. 
If pdr is missing, and height, weight 
and substrate are given, computes pdr via function <code>dob_to_pdr</code>. 
When height and weight are missing,  defaults 180 cm and 75 kg are used instead.</p>
</td>
</tr>
</table>
<h3>Examples</h3>

<pre><code class="language-R"># Read a file with known format
iris_csv_file = btcore_file("IrisCSV.TXT")
iris_csv_data = read_iris_csv(iris_csv_file)
# Note that many filds are NA
str(iris_csv_data)
# Convert to a format that can be fed to one of the fit functions
iris_df = cleanup_data(iris_csv_data)
# Individual curve fit
coef(nls_fit(iris_df)) 
</code></pre>


</div>