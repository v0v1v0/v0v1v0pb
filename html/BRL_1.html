<div class="container">

<table style="width: 100%;"><tr>
<td>bipartiteGibbs</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Gibbs Sampler Used for Beta Record Linkage</h2>

<h3>Description</h3>

<p>Run a Gibbs sampler to explore the posterior distribution of bipartite matchings 
that represent the linkage of the datafiles in beta record linkage.
</p>


<h3>Usage</h3>

<pre><code class="language-R">bipartiteGibbs(cd, nIter = 1000, a = 1, b = 1, aBM = 1, bBM = 1, seed = 0)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>cd</code></td>
<td>
<p>a list with the same structure as the output of the function <code>compareRecords</code>, containing: 
</p>

<dl>
<dt><code>comparisons</code></dt>
<dd>
<p>matrix with <code>n1*n2</code> rows, where the comparison pattern for record pair <code class="reqn">(i,j)</code>
appears in row <code>(j-1)*n1+i</code>, for <code class="reqn">i</code> in <code class="reqn">{1,\dots,n1}</code>, and <code class="reqn">j</code> in <code class="reqn">{1,\dots,n2}</code>.  
A comparison field with <code class="reqn">L+1</code> levels of disagreement, 
is represented by <code class="reqn">L+1</code> columns of TRUE/FALSE indicators.  Missing comparisons are coded as FALSE,
which is justified under an assumption of ignorability of the missing comparisons, see Sadinle (2017).
</p>
</dd>
<dt><code>n1,n2</code></dt>
<dd>
<p>the datafile sizes, <code>n1 = nrow(df1)</code> and <code>n2 = nrow(df2)</code>.</p>
</dd>
<dt><code>nDisagLevs</code></dt>
<dd>
<p>a vector containing the number of levels of
disagreement per comparison field.</p>
</dd>
<dt><code>compFields</code></dt>
<dd>
<p>a data frame containing the names of the fields in the datafiles used in the comparisons 
and the types of comparison.</p>
</dd>
</dl>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>nIter</code></td>
<td>
<p>number of iterations of Gibbs sampler.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>a, b</code></td>
<td>
<p>hyper-parameters of the Dirichlet priors for the <code class="reqn">m</code> and <code class="reqn">u</code> parameters
in the model for the comparison data among matches and non-matches, respectively.
These can be vectors with as many 
entries as disagreement levels among all comparison fields.  If specified as positive constants, they 
get recycled to the required length.  If not specified, flat priors are taken.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>aBM, bBM</code></td>
<td>
<p>hyper-parameters of beta prior on bipartite matchings. Default is <code>aBM=bBM=1</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>seed</code></td>
<td>
<p>seed to be used for pseudo-random number generation.  By default it sets <code>seed=0</code>.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>a list containing: 
</p>

<dl>
<dt><code>Z</code></dt>
<dd>
<p>matrix with <code>n2</code> rows and <code>nIter</code> columns containing the chain of bipartite matchings.  
A number smaller or equal to <code>n1</code> in row <code>j</code> indicates the record in datafile 1 to which record <code>j</code> in datafile 2 
is linked at that iteration, otherwise <code>n1+j</code>.
</p>
</dd>
<dt><code>m,u</code></dt>
<dd>
<p>chain of <code class="reqn">m</code> and <code class="reqn">u</code> parameters in the model for the comparison data among matches and non-matches, respectively.</p>
</dd>
</dl>
<h3>References</h3>

<p>Mauricio Sadinle (2017). Bayesian Estimation of Bipartite Matchings for Record Linkage. <em>Journal of the
American Statistical Association</em> 112(518), 600-612. [<a href="https://doi.org/10.1080/01621459.2016.1148612">Published</a>] [<a href="https://arxiv.org/abs/1601.06630">arXiv</a>]
</p>


<h3>Examples</h3>

<pre><code class="language-R">data(twoFiles)

myCompData &lt;- compareRecords(df1, df2, flds=c("gname", "fname", "age", "occup"), 
                             types=c("lv","lv","bi","bi"))

chain &lt;- bipartiteGibbs(myCompData)
</code></pre>


</div>