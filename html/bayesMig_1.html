<div class="container">

<table style="width: 100%;"><tr>
<td>bayesMig-package</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Bayesian Projection of Migration</h2>

<h3>Description</h3>

<p>Collection of functions for making probabilistic projections of net migration rate for all countries of the world,
using a Bayesian hierarchical model (BHM) and the United Nations demographic time series. The model can be also applied
to user-defined data for other locations, such as subnational units.
Methodological details are provided in Azose &amp; Raftery (2015). The projected rates can be used
as input to population projections generated via the <span class="pkg">bayesPop</span> package.
</p>


<h3>Details</h3>

<p>The package is implemented in a similar way as the <span class="pkg">bayesTFR</span>
package and thus, many functions have their equivalents in <span class="pkg">bayesTFR</span>.
The main functions of the package are:
</p>

<ul>
<li> <p><code>run.mig.mcmc</code>: Runs a Markov Chain Monte Carlo (MCMC) simulation.
It results in posterior samples of the model parameters.
</p>
</li>
<li> <p><code>mig.predict</code>: Using the posterior parameter samples, trajectories of future
net migration rates are generated for all countries or given locations.
</p>
</li>
</ul>
<p>The following functions can be used to analyze results:
</p>

<ul>
<li> <p><code>mig.trajectories.plot</code>: Shows the posterior trajectories for a given location, including the median and given probability intervals.
</p>
</li>
<li> <p><code>mig.trajectories.table</code>: Shows a tabular form of the posterior trajectories for a given location.
</p>
</li>
<li> <p>mig.map, mig.ggmap and mig.map.gvis: Show a world map of migration rates
for a given projection or observed period, or for country-specific parameter estimates.
</p>
</li>
<li> <p><code>mig.partraces.plot</code> and <code>mig.partraces.cs.plot</code>: Plot the MCMC traces
of country-independent parameters and country-specific parameters, respectively.
</p>
</li>
<li> <p><code>mig.pardensity.plot</code> and <code>mig.pardensity.cs.plot</code>: Plot the posterior density of the
country-independent parameters and country-specific parameters, respectively.
</p>
</li>
<li> <p><code>summary.bayesMig.mcmc.set</code>: Summary method for the MCMC results.
</p>
</li>
<li> <p><code>summary.bayesMig.prediction</code>: Summary method for the prediction results.
</p>
</li>
</ul>
<p>For MCMC diagnostics, function <code>mig.coda.list.mcmc</code> creates an object of type
“mcmc.list” that can be used with the <span class="pkg">coda</span> package.
Furthermore, function <code>mig.diagnose</code> analyzes the MCMCs using the
Raftery diagnostics implemented in the <span class="pkg">coda</span> package and gives information
about parameters that did not converge.
</p>
<p>Existing results can be accessed using the <code>get.mig.mcmc</code> (estimation) and
<code>get.mig.prediction</code> (prediction) functions.
Existing convergence diagnostics can be accessed using the <code>get.mig.convergence</code> and
<code>get.mig.convergence.all</code> functions.
</p>
<p>Historical data on migration rates are taken from the <span class="pkg">wpp2019</span> (default), <span class="pkg">wpp2022</span> or <span class="pkg">wpp2017</span> package,
depending on users settings. Alternatively, users can input their own data. These can be either
5-year or annual time series. An example file with historical annual US migration rates is included
in the package. Its usage is shown in the Example of <code>mig.predict</code>.
</p>


<h3>Note</h3>

<p>As this package has been designed for simulating migration on a national level, many
functions use arguments and terminology related to countries. However, a “country”
is to be interpreted as any location included in the simulation.
</p>


<h3>Author(s)</h3>

<p>Jon Azose, Hana Sevcikova and Adrian Raftery
</p>
<p>Maintainer: Hana Sevcikova <a href="mailto:hanas@uw.edu">hanas@uw.edu</a>
</p>


<h3>References</h3>

<p>Azose, J. J., &amp; Raftery, A. E. (2015).
Bayesian probabilistic projection of international migration. Demography, 52(5), 1627-1650.
<a href="https://doi.org/10.1007/s13524-015-0415-0">doi:10.1007/s13524-015-0415-0</a>.
</p>
<p>Azose, J.J., Ševčíková, H., Raftery, A.E. (2016): Probabilistic population projections with migration uncertainty.
Proceedings of the National Academy of Sciences 113:6460–6465. <a href="https://doi.org/10.1073/pnas.1606119113">doi:10.1073/pnas.1606119113</a>.
</p>


<h3>Examples</h3>

<pre><code class="language-R">
# Run a real simulation (can take long time)
sim.dir &lt;- tempfile()
m &lt;- run.mig.mcmc(nr.chains = 4, iter = 10000, thin = 10, output.dir = sim.dir,
        verbose.iter = 1000)

# Prediction for all countries 
# (use argument save.as.ascii for passing predictions into bayesPop)
pred &lt;- mig.predict(sim.dir = sim.dir, nr.traj = 1000, burnin = 1000)

# Explore results
summary(pred, country = "Germany")
mig.trajectories.plot(pred, country = "Germany", nr.traj = 50)

# Check convergence diagnostics
mig.diagnose(sim.dir, burnin = 4000, thin = 1)

unlink(sim.dir, recursive = TRUE)
# For annual projections on sub-national level, see ?mig.predict.


</code></pre>


</div>