<div class="container">

<table style="width: 100%;"><tr>
<td>FixCMRdata</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>
Fix issues on CMR input data for BaSTA.
</h2>

<h3>Description</h3>

<p>This function provides general fixes to common issues of capture-mark-recapture (CMR) data.
</p>


<h3>Usage</h3>

<pre><code class="language-R">FixCMRdata(object, studyStart, studyEnd, autofix = rep(0, 6), 
                       silent = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>object </code></td>
<td>
<p>A data.frame to be used as an input data file for BaSTA for <code>dataType =</code> “<code>CMR</code>”. The first column is the individual's ID, the second and third columns are birth and death years respectively. Columns 4 to <code>nt+3</code> represent the observation window of nt years. This is followed (optionally) by columns for covariate. </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code> studyStart </code></td>
<td>
<p>An integer indicating the first year of the study.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>studyEnd </code></td>
<td>
<p>An integer indicating the last year of the study.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>autofix </code></td>
<td>
<p>A vector argument with a length of 6 indicating whether to automatically fix any errors (see <code>details</code>). This should be used with extreme caution. We recommend going back to the individual-based data and fixing each error “by hand”.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>silent </code></td>
<td>
<p>A logical argument indicating whether to print a detailed report to the screen or not.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>Argument <code>autofix</code> allows the user to fix the potential errors by specifying a code for each fix. Below are the descriptions of the actions that are taken depending on the error type and the fix code:
</p>
<p>Type 1: 0 = do nothing; 1 = remove from dataframe.
</p>
<p>Type 2: 0 = do nothing; 1 = remove from dataframe.
</p>
<p>Type 3: 0 = do nothing; 1 = replace death records with 0; 2 = replace birth records with 0; 3 = replace both birth and death records with 0.
</p>
<p>Type 4: 0 = do nothing; 1 = remove spurious post-death observations.
</p>
<p>Type 5: 0 = do nothing; 1 = remove observations that pre-date year of birth.
</p>
<p>Type 6: 0 = do nothing; 1 = replace birth year element of observation matrix with 0.
</p>


<h3>Value</h3>

<p>For <code>dataType</code> = “<code>CMR</code>”:
</p>
<table>
<tr style="vertical-align: top;">
<td><code>newData </code></td>
<td>
<p>A corrected data frame.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>type1 </code></td>
<td>
<p>A vector of row numbers in the original data frame where there are deaths occurring before the study starts.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>type2 </code></td>
<td>
<p>A vector of row numbers in the original data frame where there are no birth/death AND no obervations.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>type3 </code></td>
<td>
<p>A vector of row numbers in the original data frame where there are births recorded after death.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>type4 </code></td>
<td>
<p>A vector of row numbers in the original data frame where there are observations (i.e. recaptures) after death.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>type5 </code></td>
<td>
<p>A vector of row numbers in the original data frame where there are observations (i.e. recaptures) before birth.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>type6 </code></td>
<td>
<p>A vector of row numbers in the original data frame where the year of birth is not a zero in the recapture matrix.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>stopExec </code></td>
<td>
<p>Logical that indicates if the data are free of errors or not. i.e. <code>TRUE</code> = the data have no apparent errors, and <code>FALSE</code> = there is at leat one error.</p>
</td>
</tr>
</table>
<h3>Author(s)</h3>

<p>Fernando Colchero <a href="mailto:fernando_colchero@eva.mpg.de">fernando_colchero@eva.mpg.de</a></p>


<h3>See Also</h3>

<p><code>DataCheck</code> for running a data check on the input data for function <code>basta</code>.</p>


<h3>Examples</h3>

<pre><code class="language-R">## Load data:
data("bastaCMRdat", package = "BaSTA")

## Fix data:
fixedData  &lt;- FixCMRdata(bastaCMRdat, studyStart = 51, 
                          studyEnd = 70, autofix = rep(1, 6))
</code></pre>


</div>