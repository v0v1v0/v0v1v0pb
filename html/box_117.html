<div class="container">

<table style="width: 100%;"><tr>
<td>importing</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Import a module or package</h2>

<h3>Description</h3>

<p>Actual implementation of the import process
</p>


<h3>Usage</h3>

<pre><code class="language-R">use_one(declaration, alias, caller, use_call)

load_and_register(spec, info, caller)

register_as_import(spec, info, mod_ns, caller)

defer_import_finalization(spec, info, mod_ns, caller)

finalize_deferred(info)

export_and_attach(spec, info, mod_ns, caller)

load_from_source(info, mod_ns)

load_mod(info)

mod_exports(info, spec, mod_ns)

mod_export_names(info, mod_ns)

attach_to_caller(spec, info, mod_exports, mod_ns, caller)

attach_list(spec, exports)

assign_alias(spec, mod_exports, caller)

assign_temp_alias(spec, caller)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>declaration</code></td>
<td>
<p>an unevaluated use declaration expression without the
surrounding <code>use</code> call</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>alias</code></td>
<td>
<p>the use alias, if given, otherwise <code>NULL</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>caller</code></td>
<td>
<p>the client’s calling environment (parent frame)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>use_call</code></td>
<td>
<p>the <code>use</code> call which is invoking this code</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>spec</code></td>
<td>
<p>a module use declaration specification</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>info</code></td>
<td>
<p>the physical module information</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>mod_ns</code></td>
<td>
<p>the module namespace environment of the newly loaded module</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p><code>use_one</code> performs the actual import. It is invoked by <code>use</code> given
the calling context and unevaluated expressions as arguments, and only uses
standard evaluation.
</p>
<p><code>load_and_register</code> performs the loading, attaching and exporting of a
module identified by its spec and info.
</p>
<p><code>register_as_import</code> registers a <code>use</code> declaration in the calling
module so that it can be found later on, if the declaration is reexported by
the calling module.
</p>
<p><code>defer_import_finalization</code> is called by <code>load_and_register</code> to
earmark a module for deferred initialization if it hasn’t been fully loaded
yet.
</p>
<p><code>finalize_deferred</code> exports and attaches names from a module use
declaration which has been deferred due to being part of a cyclic loading
chain.
</p>
<p><code>export_and_attach</code> exports and attaches names from a given module use
declaration.
</p>
<p><code>load_from_source</code> loads a module source file into its newly created,
empty module namespace.
</p>
<p><code>load_mod</code> tests whether a module or package was already loaded and, if
not, loads it.
</p>
<p><code>mod_exports</code> returns an export environment containing a copy of the
module’s exported objects.
</p>
<p><code>attach_to_caller</code> attaches the listed names of an attach specification
for a given use declaration to the calling environment.
</p>
<p><code>assign_alias</code> creates a module/package object in calling environment,
unless it contains an attach declaration, and no explicit alias is given.
</p>
<p><code>assign_temp_alias</code> creates a placeholder object for the module in the
calling environment, to be replaced by the actual module export environment
once the module is completely loaded (which happens in the case of cyclic
imports).
</p>


<h3>Value</h3>

<p><code>use_one</code> does not currently return a value. — This might change
in the future.
</p>
<p><code>load_mod</code> returns the module or package namespace environment
of the specified module or package info.
</p>
<p><code>mod_exports</code> returns an export environment containing the
exported names of a given module.
</p>
<p><code>mode_export_names</code> returns a vector containing the same names as
<code>names(mod_exports(info, spec, mod_ns))</code> but does not create an export
environment.
</p>
<p><code>attach_list</code> returns a named character vector of the names in
an attach specification. The vector’s names are the aliases, if provided, or
the attach specification names themselves otherwise.
</p>


<h3>Note</h3>

<p>If a module is still being loaded (because it is part of a cyclic
import chain), <code>load_and_register</code> earmarks the module for deferred
registration and holds off on attaching and exporting for now, since not all
its names are available yet.
</p>


</div>