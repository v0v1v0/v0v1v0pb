<div class="container">

<table style="width: 100%;"><tr>
<td>FBM.code256-class</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Class FBM.code256</h2>

<h3>Description</h3>

<p>A reference class for storing and accessing up to 256 arbitrary different
values using a Filebacked Big Matrix of type <code style="white-space: pre;">⁠unsigned char⁠</code>. Compared to a
Filebacked Big Matrix, it adds a slot <code>code</code> which is used as
a lookup table of size 256.
</p>


<h3>Usage</h3>

<pre><code class="language-R">FBM.code256(
  nrow,
  ncol,
  code = rep(NA_real_, 256),
  init = NULL,
  backingfile = tempfile(tmpdir = getOption("FBM.dir")),
  create_bk = TRUE,
  is_read_only = FALSE
)

add_code256(x, code)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>nrow</code></td>
<td>
<p>Number of rows.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ncol</code></td>
<td>
<p>Number of columns.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>code</code></td>
<td>
<p>A numeric vector (of length 256).
You should construct it with <code>rep(NA_real_, 256)</code> and then replace the values
which are of interest to you.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>init</code></td>
<td>
<p>Either a single value (e.g. <code>0</code>) or as many value as the number
of elements of the FBM. <strong>Default doesn't initialize the matrix.</strong></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>backingfile</code></td>
<td>
<p>Path to the file storing the FBM data on disk.
<strong>An extension ".bk" will be automatically added.</strong> Default stores in the
temporary directory, which you can change using global option "FBM.dir".</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>create_bk</code></td>
<td>
<p>Whether to create a backingfile (the default) or use an
existing one (which should be named by the <code>backingfile</code> parameter and have
an extension ".bk"). For example, this could be used to convert a
filebacked <code>big.matrix</code> from package <strong>bigmemory</strong> to a FBM
(see <a href="https://privefl.github.io/bigstatsr/articles/bigstatsr-and-bigmemory.html">the corresponding vignette</a>).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>is_read_only</code></td>
<td>
<p>Whether the FBM is read-only? Default is <code>FALSE</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>A FBM.</p>
</td>
</tr>
</table>
<h3>Examples</h3>

<pre><code class="language-R">X &lt;- FBM(10, 10, type = "raw")
X[] &lt;- sample(as.raw(0:3), size = length(X), replace = TRUE)
X[]

# From an FBM of type 'raw' ('unsigned char')
code &lt;- rep(NA_real_, 256)
code[1:3] &lt;- c(1, 3, 5)

X.code &lt;- add_code256(X, code)
X.code[]

# Or directly
X.code2 &lt;- FBM.code256(10, 10, code, init = sample(as.raw(0:3), 100, TRUE))
X.code2[]

# Get a new FBM.code256 object with another code (but same underlying data)
X.code3 &lt;- X.code$copy(code = rnorm(256))
all.equal(X.code$code256, code)

</code></pre>


</div>