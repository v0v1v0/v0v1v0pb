<div class="container">

<table style="width: 100%;"><tr>
<td>Atlas Helpers</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Atlas helper functions</h2>

<h3>Description</h3>

<p><code>guess_atlas</code> tries to determine which atlas is being used based on the
data; i.e., the number of vertices/regions.
</p>
<p><code>as_atlas</code> and <code>create_atlas</code> converts/coerces an object to a
a <code>data.table</code>, or creates one, that is compatible with
<code>brainGraph</code>.
</p>


<h3>Usage</h3>

<pre><code class="language-R">guess_atlas(x)

as_atlas(object)

create_atlas(regions, coords, lobes, hemis, other = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>x, object</code></td>
<td>
<p>An object to test or convert to an atlas data.table</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>regions</code></td>
<td>
<p>Character vector of region names</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>coords</code></td>
<td>
<p>Numeric matrix of spatial coordinates; must have 3 columns</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>lobes</code></td>
<td>
<p>Character or factor vector of lobe membership</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>hemis</code></td>
<td>
<p>Character or factor vector of hemisphere membership. There
should probably not be more than 3 unique elements (for left, right, and
bi-hemispheric regions)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>other</code></td>
<td>
<p>A <em>named list</em> of vectors with other data. The names of the
list will become column names in the return object.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p><code>guess_atlas</code> - Character string; either the matched atlas or
<code>NA</code>
</p>
<p><code>as_atlas</code> and <code>create_atlas</code> return a <code>data.table</code>
that conforms to other atlases in the package, or exits with an error.
</p>


<h3>Guessing the atlas from an object</h3>

<p>There are several valid inputs to <code>guess_atlas</code>:
</p>

<dl>
<dt>data.table</dt>
<dd>
<p>The atlas will be guessed based on the number of columns
(subtracting by 1 if a “Study ID” column is present). This is the
same behavior as for <code>data.frame</code> objects, as well.</p>
</dd>
<dt>igraph</dt>
<dd>
<p>The vertex count</p>
</dd>
<dt>brainGraph</dt>
<dd>
<p>If there is a <code>atlas</code> graph-level attribute, it will
return that. Otherwise, the vertex count.</p>
</dd>
<dt>matrix,array</dt>
<dd>
<p>The number of rows, which should equal the number of
columns if the input is a connectivity matrix.</p>
</dd>
</dl>
<p>Note that this will only work properly for atlases that are currently in the
package. If you are using a custom atlas and you receive errors, please open
an issue on <em>GitHub</em>.
</p>


<h3>Coercing to an atlas</h3>

<p>There are several things <code>as_atlas</code> tries to do to make it work without
error:
</p>

<ul>
<li>
<p> Coerce the object to <code>data.table</code>
</p>
</li>
<li>
<p> Add a column of integers named <code>index</code>
</p>
</li>
<li>
<p> Change columns named <code>'x'</code>, <code>'y'</code>, or <code>'z'</code> to have
<code>.mni</code> at the end
</p>
</li>
<li>
<p> Convert the <code>lobe</code> and <code>hemi</code> columns to be <em>factors</em>
</p>
</li>
</ul>
<h3>Examples</h3>

<pre><code class="language-R">my_atlas &lt;- data.frame(name=paste('Region', 1:10), x.mni=rnorm(10),
  y.mni=rnorm(10), z.mni=rnorm(10),
  lobe=rep(c('Frontal', 'Parietal', 'Temporal', 'Occipital', 'Limbic'), 2),
  hemi=c(rep('L', 5), rep('R', 5)))
my_atlas2 &lt;- as_atlas(my_atlas)
str(my_atlas)
str(my_atlas2)
regions &lt;- paste('Region', 1:10)
xyz &lt;- matrix(rnorm(30), nrow=10, ncol=3)
lobe &lt;- rep(c('Frontal', 'Parietal', 'Temporal', 'Occipital', 'Limbic'), 2)
hemi &lt;- c(rep('L', 5), rep('R', 5))
other &lt;- list(network=rep(c('Default mode', 'Task positive'), 5))
my_atlas &lt;- create_atlas(regions, xyz, lobe, hemi, other)
str(my_atlas)
</code></pre>


</div>