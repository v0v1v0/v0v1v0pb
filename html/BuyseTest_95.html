<div class="container">

<table style="width: 100%;"><tr>
<td>S4BuyseTest-summary</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Summary Method for Class "S4BuyseTest"</h2>

<h3>Description</h3>

<p>Summarize the results from the <code>BuyseTest</code> function.
</p>


<h3>Usage</h3>

<pre><code class="language-R">## S4 method for signature 'S4BuyseTest'
summary(
  object,
  print = TRUE,
  percentage = TRUE,
  statistic = NULL,
  conf.level = NULL,
  strata = NULL,
  type.display = 1,
  digit = c(2, 4, 5),
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>object</code></td>
<td>
<p>output of <code>BuyseTest</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>print</code></td>
<td>
<p>[logical] Should the results be displayed in the console?</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>percentage</code></td>
<td>
<p>[logical] Should the percentage of pairs of each type be displayed ? Otherwise the number of pairs is displayed.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>statistic</code></td>
<td>
<p>[character] the statistic summarizing the pairwise comparison:
<code>"netBenefit"</code> displays the net benefit, as described in Buyse (2010) and Peron et al. (2016)),
<code>"winRatio"</code> displays the win ratio, as described in Wang et al. (2016),
<code>"favorable"</code> displays the proportion in favor of the treatment (also called Mann-Whitney parameter), as described in Fay et al. (2018).
<code>"unfavorable"</code> displays the proportion in favor of the control.
Default value read from <code>BuyseTest.options()</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>conf.level</code></td>
<td>
<p>[numeric] confidence level for the confidence intervals.
Default value read from <code>BuyseTest.options()</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>strata</code></td>
<td>
<p>[logical] should the strata-specific results be displayed or the results pooled across strata?
Can also be <code>NULL</code> to display both.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>type.display</code></td>
<td>
<p>[numeric or character] the results/summary statistics to be displayed.
Either an integer indicating refering to a type of display in <code>BuyseTest.options()</code>
or the name of the column to be output (e.g. <code>c("strata","Delta","p.value")</code>).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>digit</code></td>
<td>
<p>[integer vector] the number of digit to use for printing the counts and the delta.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>arguments to be passed to <code>S4BuyseTest-confint</code></p>
</td>
</tr>
</table>
<h3>Details</h3>

<p><b>Content of the output</b> <br>
The "results" table in the output show the result of the GPC at each endpoint, as well as its contribution to the global statistics.
More precisely, the column:
</p>

<ul>
<li> <p><code>endpoint</code> lists the endpoints, by order of priority.
</p>
</li>
<li> <p><code>threshold</code> lists the threshold associated to each endpoint.
</p>
</li>
<li> <p><b>weight:</b> lists the weight of each priority.
</p>
</li>
<li> <p><b>strata:</b> list the strata relative to which the results of the priority are displayed. If <code>"global"</code>, then the results are over all strata at a given priority.
</p>
</li>
<li> <p><code>total</code> (or <code>total(%)</code>) lists the number (or percentage) of pairs to be analyzed at the current priority (or strata).
</p>
</li>
<li> <p><code>favorable</code> (or <code>favorable(%)</code>) lists the number (or percentage) of pairs classified in favor of the treatment group at the current priority (or strata).
</p>
</li>
<li> <p><code>unfavorable</code> (or <code>unfavorable(%)</code>) lists the number (or percentage) of pairs classified in favor of the control group at the current priority (or strata).
</p>
</li>
<li> <p><code>neutral</code> (or <code>neutral(%)</code>) lists the number (or percentage) of pairs classified as neither in favor of the treatment group nor in favor of the control group at the current priority (or strata).
</p>
</li>
<li> <p><code>uninf</code> (or <code>uninf(%)</code>) lists the number (or percentage) of pairs that could not be classified at the current priority (or strata) due to missing values/censoring.
</p>
</li>
<li> <p><code>delta</code> lists the value of the priority-specific statistic (e.g. net benefit or win ratio), i.e. computed on the pairs analyzed at the current priority only.
</p>
</li>
<li> <p><code>Delta</code> lists the value of the cumulative statistic (e.g. net benefit or win ratio), i.e. computed on all the pairs analyzed up to the current priority.
</p>
</li>
<li> <p><code>Delta(%)</code> lists the relative statistic (i.e. statistic up to the current priority divided by the final statistic).
</p>
</li>
<li> <p><code>information(%)</code> lists the information fraction (i.e. number of favorable and unfavorable pairs up to the current priority divided by the final number of favorable and unfavorable pairs).
</p>
</li>
<li> <p><code>CI</code> lists the confidence intervals for <code>Delta</code> (not adjusted for multiple comparison).
</p>
</li>
<li> <p><code>null</code> lists the null hypothesis (<code>Delta=null</code>).
</p>
</li>
<li> <p><code>p.value</code> p-value relative to the null hypothesis (not adjusted for multiple comparison).
</p>
</li>
<li> <p><code>resampling</code> number of samples used to compute the confidence intervals or p-values from permutations or bootstrap samples.
Only displayed if some bootstrap samples have been discarded, for example, they did not lead to sample any case or control.
</p>
</li>
</ul>
<p>Note: when using the Peron scoring rule or a correction for uninformative pairs, the columns <code>total</code>, <code>favorable</code>, <code>unfavorable</code>, <code>neutral</code>, and <code>uninf</code> are computing by summing the contribution of the pairs. This may lead to a decimal value.
</p>
<p><b>Statistic</b>: when considering a single endpoint and denoting
<code class="reqn">Y</code> the endpoint in the treatment group,
<code class="reqn">X</code> the endpoint in the control group,
and <code class="reqn">\tau</code> the threshold of clinical relevance,
the net benefit is <code class="reqn">P[Y \ge X + \tau] - P[X \ge Y + \tau]</code>,
the win ratio is <code class="reqn">\frac{P[Y \ge X + \tau]}{P[X \ge Y + \tau]}</code>,
the proportion in favor of treatment is <code class="reqn">P[Y \ge X + \tau]</code>,
the proportion in favor of control is <code class="reqn">P[X \ge Y + \tau]</code>.
</p>
<p><b>Statistical inference</b> <br>
When the interest is in obtaining p-values, we recommand the use of a permutation test.
However, when using a permutation test confidence intervals are not displayed in the summary.
This is because there is no (to the best of our knowledge) straightforward way to obtain good confidence intervals with permutations. 
An easy way consist in using the quantiles of the permutation distribution and then shift by the point estimate of the statistic.
This is what is output by <code>S4BuyseTest-confint</code>.
However this approach leads to a much too high coverage when the null hypothesis is false.
The limits of the confidence interval can also end up being outside of the interval of definition of the statistic
(e.g. outside [-1,1] for the proportion in favor of treatment).
Therefore, for obtaining confidence intervals, we recommand the boostrap method or the u-statistic method.
</p>
<p><b>Win ratio</b> <br>
For the win ratio, the proposed implementation enables the use of thresholds and endpoints that are not time to events
as well as the correction proposed in Peron et al. (2016) to account for censoring. 
These development have not been examined by Wang et al. (2016), or in other papers (to the best of our knowledge).
They are only provided here by implementation convenience.
</p>
<p><b>Competing risks</b> <br>
In presence of competing risks, looking at the net benefit/win ratio computed with respect to the event of interest
will likely not give a full picture of the difference between the two groups.
For instance a treatment may decrease the risk of the event of interest (i.e. increase the net benefit for this event)
by increasing the risk of the competing event. If the competing event is death, this is not desirable. It is therefore advised to
taking into consideration the risk of the competing event, e.g. by re-running BuyseTest where cause 1 and 2 have been inverted.
</p>


<h3>Author(s)</h3>

<p>Brice Ozenne
</p>


<h3>References</h3>

<p>On the GPC procedure: Marc Buyse (2010). <b>Generalized pairwise comparisons of prioritized endpoints in the two-sample problem</b>. <em>Statistics in Medicine</em> 29:3245-3257 <br>
On the win ratio: D. Wang, S. Pocock (2016). <b>A win ratio approach to comparing continuous non-normal outcomes in clinical trials</b>. <em>Pharmaceutical Statistics</em> 15:238-245 <br>
On the Mann-Whitney parameter: Fay, Michael P. et al (2018). <b>Causal estimands and confidence intervals asscoaited with Wilcoxon-Mann-Whitney tests in randomized experiments</b>. <em>Statistics in Medicine</em> 37:2923-2937.
</p>


<h3>See Also</h3>

<p><code>BuyseTest</code> for performing a generalized pairwise comparison. <br><code>S4BuyseTest-model.tables</code> to obtain the table displayed at the end of the summary method in a <code>data.frame</code> format.
<code>S4BuyseTest-confint</code> to output estimate, standard errors, confidence interval and p-values.
<code>S4BuyseTest-plot</code> for a graphical display of the scoring of the pairs.
<code>BuyseMultComp</code> for efficient adjustment for multiple comparisons.
</p>


<h3>Examples</h3>

<pre><code class="language-R">library(data.table)

dt &lt;- simBuyseTest(1e2, n.strata = 3)

 ## Not run: 
 BT &lt;- BuyseTest(treatment ~ TTE(eventtime, status = status) + Bin(toxicity), data=dt)
 
## End(Not run)
 
 summary(BT)
 summary(BT, percentage = FALSE)
 summary(BT, statistic = "winRatio")

</code></pre>


</div>