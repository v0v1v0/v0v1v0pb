<div class="container">

<table style="width: 100%;"><tr>
<td>ReshapeData</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Reshape right censored data to be used with a piecewise exponential
prior.</h2>

<h3>Description</h3>

<p>To draw from the posterior of the piecewise exponential priors implemented
in this package, it is convenient to convert the data so that two vectors
are obtained: one containing the total amount of time all individuals
were under follow-up during each interval, and one containing the
number of events that happened during each interval. This function takes
a dataframe with a column of times (the minimum of the time of the event
and the time of censoring) and a column indicating the status (0 if censored,
1 if the event was observed) and reshapes it into the desired format. Most
users will not use this function directly, but will instead use the main
function BayesSurv, which uses the present function.
</p>


<h3>Usage</h3>

<pre><code class="language-R">ReshapeData(
  df,
  time = "time",
  event = "event",
  K = ceiling((dim(df)[1]/log(dim(df)[1]))^(1/2)),
  time.max = max(df[[time]])
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>df</code></td>
<td>
<p>A dataframe, containing at minimum a column with follow-up times
and a column with a status indicator (event observed or censored).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>time</code></td>
<td>
<p>The name of the column in the dataframe containing the (possibly
right-censored) follow-up times, that is, the minimum of the time of the
event and the time of censoring. Input the name as character/string.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>event</code></td>
<td>
<p>The name of the column in the dataframe containing the status
indicator, which must be coded as: 0 = censored, 1 = event observed. Input
the name as character/string.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>K</code></td>
<td>
<p>The number of intervals to be used in the piecewise exponential
(histogram) prior. Default is set to <code class="reqn">K = (n / \log{n})^{1/2}</code>, with
<code class="reqn">n</code> the number of observations, as recommended by Castillo and Van der
Pas (2020).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>time.max</code></td>
<td>
<p>The maximum follow-up time to consider, corresponding to the
parameter <code class="reqn">tau</code> in Castillo and Van der Pas (2020).</p>
</td>
</tr>
</table>
<h3>Value</h3>

<table>
<tr style="vertical-align: top;">
<td><code>failures</code></td>
<td>
<p>A vector of length <code class="reqn">K</code>, containing for each
interval the number of individuals who had an event during that interval.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>exposures</code></td>
<td>
<p>A vector of length <code class="reqn">K</code>, containing for each interval
the total amount of time all individuals together were under follow-up
during that interval.</p>
</td>
</tr>
</table>
<h3>References</h3>

<p>Castillo and Van der Pas (2020). Multiscale Bayesian survival
analysis. &lt;arXiv:2005.02889&gt;.
</p>


<h3>See Also</h3>

<p>BayesSurv, which computes the posterior mean and the
radius of the credible band for the cumulative hazard function as
well as the survival, and the posterior mean for the hazard. These objects
can then be visualized by using PlotBayesSurv.
</p>


</div>