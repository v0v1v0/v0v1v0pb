<div class="container">

<table style="width: 100%;"><tr>
<td>topmod</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Topmodel Object</h2>

<h3>Description</h3>

<p>Create or use an updateable list keeping the best x models it encounters
(for advanced users)
</p>


<h3>Usage</h3>

<pre><code class="language-R">topmod(
  nbmodels,
  nmaxregressors = NA,
  bbeta = FALSE,
  lengthfixedvec = 0,
  liks = numeric(0),
  ncounts = numeric(0),
  modelbinaries = matrix(0, 0, 0),
  betas = matrix(0, 0, 0),
  betas2 = matrix(0, 0, 0),
  fixed_vector = matrix(0, 0, 0)
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>nbmodels</code></td>
<td>
<p>The maximum number of models to be retained by the topmod
object</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>nmaxregressors</code></td>
<td>
<p>The maximum number of covariates the models in the
topmod object are allowed to have</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>bbeta</code></td>
<td>
<p>if <code>bbeta=TRUE</code>, then first and second moments of model
coefficients are stored in addition to basic model statistics (Note: if
<code>bbeta&lt;0</code> then only the first moments are saved)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>lengthfixedvec</code></td>
<td>
<p>The length of an optional fixed vector adhering to
each model (for instance R-squared, etc). If <code>lengthfixedvec=0</code> then no
additonal fixed vector will be stored.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>liks</code></td>
<td>
<p>optional vector of log-likelihoods to initialize topmod object
with (length must be <code>&lt;=nbmodels</code>) - see example below</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ncounts</code></td>
<td>
<p>optional vector of MCMC frequencies to initialize topmod
object with (same length as <code>liks</code>) - see example below</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>modelbinaries</code></td>
<td>
<p>optional matrix whose columns detail model binaries to
initialize topmod object with (same nb columns as <code>liks</code>, nb rows as
<code>nmaxregressors</code>) - see example below</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>betas</code></td>
<td>
<p>optional matrix whose columns are coefficients to initialize
topmod object with (same dimensions as <code>modelbinaries</code>) - see example
below</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>betas2</code></td>
<td>
<p>optional matrix whose columns are coefficients' second moments
to initialize topmod object with (same dimensions as <code>modelbinaries</code>) -
see example below</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>fixed_vector</code></td>
<td>
<p>optional matrix whose columns are a fixed vector
initialize topmod object with (same <code>ncol</code> as <code>modelbinaries</code>) -
see example below</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>A 'topmod' object (as created by <code>topmod</code>) holds three basic vectors:
<code>lik</code> (for the (log) likelihood of models or similar), <code>bool()</code>
for a hexcode presentation of the model binaries (cf. <code>bin2hex</code>)
and ncount() for the times the models have been drawn.<br> All these vectors
are sorted descendantly by <code>lik</code>, and are of the same length. The
maximum length is limited by the argument <code>nbmodels</code>.
</p>
<p>If <code>tmo</code> is a topmod object, then a call to <code>tmo$addmodel</code> (e.g.
<code>tmo$addmodel(mylik=4,vec01=c(T,F,F,T))</code> updates the object <code>tmo</code>
by a model represented by <code>vec01</code> (here the one including the first and
fourth regressor) and the marginal (log) likelihood <code>lik</code> (here: 4).
</p>
<p>If this model is already part of <code>tmo</code>, then its respective
<code>ncount</code> entry is incremented by one; else it is inserted into a
position according to the ranking of <code>lik</code>.
</p>
<p>In addition, there is the possibility to save (the first moments of)
coefficients of a model (<code>betas</code>) and their second moments
(<code>betas2</code>), as well as an arbitrary vector of statistics per model
(<code>fixed_vector</code>).
</p>
<p><code>is.topmod</code> returns <code>TRUE</code> if the argument is of class 'topmod'
</p>


<h3>Value</h3>

<p>a call to <code>topmod</code> returns a list of class "topmod" with the
following elements:
</p>
<table>
<tr style="vertical-align: top;">
<td><code>addmodel(mylik,vec01,vbeta=numeric(0),vbeta2=numeric(0),fixedvec=numeric(0))</code></td>
<td>
<p>function
that adjusts the list of models in the 'topmod' object (see Details).
<code>mylik</code> is the basic selection criterion (usually log likelihood),
<code>vec01</code> is the model binary (logical or numeric) indicating which
regressors are included.<br><code>vbeta</code> is a vector of length equal to
<code>sum(vec01)</code>, contianing only the non-zero coefficients (only accounted
for if <code>bbeta!=FALSE</code>). <code>vbeta2</code> is a similar vector of second
moments etc. (only accounted for if <code>bbeta=TRUE</code>); <code>fixedvec</code> is
an arbitrary vector of length <code>lengthfixedvec</code> (see above)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>lik()</code></td>
<td>
<p>A numeric vector of the best models (log) likelihoods, in
decreasing order</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>bool()</code></td>
<td>
<p>A character vector of hexmode expressions
for the model binaries (cf. <code>bin2hex</code>), sorted by <code>lik()</code> </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ncount()</code></td>
<td>
<p>A numeric vector of MCMC frequencies for the best models
(i.e. how often the respective model was introduced by <code>addmodel</code>)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>nbmodels</code></td>
<td>
<p>Returns the argument <code>nbmodel</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>nregs</code></td>
<td>
<p>Returns
the argument <code>nmaxregressors</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>bool_binary()</code></td>
<td>
<p>Returns a matrix
whose columns present the models conforming to <code>lik()</code> in binary form</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>betas()</code></td>
<td>
<p>a matrix whose columns are the coefficients conforming to
<code>bool_binary()</code> (Note that these include zero coefficients due to
non-inclusion of covariates); Note: if <code>bbeta=FALSE</code> this returns an
empty matrix</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>betas2()</code></td>
<td>
<p>similar to <code>betas</code> , for the second
moments of coefficients Note: if <code>bbeta&lt;=0</code>, this returns an empty
matrix</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>fixed_vector()</code></td>
<td>
<p>The columns of this matrix return the
<code>fixed_vector</code> statistics conforming to <code>lik()</code> (see Details);
Note: if <code>lengthfixedvec=0</code> this returns an empty matrix</p>
</td>
</tr>
</table>
<h3>Note</h3>

<p><code>topmod</code> is rather intended as a building block for programming;
it has no direct application for a user of the BMS package.
</p>


<h3>See Also</h3>

<p>the object resulting from <code>bms</code> includes an element of
class 'topmod'
</p>
<p>Check <a href="http://bms.zeugner.eu">http://bms.zeugner.eu</a> for additional help.
</p>


<h3>Examples</h3>

<pre><code class="language-R">
#standard use
  tm= topmod(2,4,TRUE,0) #should keep a  maximum two models
  tm$addmodel(-2.3,c(1,1,1,1),1:4,5:8) #update with some model
  tm$addmodel(-2.2,c(0,1,1,1),1:3,5:7) #add another model
  tm$addmodel(-2.2,c(0,1,1,1),1:3,5:7) #add it again -&gt; adjust ncount
  tm$addmodel(-2.5,c(1,0,0,1),1:2,5:6) #add another model
  
  #read out
  tm$lik()
  tm$ncount()
  tm$bool_binary()
  tm$betas()
  
  is.topmod(tm)
  
  #extract a topmod oobject only containing the second best model
  tm2=tm[2]
  
  
  
  #advanced: should return the same result as
  #initialize
  tm2= topmod(2,4,TRUE,0, liks = c(-2.2,-2.3), ncounts = c(2,1), 
          modelbinaries = cbind(c(0,1,1,1),c(1,1,1,1)), betas = cbind(0:3,1:4), 
          betas2 = cbind(c(0,5:7),5:8)) 

  #update 
  tm$addmodel(-2.5,c(1,0,0,1),1:2,5:6) #add another model
  
  #read out
  tm$lik()
  tm$ncount()
  tm$bool_binary()
  tm$betas()

</code></pre>


</div>