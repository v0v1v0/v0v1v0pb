<div class="container">

<table style="width: 100%;"><tr>
<td>filterEchoData</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>filterEchoData</h2>

<h3>Description</h3>

<p>With the function <code>filterEchoData</code> the echo data can be
filtered by several parameters. The function returns the filtered echo data.
</p>


<h3>Usage</h3>

<pre><code class="language-R">filterEchoData(
  echoData = NULL,
  timeRangeTargetTZ = NULL,
  targetTimeZone = "Etc/GMT0",
  protocolData = NULL,
  classSelection = NULL,
  classProbCutOff = NULL,
  altitudeRange_AGL = NULL,
  manualBlindTimes = NULL,
  echoValidator = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>echoData</code></td>
<td>
<p>dataframe with the echo data from the data list created by
the function <code>extractDBData</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>timeRangeTargetTZ</code></td>
<td>
<p>Character vector of length 2, with start and end of
time range, formatted as "%Y-%m-%d %H:%M". Echoes outside the time range will
be excluded.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>targetTimeZone</code></td>
<td>
<p>"Etc/GMT0" String specifying the target time zone.
Default is "Etc/GMT0".</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>protocolData</code></td>
<td>
<p>dataframe with the protocol data from the data list
created by the function <code>extractDBData</code> or a subset of it created by
the function <code>filterProtocolData</code>. Echoes not detected during the listed
protocols will be excluded.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>classSelection</code></td>
<td>
<p>character string vector with the classes that should
be included.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>classProbCutOff</code></td>
<td>
<p>numeric cutoff value for class probabilities. Echoes
with a lower class probability will be excluded.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>altitudeRange_AGL</code></td>
<td>
<p>numeric vector of length 2 with start and end of the
altitude range. Echoes outside the altitude range will be excluded.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>manualBlindTimes</code></td>
<td>
<p>dataframe with the manual blind times created by the
function <code>loadManualBlindTimes</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>echoValidator</code></td>
<td>
<p>logical, if set to TRUE, echoes labelled by the echo
validator as “non-bio scatterer” will be excluded. If set to FALSE, all
echoes are included.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>returns the filtered echo data in the same format as provided in the
parameter <code>echoData</code>.
</p>


<h3>Author(s)</h3>

<p>Fabian Hertner, <a href="mailto:fabian.hertner@swiss-birdradar.com">fabian.hertner@swiss-birdradar.com</a>;
Birgen Haest, <a href="mailto:birgen.haest@vogelwarte.ch">birgen.haest@vogelwarte.ch</a>
</p>


<h3>Examples</h3>

<pre><code class="language-R">## Not run: 
# Set server, database, and other input settings for data extraction
# ===========================================================================
  dbServer       = "MACHINE\\SERVERNAME"     # Set the name of your SQL server
  dbName         = "db_Name"                   # Set the name of your database
  dbDriverChar   = "SQL Server"                # Set either "SQL Server" or "PostgreSQL"
  mainOutputDir  = file.path(".", "results")
  radarTimeZone  = "Etc/GMT0"
  targetTimeZone = "Etc/GMT0"
  listOfRfFeaturesToExtract = c(167, 168)
  siteLocation   = c(47.494427, 8.716432)
  sunOrCivil     = "civil"
 
# Get data
# ===========================================================================
  dbData = extractDbData(dbDriverChar                   = dbDriverChar,
                         dbServer                       = dbServer, 
                         dbName                         = dbName, 
                         saveDbToFile                   = TRUE,
                         dbDataDir                      = mainOutputDir,
                         radarTimeZone                  = radarTimeZone,
                         targetTimeZone                 = targetTimeZone,
                         listOfRfFeaturesToExtract      = listOfRfFeaturesToExtract,
                         siteLocation                   = siteLocation, 
                         sunOrCivil                     = sunOrCivil)
                         
# Set input settings for filtering of the data
# ===========================================================================
  timeRangeData     = c("2021-01-15 00:00", "2021-01-31 00:00")
  classSelection    = c("passerine_type", "wader_type", "swift_type", 
                        "large_bird", "unid_bird", "bird_flock")
  classProbCutoff   = NULL
  altitudeRange     = c(50, 1000)
  data(manualBlindTimes)
  cManualBlindTimes = manualBlindTimes
  useEchoValidator  = FALSE

# Filter the echo data
# ===========================================================================
  filteredEchoData = filterEchoData(echoData           = dbData$echoData,
                                    timeRangeTargetTZ  = timeRangeData,
                                    targetTimeZone     = targetTimeZone,
                                    protocolData       - dbData$protocolData,
                                    classSelection     = classSelection, 
                                    classProbCutOff    = classProbCutoff, 
                                    altitudeRange_AGL  = altitudeRange, 
                                    manualBlindTimes   = cManualBlindTimes, 
                                    echoValidator      = useEchoValidator)   

## End(Not run)

</code></pre>


</div>