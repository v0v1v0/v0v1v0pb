<div class="container">

<table style="width: 100%;"><tr>
<td>predRes</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Evaluation of the prediction accuracy of a prediction model</h2>

<h3>Description</h3>

<p>This function computes several criteria to assess the prediction
accuracy of a prediction model.
</p>


<h3>Usage</h3>

<pre><code class="language-R">predRes(res, method, traindata, newdata, int.cv, int.cv.nfold = 5, time,
  trace = TRUE, ncores = 1)

## S3 method for class 'predRes'
plot(x, method, crit = c("C", "PE", "dC"),
  xlim, ylim, xlab, ylab, col,...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>res</code></td>
<td>
<p>an object of class '<code>resBMsel</code>' generated by <code>BMsel</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>method</code></td>
<td>
<p>methods for which prediction criteria are computed. If missing, all methods contained in <code>res</code> are computed.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>traindata</code></td>
<td>
<p>input <code>data.frame</code> used to compute the
<code>res</code> object. This object is mandatory.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>newdata</code></td>
<td>
<p>input <code>data.frame</code> not used to compute the
<code>res</code> object. This object is not mandatory (see Details section).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>int.cv</code></td>
<td>
<p>logical parameter indicating if a double
cross-validation process (2CV) should be performed to mimick an external
validation set.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>int.cv.nfold</code></td>
<td>
<p>number of folds for the double cross-validation. Considering a large value for <code>int.cv.nfold</code> should provide extremely large computation time. <code>int.cv.nfold</code> must not be considered when <code>int.cv = FALSE</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>time</code></td>
<td>
<p>time points to compute the prediction criteria.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>trace</code></td>
<td>
<p>logical parameter indicating if messages should be printed.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ncores</code></td>
<td>
<p>number of CPUs used (for the double cross-validation).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>an object of class '<code>predRes</code>' generated from <code>predRes</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>crit</code></td>
<td>
<p>parameter indicating the criterion for which the results will be printed (<code>C</code>: concordance via Uno's C-statistic, <code>PE</code>: prediction error via integrated Brier score and <code>dC</code>: delta Uno's C-statistic (for the interaction setting only)).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>xlim, ylim, xlab, ylab, col</code></td>
<td>
<p>usual parameters for plot.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>other paramaters for plot.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>To evaluate the accuracy of the selected models, three predictive accuracy measures are implemented: <br>
- the integrated Brier score (<code>PE</code>) to measure the overall prediction error of the prediction model. The time-dependent Brier score is a quadratic score based on the predicted time-dependent survival probability.<br>
- the Uno's C-statistic (<code>C</code>) to evaluate the discrimination of the prediction model. It's one of the least biased concordance statistic estimator in the presence of censoring (Uno et al., 2011).<br>
- the absolute difference of the treatment-specific Uno's C-statistics (<code>dC</code>) to evaluate the interaction strength of the prediction model (Ternes et al., 2016).<br>
For simulated datasets, the predictive accuracy metrics are also computed for the "oracle model" that is the unpenalized Cox proportional hazards model fitted to the active biomarkers only.
</p>


<h3>Value</h3>

<p>A <code>list</code> of the same length of the <code>time</code> considered. Each element of the list contains between 1 and 3 sublists depending on the chosen validation (i.e. training set [always computed], internal validation through double cross-validation (2CV) [if <code>int.cv</code> = <code>TRUE</code>] and/or external validation [if <code>newdata</code> is provided]). Each sublist is a <code>matrix</code> containing the predictive accuracy metrics of the implemented methods.
</p>


<h3>Author(s)</h3>

<p>Nils Ternes, Federico Rotolo, and Stefan Michiels<br>
Maintainer: Nils Ternes <a href="mailto:nils.ternes@yahoo.com">nils.ternes@yahoo.com</a>
</p>


<h3>References</h3>

<p>Ternes N, Rotolo F and Michiels S.
Empirical extensions of the lasso penalty to reduce
the false discovery rate in high-dimensional Cox regression models.
<em>Statistics in Medicine</em> 2016;35(15):2561-2573.
doi:<a href="http://onlinelibrary.wiley.com/doi/10.1002/sim.6927/abstract">10.1002/sim.6927</a><br>
Ternes N, Rotolo F, Heinze G and Michiels S.
Identification of biomarker-by-treatment interactions in randomized
clinical trials with survival outcomes and high-dimensional spaces.
<em>Biometrical journal</em>. In press.
doi:<a href="http://onlinelibrary.wiley.com/doi/10.1002/bimj.201500234/abstract">10.1002/bimj.201500234</a><br>
Uno H, Cai T, Pencina MJ, DAgostino RB and Wei LJ.
On the C-statistics for evaluating overall adequacy 
of risk prediction procedures with censored survival data.
<em>Statistics in Medicine</em> 2011;30:1105-1117.
doi:<a href="http://onlinelibrary.wiley.com/doi/10.1002/sim.4154/abstract">10.1002/sim.4154</a>
</p>


<h3>Examples</h3>

<pre><code class="language-R">########################################
# Simulated data set
########################################

## Low calculation time
  set.seed(654321)
  sdata &lt;- simdata(
    n = 500, p = 20, q.main = 3, q.inter = 0,
    prob.tt = 0.5, alpha.tt = 0,
    beta.main = -0.8,
    b.corr = 0.6, b.corr.by = 4,
    m0 = 5, wei.shape = 1, recr = 4, fu = 2,
    timefactor = 1)
  
  newdata &lt;- simdataV(
    traindata = sdata,
    Nvalid = 500
  )
   
  resBM &lt;- BMsel(
    data = sdata, 
    method = c("lasso", "lasso-pcvl"), 
    inter = FALSE, 
    folds = 5)
  
  predAcc &lt;- predRes(
    res = resBM,
    traindata = sdata,
    newdata = newdata,
    time = 1:5)
    
  plot(predAcc, crit = "C")

## Not run: 
## Moderate calculation time
  set.seed(123456)
  sdata &lt;- simdata(
    n = 500, p = 100, q.main = 5, q.inter = 5,
    prob.tt = 0.5, alpha.tt = -0.5,
    beta.main = c(-0.5, -0.2), beta.inter = c(-0.7, -0.4),
    b.corr = 0.6, b.corr.by = 10,
    m0 = 5, wei.shape = 1, recr = 4, fu = 2,
    timefactor = 1,
    active.inter = c("bm003", "bm021", "bm044", "bm049", "bm097"))

  resBM &lt;- BMsel(
    data = sdata, 
    method = c("lasso", "lasso-pcvl"), 
    inter = TRUE, 
    folds = 5)
  
  predAcc &lt;- predRes(
    res = resBM,
    traindata = sdata, 
    int.cv = TRUE, 
    time = 1:5, 
    ncores = 5)
  plot(predAcc, crit = "dC")

## End(Not run)

########################################
# Breast cancer data set
########################################

## Not run: 
  data(Breast)
  dim(Breast)
  
  set.seed(123456)
  resBM &lt;-  BMsel(
    data = Breast,
    x = 4:ncol(Breast),
    y = 2:1,
    tt = 3,
    inter = FALSE,
    std.x = TRUE,
    folds = 5,
    method = c("lasso", "lasso-pcvl"))

  summary(resBM)

  predAcc &lt;- predRes(
    res = resBM,
    traindata = Breast,
    time = 1:4,
    trace = TRUE)
  plot(predAcc, crit = "C")

## End(Not run)

########################################
########################################
</code></pre>


</div>