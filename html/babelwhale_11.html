<div class="container">

<table style="width: 100%;"><tr>
<td>run_auto_mount</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Run a containerised command with automatic mounting of files</h2>

<h3>Description</h3>

<p>Similar to <code>run()</code>, but automatically mounts files (and directories) so the
user doesn't have to keep track of volumes.
</p>


<h3>Usage</h3>

<pre><code class="language-R">run_auto_mount(
  container_id,
  command,
  args = NULL,
  wd = NULL,
  wd_in_container = NULL,
  environment_variables = NULL,
  debug = FALSE,
  verbose = FALSE,
  stdout = "|",
  stderr = "|"
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>container_id</code></td>
<td>
<p>The name of the container, usually the repository name on dockerhub.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>command</code></td>
<td>
<p>Character scalar, the command to run. If you are
running <code>.bat</code> or <code>.cmd</code> files on Windows, make sure you read the
'Batch files' section in the process manual page.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>args</code></td>
<td>
<p>Character vector, arguments to the command. Any files or
directories that should be mounted must be named "file" (see example).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>wd</code></td>
<td>
<p>Local working directory to run command. If specified, the working
directory will be mounted to the docker container.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>wd_in_container</code></td>
<td>
<p>Working directory to run command in
the container. Defaults to the working directory mounted to the container
(<code>wd</code>).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>environment_variables</code></td>
<td>
<p>A character vector of environment variables. Format: <code>c("ENVVAR=VALUE")</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>debug</code></td>
<td>
<p>If <code>TRUE</code>, a command will be printed that the user can execute to enter the container.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>verbose</code></td>
<td>
<p>Whether or not to print output</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>stdout</code></td>
<td>
<p>What to do with standard output of the command. Default (<code>"|"</code>) means to include it as an item in the results list.
If it is the empty string (<code>""</code>), then the child process inherits the standard output stream of the R process.
If it is a string other than <code>"|"</code> and <code>""</code>, then it is taken as a file name and the output is redirected to this file.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>stderr</code></td>
<td>
<p>What to do with standard error of the command. Default ("|") means to include it as an item in the results list.
If it is the empty string (<code>""</code>), then the child process inherits the standard error stream of the R process.
If it is a string other than <code>"|"</code> and <code>""</code>, then it is taken as a file name and the standard error is redirected to this file.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>The main difference to <code>run()</code> is that the use of names for the <code>args</code>; any
file (or directory) that should be mounted inside the container must be named
<code>file</code>. The other elements (arguments) don't need to be named. Note that it
is fine to have multiple elements with the same name (<code>file</code>).
</p>
<p>This should generally work as long as the command accepts absolute paths
for file input. If that is not the case, use <code>run()</code> instead and specify
paths and mounting manually.
</p>


<h3>Value</h3>

<p>List, formatted as output from <code>processx::run()</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">if (test_docker_installation()) {

# Count the number of lines in the DESCRIPTION and LICENSE
# files of this package
run_auto_mount(
  container_id = "alpine",
  command = "wc",
  args = c("-l",
    file = system.file("DESCRIPTION", package = "babelwhale"),
    file = system.file("LICENSE", package = "babelwhale")
  )
)

}
</code></pre>


</div>