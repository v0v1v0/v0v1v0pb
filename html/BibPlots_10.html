<div class="container">

<table style="width: 100%;"><tr>
<td>rpys_bl</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Create a spectrogram with bars and lines using data from the free software CRExplorer</h2>

<h3>Description</h3>

<p>Provide the contents of the CSV (Graph) file from the 'CRExplorer' in a data frame, e.g. df,
and the function call rpys_bl(df) creates a spectrogram. Previously, you should use
the function rpys for a plain line graph to determin the proper parameters, e.g., x_offset and x_range.
Determination of the proper x_offset and x_range is a bit tricky.
Usage of a wrong value of x_range will cause an error. Usage of a wrong value of x_offset will produce
a plot. However, the line for the median deviation and the bars might not be at the proper location.
First, adjust x_range if necessary, and second, adjust x_offset so that the x axis is properly aligned
with the line and bars. Comapare the plot from rpys_bl with your data and the plot from the function rpys.
The function rpys_bl takes some optional arguments to modify its behaviour, see arguments and details.
</p>


<h3>Usage</h3>

<pre><code class="language-R">rpys_bl(
  df,
  py1 = min(df$Year),
  py2 = max(df$Year),
  x_range = py2 - py1 + 1,
  col_cr = "grey",
  col_med = "blue",
  col_ol = "red",
  smoothing = TRUE,
  par_mar = c(5, 5, 1, 5),
  x_offset = 0,
  x_min = py1,
  x_max = py2,
  x_step1 = 10,
  x_step2 = 5,
  y1_min = 0,
  y1_max = max(df$NCR),
  y1_step = (max(df$NCR) - min(df$NCR))/5,
  y2_min = min(df$Median.5),
  y2_max = max(df$Median.5),
  y2_step = (max(df$Median.5) - min(df$Median.5))/5,
  lx = median(df$Year),
  ly = median(df$Median.5),
  pl_offset = (max(df$NCR) - min(df$NCR))/50,
  bar_border = "white",
  outliers = 2,
  lpos = 3,
  pl_cex = 0.9,
  TFmin = py1,
  TFmax = py2,
  plot_NCR = TRUE,
  plot_Med = TRUE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>df</code></td>
<td>
<p>data frame with reference publication year, number of cited references, and median deviation as exported from the CRExplorer (File &gt; Export &gt; CSV (Graph)).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>py1</code></td>
<td>
<p>determines lowest reference publication year which should be shown on the x axis (optional parameter). The default is the minimum RPY.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>py2</code></td>
<td>
<p>determines highest reference publication year which should be shown on the x axis (optional parameter). The default is the maximum RPY.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>x_range</code></td>
<td>
<p>is the range of the x axis (optional parameter). The default is py2-py1+1.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>col_cr</code></td>
<td>
<p>is a character color name value to determine color of the bars of the number of cited references (optional parameter). The default value is "grey".</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>col_med</code></td>
<td>
<p>is a character color name value to determine color of the line of the median deviation (optional parameter). The default value is "blue".</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>col_ol</code></td>
<td>
<p>is a character color name value to determine color of the outlier labels (optional parameter). The default value is "red".</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>smoothing</code></td>
<td>
<p>boolean variable (optional parameter) which determines if the lines of the spectrogram are smoothed or not.
(T: yes apply smoothing, F: no do not apply smoothing). The default value is T.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>par_mar</code></td>
<td>
<p>integer vector to set the margins (optional parameter). The default value is c(5, 5, 1, 5).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>x_offset</code></td>
<td>
<p>determines the x axis offset to adjust the median deviation curve properly (optional parameter). The default is 0.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>x_min</code></td>
<td>
<p>determines lowest reference publication year which should be shown on the x axis (optional parameter). The default is the minimum RPY.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>x_max</code></td>
<td>
<p>determines highest reference publication year which should be shown on the x axis (optional parameter). The default is the maximum RPY.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>x_step1</code></td>
<td>
<p>is the interval of major x tics (optional parameter).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>x_step2</code></td>
<td>
<p>is the interval of minor x tics (optional parameter).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>y1_min</code></td>
<td>
<p>is the minimum left y axis value (optional parameter).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>y1_max</code></td>
<td>
<p>is the maximum left y axis value (optional parameter).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>y1_step</code></td>
<td>
<p>is the interval left y axis (optional parameter).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>y2_min</code></td>
<td>
<p>is the minimum right y axis value (optional parameter).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>y2_max</code></td>
<td>
<p>is the maximum right y axis value (optional parameter).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>y2_step</code></td>
<td>
<p>is the interval right y axis (optional parameter).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>lx</code></td>
<td>
<p>is the x position of the legend (optional parameter).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ly</code></td>
<td>
<p>is the y position of the legend according to the right y axis (optional parameter).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>pl_offset</code></td>
<td>
<p>is the offset of the year label (optional parameter).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>bar_border</code></td>
<td>
<p>is the color around the bars (optional parameter).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>outliers</code></td>
<td>
<p>is an integer that indicates if outliers should be detected (optional parameter):
(0: no outlier detection, 1: outliers are detected and marked, 2: only extreme outliers are detected and marked)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>lpos</code></td>
<td>
<p>is an integer that determines the position of the outlier year label around the point (optional parameter).
Values of 1, 2, 3, and 4, respectively indicate positions below, to the left of, above, and to the right of the specified coordinates.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>pl_cex</code></td>
<td>
<p>is the cex value of the year labels (optional parameter).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>TFmin</code></td>
<td>
<p>is the first year that should be used for outlier detection according to Tukey's fences.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>TFmax</code></td>
<td>
<p>is the last year that should be used for outlier detection according to Tukey's fences.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>plot_NCR</code></td>
<td>
<p>boolean variable (optional parameter) which determines the NCR curve should be plotted.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>plot_Med</code></td>
<td>
<p>boolean variable (optional parameter) which determines the median deviation curve should be plotted.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>additional arguments to pass to the plot function.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>rpys_bl(df=data_frame, py1=integer_value, py2=integer_value, x_range=integer_value, smoothing=boolean, 
col_cr=character_color_name, col_med=character_color_name, col_ol=character_color_name, par_mar=integer_vector, plot_NCR=boolean, plot_Med=boolean,
x_offset=integer_value, x_min=integer_value, x_max=integer_value, x_step1=integer_value, x_step2=integer_value, y1_min=integer_value, y1_max=integer_value, y1_step=integer_value,
y2_min=integer_value, y2_max=integer_value, y2_step=integer_value,
lx=integer_value, ly=integer_value,
pl_offset=integer_value, bar_border=string_value, outliers=integer_value, lpos=integer_value, pl_cex=floating_point_value,
TFmin=integer_value,TFmax=integer_value, ...)
Only the argument df is necessary. All other aruments are optional, but many should be provided to produce nice plots.
</p>
<p>Literature:
</p>
<p>- Thor, A., Bornmann, L., &amp; Haunschild, R. (2021). Website of the free software 'CRExplorer', http://www.crexplorer.net
- Thor, A., Bornmann, L., &amp; Haunschild, R. (2018). CitedReferencesExplorer (CRExplorer) manual. Retrieved December 19, 2019, from https://andreas-thor.github.io/cre/manual.pdf
- Tukey, J. W. (1977). Exploratory data analysis. Boston, MA, USA: Addison-Wesley Publishing Company.
</p>
<p>An example data frame is provided as <code>rpys_example_data</code> in the package. It can be used to create an example spectrogram.
</p>


<h3>Examples</h3>

<pre><code class="language-R">
data(rpys_example_data)

rpys_bl(rpys_example_data)

rpys_bl(rpys_example_data, x_min=1930, x_max=2020, x_range=91, x_offset=1, lx=1926, ly=135, 
y1max=300, y1_step=50, y2_min=-150, y2_max=150, y2_step=25, lpos=1)

rpys_bl(rpys_example_data, py1=1930, py2=2020, x_offset=1, lx=1926, ly=135, y1max=300, 
y1_step=50, y2_min=-150, y2_max=150, y2_step=25, lpos=1)

</code></pre>


</div>