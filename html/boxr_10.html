<div class="container">

<table style="width: 100%;"><tr>
<td>box_auth_service</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Authenticate to Box (service-app)</h2>

<h3>Description</h3>

<p>How you authenticate to Box depends the Box-app through which you
connect. A Box service-app can be useful for unattended jobs that need
access to only a limited part of Box, e.g. one folder.
</p>
<p>Use this function to access Box using a service-app.
</p>
<p>To access a service-app, you will need a JSON web-token (JWT),
generated by your Box-admin team. If you have a personal Box account, <em>you</em>
are your Box-admin team. You specify the JWT either as <code>token_file</code>,
the path to the JWT file, or as <code>token_text</code>, the text of the JWT.
</p>
<p>Using JWT-authentication is more convenient than using standard OAuth2
authentication, as you do not have to go through the "OAuth Dance". This
convenience brings additional considerations because the JWT file gives
its bearer uninhibited access to anything the Box service-app can access.
Accordingly, you are recommended to:
</p>

<ul>
<li>
<p> give the service-account access to as little information as you need it
to have, e.g. a single folder.
</p>
</li>
<li>
<p> keep the JWT file secure.
</p>
</li>
</ul>
<h3>Usage</h3>

<pre><code class="language-R">box_auth_service(token_file = NULL, token_text = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>token_file</code></td>
<td>
<p><code>character</code>, path to JSON token-file. If not provided,
the function will look for an environment variable <code>BOX_TOKEN_FILE</code>. If
that is not there, it will try <code style="white-space: pre;">⁠~/.boxr-auth/token.json⁠</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>token_text</code></td>
<td>
<p><code>character</code>, JSON text. If this is provided,
<code>token_file</code> is ignored.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>The default behavior of a service-app is to act on behalf of the
service-account associated with the service-app. This is different
from an interactive-app, which acts on behalf of the Box user who
authenticates to it.
</p>
<p>To use a service-app on a folder belonging to a Box user, either
the Box user has to invite the service-account to collaborate on a
folder belonging to the user, or the service-account has to invite the
Box user to collaborate on a folder belonging to the service-account.
</p>
<p>In either case, you can use <code>box_collab_create()</code>.
</p>
<p>In mid-2020, there appeared intermittent and unexplained failures of
<code>box_auth_service()</code>; the theory is that the clocks at either end
of the authentication process can be out-of-sync. The workaround
is to watch for this failure, then retry the authentication request
with a time-offset. If an offset is used, this function generates a message.
</p>
<p>For more details on Box service-apps, including how to create them, and
service-app-based workflows, please read this boxr
<a href="https://r-box.github.io/boxr/articles/boxr-app-service.html">service-app article</a>.
</p>


<h3>Value</h3>

<p>Invisible <code>NULL</code>, called for side effects.
</p>


<h3>Side-effects</h3>

<p>This function has some side effects:
</p>

<ul>
<li>
<p> some global <code>options()</code> are set for your session to manage the token.
</p>
</li>
<li>
<p> a message is printed to the console.
</p>
</li>
</ul>
<h3>See Also</h3>


<dl>
<dt><code>box_auth()</code></dt>
<dd>
<p>for authenticating to interactive-apps.</p>
</dd>
<dt><code>box_collab_create()</code></dt>
<dd>
<p>for creating a collaboration with a different account
on a Box file or folder.</p>
</dd>
<dt><a href="https://developer.box.com/en/guides/applications/custom-apps/jwt-setup">Box Developers: Setup with JWT</a></dt>
<dd>
<p>documentation for setting up Box (service) apps with JWT.</p>
</dd>
</dl>
</div>