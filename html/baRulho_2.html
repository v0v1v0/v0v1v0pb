<div class="container">

<table style="width: 100%;"><tr>
<td>add_noise</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Add synthetic noise</h2>

<h3>Description</h3>

<p><code>add_noise</code> adds synthetic noise to annotations in extended selection tables
</p>


<h3>Usage</h3>

<pre><code class="language-R">add_noise(
  X,
  mar = NULL,
  target.snr = 2,
  precision = 0.1,
  cores = getOption("mc.cores", 1),
  pb = getOption("pb", TRUE),
  max.iterations = 1000,
  kind = c("pink", "white", "brown", "red", "power"),
  alpha = 1,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>X</code></td>
<td>
<p>Object of class 'extended_selection_table' (created by the function <code>selection_table</code> from the warbleR package), generated 'by element', with the reference to the test sounds (typically the output of <code>align_test_files</code>). Must contain the following columns: 1) "sound.files": name of the .wav files, 2) "selec": unique selection identifier (within a sound file), 3) "start": start time and 4) "end": end time of selections, 5) "bottom.freq": low frequency for bandpass, 6) "top.freq": high frequency for bandpass and 7) "sound.id": ID of sounds (needed to calculate signal to noise ratio internally using <code>signal_to_noise_ratio</code>).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>mar</code></td>
<td>
<p>numeric vector of length 1. Specifies the margins adjacent to
the start point of the annotation over which to measure ambient noise.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>target.snr</code></td>
<td>
<p>numeric vector of length 1. Specifies the desired signal-to-noise ratio. Must be lower that the current signal-to-noise ratio. Annotations showing a signal-to-noise ratio higher than 'target.snr' will remain unchanged. Must be supplied.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>precision</code></td>
<td>
<p>numeric vector of length 1. Specifies the precision of the adjusted signal-to-noise ratio (in dB).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cores</code></td>
<td>
<p>Numeric vector of length 1. Controls whether parallel computing is applied by specifying the number of cores to be used. Default is 1 (i.e. no parallel computing). Can be set globally for the current R session via the "mc.cores" option (see <code>options</code>).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>pb</code></td>
<td>
<p>Logical argument to control if progress bar is shown. Default is <code>TRUE</code>.  Can be set globally for the current R session via the "pb" option (see <code>options</code>).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>max.iterations</code></td>
<td>
<p>Numeric vector of length 1. Specifies the maximum number of iterations that the internal signal-to-noise adjusting routine will run before stopping. Note that in most cases the default maximum number of iterations (1000) is not reached.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>kind</code></td>
<td>
<p>Character vector of length 1 indicating the kind of noise, “white”, “pink”, “power”, "brown", or “red”. Noise is synthesized with a modified version of the function <code>noise</code>. Default is "pink" which is similar to background noise in natural environments.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>alpha</code></td>
<td>
<p>Numeric vector of length 1. The power for the power law noise (defaults are 1 for pink and 1.5 for red noise). Only used when <code>kind = "power"</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Additional arguments to be passed internally to <code>signal_to_noise_ratio</code>.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>The function adds synthetic noise to sounds referenced in an extended selection table (class created by the function <code>selection_table</code> from the warbleR package) to decrease the signal-to-noise ratio. This can be useful, for instance, for evaluating the effect of background noise on signal structure. Note that the implementation is slow.
</p>


<h3>Value</h3>

<p>Object 'X' in which the wave objects have been modified to match the target signal-to-noise ratio. It also includes an additional column, 'adjusted.snr', with the new signal-to-noise ratio values.
</p>


<h3>Author(s)</h3>

<p>Marcelo Araya-Salas (<a href="mailto:marcelo.araya@ucr.ac.cr">marcelo.araya@ucr.ac.cr</a>)
</p>


<h3>References</h3>


<p>Araya-Salas M., E. Grabarczyk, M. Quiroz-Oliva, A. Garcia-Rodriguez, A. Rico-Guevara. (2023), baRulho: an R package to quantify degradation in animal acoustic signals .bioRxiv 2023.11.22.568305.
Timmer. J and M. König (1995): On generating power law noise. Astron. Astrophys. 300, 707-710.

</p>


<h3>See Also</h3>

<p><code>signal_to_noise_ratio</code>
</p>
<p>Other miscellaneous: 
<code>attenuation()</code>,
<code>noise_profile()</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">## Not run: 
# load example data
data("test_sounds_est")

# make it a 'by element' extended selection table
X &lt;- warbleR::by_element_est(X = test_sounds_est)

# add noise to the first five rows
X_noise &lt;- add_noise(X = X[1:5, ], mar = 0.2, target.snr = 3)

## End(Not run)
</code></pre>


</div>