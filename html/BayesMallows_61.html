<div class="container">

<table style="width: 100%;"><tr>
<td>set_smc_options</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Set SMC compute options</h2>

<h3>Description</h3>

<p>Sets the SMC compute options to be used in
<code>update_mallows.BayesMallows()</code>.
</p>


<h3>Usage</h3>

<pre><code class="language-R">set_smc_options(
  n_particles = 1000,
  mcmc_steps = 5,
  resampler = c("stratified", "systematic", "residual", "multinomial"),
  latent_sampling_lag = NA_integer_,
  max_topological_sorts = 1
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>n_particles</code></td>
<td>
<p>Integer specifying the number of particles.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>mcmc_steps</code></td>
<td>
<p>Number of MCMC steps to be applied in the resample-move
step.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>resampler</code></td>
<td>
<p>Character string defining the resampling method to use. One
of "stratified", "systematic", "residual", and "multinomial". Defaults to
"stratified". While multinomial resampling was used in
Stein (2023),
stratified, systematic, or residual resampling typically give lower Monte
Carlo error (Douc and Cappe 2005; Hol et al. 2006; Naesseth et al. 2019).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>latent_sampling_lag</code></td>
<td>
<p>Parameter specifying the number of timesteps to go
back when resampling the latent ranks in the move step. See Section 6.2.3
of (Kantas et al. 2015) for details. The <code class="reqn">L</code> in their
notation corresponds to <code>latent_sampling_lag</code>. See more under Details.
Defaults to <code>NA</code>, which means that all latent ranks from previous timesteps
are moved. If set to <code>0</code>, no move step is applied to the latent ranks.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>max_topological_sorts</code></td>
<td>
<p>User when pairwise preference data are provided,
and specifies the maximum number of topological sorts of the graph
corresponding to the transitive closure for each user will be used as
initial ranks. Defaults to 1, which means that all particles get the same
initial augmented ranking. If larger than 1, the initial augmented ranking
for each particle will be sampled from a set of maximum size
<code>max_topological_sorts</code>. If the actual number of topological sorts consists
of fewer rankings, then this determines the upper limit.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>An object of class "SMCOptions".
</p>


<h3>Lag parameter in move step</h3>

<p>The parameter <code>latent_sampling_lag</code> corresponds to <code class="reqn">L</code> in
(Kantas et al. 2015). Its use in this package is can be
explained in terms of Algorithm 12 in
(Stein 2023). The
relevant line of the algorithm is:
</p>
<p><strong>for</strong> <code class="reqn">j = 1 : M_{t}</code> <strong>do</strong> <br><strong>M-H step:</strong> update <code class="reqn">\tilde{\mathbf{R}}_{j}^{(i)}</code> with proposal
<code class="reqn">\tilde{\mathbf{R}}_{j}' \sim q(\tilde{\mathbf{R}}_{j}^{(i)} |
  \mathbf{R}_{j}, \boldsymbol{\rho}_{t}^{(i)}, \alpha_{t}^{(i)})</code>.<br><strong>end</strong>
</p>
<p>Let <code class="reqn">L</code> denote the value of <code>latent_sampling_lag</code>. With this parameter,
we modify for algorithm so it becomes
</p>
<p><strong>for</strong> <code class="reqn">j = M_{t-L+1} : M_{t}</code> <strong>do</strong> <br><strong>M-H step:</strong> update <code class="reqn">\tilde{\mathbf{R}}_{j}^{(i)}</code> with proposal
<code class="reqn">\tilde{\mathbf{R}}_{j}' \sim q(\tilde{\mathbf{R}}_{j}^{(i)} |
  \mathbf{R}_{j}, \boldsymbol{\rho}_{t}^{(i)}, \alpha_{t}^{(i)})</code>.<br><strong>end</strong>
</p>
<p>This means that with <code class="reqn">L=0</code> no move step is performed on any latent
ranks, whereas <code class="reqn">L=1</code> means that the move step is only applied to the
parameters entering at the given timestep. The default,
<code>latent_sampling_lag = NA</code> means that <code class="reqn">L=t</code> at each timestep, and hence
all latent ranks are part of the move step at each timestep.
</p>


<h3>References</h3>

<p>Douc R, Cappe O (2005).
“Comparison of resampling schemes for particle filtering.”
In <em>ISPA 2005. Proceedings of the 4th International Symposium on Image and Signal Processing and Analysis,  2005.</em>.
<a href="https://doi.org/10.1109/ispa.2005.195385">doi:10.1109/ispa.2005.195385</a>, <a href="http://dx.doi.org/10.1109/ISPA.2005.195385">http://dx.doi.org/10.1109/ISPA.2005.195385</a>.<br><br> Hol JD, Schon TB, Gustafsson F (2006).
“On Resampling Algorithms for Particle Filters.”
In <em>2006 IEEE Nonlinear Statistical Signal Processing Workshop</em>.
<a href="https://doi.org/10.1109/nsspw.2006.4378824">doi:10.1109/nsspw.2006.4378824</a>, <a href="http://dx.doi.org/10.1109/NSSPW.2006.4378824">http://dx.doi.org/10.1109/NSSPW.2006.4378824</a>.<br><br> Kantas N, Doucet A, Singh SS, Maciejowski J, Chopin N (2015).
“On Particle Methods for Parameter Estimation in State-Space Models.”
<em>Statistical Science</em>, <b>30</b>(3).
ISSN 0883-4237, <a href="https://doi.org/10.1214/14-sts511">doi:10.1214/14-sts511</a>, <a href="http://dx.doi.org/10.1214/14-STS511">http://dx.doi.org/10.1214/14-STS511</a>.<br><br> Naesseth CA, Lindsten F, Schön TB (2019).
“Elements of Sequential Monte Carlo.”
<em>Foundations and Trends® in Machine Learning</em>, <b>12</b>(3), 187–306.
ISSN 1935-8245, <a href="https://doi.org/10.1561/2200000074">doi:10.1561/2200000074</a>, <a href="http://dx.doi.org/10.1561/2200000074">http://dx.doi.org/10.1561/2200000074</a>.<br><br> Stein A (2023).
<em>Sequential Inference with the Mallows Model</em>.
Ph.D. thesis, Lancaster University.
</p>


<h3>See Also</h3>

<p>Other preprocessing: 
<code>get_transitive_closure()</code>,
<code>set_compute_options()</code>,
<code>set_initial_values()</code>,
<code>set_model_options()</code>,
<code>set_priors()</code>,
<code>set_progress_report()</code>,
<code>setup_rank_data()</code>
</p>


</div>