<div class="container">

<table style="width: 100%;"><tr>
<td>expose_model_functions.bgmfit</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Expose user defined Stan function for post-processing</h2>

<h3>Description</h3>

<p>The <strong>expose_model_functions()</strong> is a wrapper around the
<code>rstan::expose_stan_functions()</code> to expose user defined
<code>Stan</code> function(s). These exposed functions are needed during the
post-processing of the posterior draws.
</p>


<h3>Usage</h3>

<pre><code class="language-R">## S3 method for class 'bgmfit'
expose_model_functions(
  model,
  scode = NULL,
  expose = TRUE,
  select_model = NULL,
  returnobj = TRUE,
  vectorize = FALSE,
  verbose = FALSE,
  envir = NULL,
  ...
)

expose_model_functions(model, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>model</code></td>
<td>
<p>An object of class <code>bgmfit</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>scode</code></td>
<td>
<p>A character string (<code>Stan code</code>) containing the
user-defined Stan function(s). If <code>NULL</code> (default), the <code>scode</code>
is retrieved from the <code>model</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>expose</code></td>
<td>
<p>A logical (default <code>TRUE</code>) to indicate whether to expose
functions and add them to the <code>model</code> as an attribute.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>select_model</code></td>
<td>
<p>A character string (default <code>NULL</code>) to indicate the
model name. This is for internal use only.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>returnobj</code></td>
<td>
<p>A logical (default <code>TRUE</code>) to indicate whether to
return the model object. When <code>expose = TRUE</code>, then it is advisable to
set <code>returnobj = TRUE</code> too.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>vectorize</code></td>
<td>
<p>A logical (default <code>FALSE</code>) to indicate whether the
exposed functions should be vectorized via <code>base::Vectorize()</code>. Note that
currently <code>vectorize</code> should be set to <code>FALSE</code> because setting it
<code>TRUE</code> may not work as expected.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>verbose</code></td>
<td>
<p>An optional argument (logical, default <code>FALSE</code>) to
indicate whether to print information collected during setting up the
object(s).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>envir</code></td>
<td>
<p>Environment used for function evaluation. The default is
<code>NULL</code> which will set <code>parent.frame()</code> as default environment.
Note that since most of post processing functions are based on <span class="pkg">brms</span>,
the functions needed for evaluation should be in the <code>.GlobalEnv</code>.
Therefore, it is strongly recommended to set <code> envir = globalenv()</code>
(or <code>envir = .GlobalEnv</code>). This is particularly true for the
derivatives such as velocity curve.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Additional arguments passed to the
<code>rstan::expose_stan_functions()</code> function.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>An object of class <code>bgmfit</code> if <code>returnobj=TRUE</code>, otherwise
invisible <code>NULL</code>.
</p>


<h3>Author(s)</h3>

<p>Satpal Sandhu  <a href="mailto:satpal.sandhu@bristol.ac.uk">satpal.sandhu@bristol.ac.uk</a>
</p>


<h3>See Also</h3>

<p><code>rstan::expose_stan_functions()</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">

# Fit Bayesian SITAR model 

# To avoid mode estimation which takes time, the Bayesian SITAR model fit to 
# the 'berkeley_exdata' has been saved as an example fit ('berkeley_exfit').
# See 'bsitar' function for details on 'berkeley_exdata' and 'berkeley_exfit'.

# Check and confirm whether model fit object 'berkeley_exfit' exists
 berkeley_exfit &lt;- getNsObject(berkeley_exfit)

model &lt;- berkeley_exfit

# To save time, argument expose is set as FALSE which runs a dummy test 
# and avoid model compilation which often takes time

expose_model_functions(model, expose = FALSE)


</code></pre>


</div>