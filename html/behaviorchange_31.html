<div class="container">

<table style="width: 100%;"><tr>
<td>CIBER</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Confidence Interval-Based Estimation of Relevance (CIBER)</h2>

<h3>Description</h3>

<p>This function generates a high-level plot consisting of several diamond
plots. This function is useful for estimating the relative relevance of a
set of determinants of, for example, behavior. The plot in the left hand
panel shows each determinant's distribution with a diamond representing the
confidence interval. The right hand plot shows the determinants'
associations to one or more 'target' variables, such as behavior or
determinants of behavior.
</p>


<h3>Usage</h3>

<pre><code class="language-R">CIBER(
  data,
  determinants,
  targets,
  conf.level = list(means = 0.9999, associations = 0.95),
  subQuestions = NULL,
  leftAnchors = rep("Lo", length(determinants)),
  rightAnchors = rep("Hi", length(determinants)),
  outputFile = NULL,
  outputWidth = NULL,
  outputHeight = NULL,
  outputUnits = "in",
  outputParams = list(),
  orderBy = NULL,
  decreasing = NULL,
  numberSubQuestions = FALSE,
  generateColors = list(means = c("red", "blue", "green"), associations = c("red",
    "grey", "green")),
  strokeColors = viridis::viridis(length(targets)),
  vLines = c(-0.5, 0, 0.5),
  vLineColors = "grey",
  titlePrefix = "Means and associations (r) with",
  titleVarLabels = NULL,
  titleSuffix = "",
  fullColorRange = NULL,
  associationsAlpha = 0.5,
  returnPlotOnly = TRUE,
  drawPlot = TRUE,
  jitterWidth = 0.45,
  baseSize = 0.8,
  dotSize = 2.5 * baseSize,
  baseFontSize = 10 * baseSize,
  theme = ggplot2::theme_bw(base_size = baseFontSize),
  xbreaks = NULL,
  rsq = TRUE,
  ...
)

binaryCIBER(
  data,
  determinants,
  targets,
  conf.level = list(means = 0.9999, associations = 0.95),
  subQuestions = NULL,
  leftAnchors = rep("Lo", length(determinants)),
  rightAnchors = rep("Hi", length(determinants)),
  outputFile = NULL,
  outputWidth = NULL,
  outputHeight = NULL,
  outputUnits = "in",
  outputParams = list(),
  orderBy = NULL,
  decreasing = NULL,
  numberSubQuestions = FALSE,
  comparisonColors = viridis::viridis(2, end = 0.5),
  categoryLabels = NULL,
  generateColors = list(means = c("red", "blue", "green"), associations = c("red",
    "grey", "green")),
  strokeColors = viridis::viridis(length(targets)),
  vLines = c(-0.8, 0, 0.8),
  vLineColors = "grey",
  titlePrefix = "Means and associations (d) with",
  titleVarLabels = NULL,
  titleSuffix = "",
  fullColorRange = NULL,
  associationsAlpha = 0.5,
  returnPlotOnly = TRUE,
  drawPlot = TRUE,
  baseSize = 0.8,
  dotSize = 2.5 * baseSize,
  baseFontSize = 10 * baseSize,
  theme = ggplot2::theme_bw(base_size = baseFontSize),
  xbreaks = NULL,
  ...
)

detStructCIBER(
  determinantStructure,
  data,
  conf.level = list(means = 0.9999, associations = 0.95),
  subQuestions = NULL,
  leftAnchors = rep("Lo", length(determinants)),
  rightAnchors = rep("Hi", length(determinants)),
  orderBy = 1,
  decreasing = NULL,
  generateColors = list(means = c("red", "blue", "green"), associations = c("red",
    "grey", "green")),
  strokeColors = NULL,
  titlePrefix = "Means and associations with",
  titleVarLabels = NULL,
  titleSuffix = "",
  fullColorRange = NULL,
  associationsAlpha = 0.5,
  baseSize = 0.8,
  dotSize = 2.5 * baseSize,
  baseFontSize = 10 * baseSize,
  theme = ggplot2::theme_bw(base_size = baseFontSize),
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>data</code></td>
<td>
<p>The dataframe containing the variables.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>determinants</code></td>
<td>
<p>The 'determinants': the predictors (or 'covariates') of
the target variables(s) (or 'criteria').</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>targets</code></td>
<td>
<p>The 'targets' or 'criteria' variables: the variables
predicted by the determinants.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>conf.level</code></td>
<td>
<p>The confidence levels for the confidence intervals: has to
be a named list with two elements: <code>means</code> and <code>associations</code>,
specifying the desired confidence levels for the means and associations,
respectively. The confidence level for the associations is also used for the
intervals for the proportions of explained variance.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>subQuestions</code></td>
<td>
<p>The subquestions used to measure each determinants. This
can also be used to provide pretty names for the variables if the
determinants were not measured by one question each. Must have the same
length as <code>determinants</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>leftAnchors</code></td>
<td>
<p>The anchors to display on the left side of the left hand
panel. If the determinants were measured with one variable each, this can be
used to show the anchors that were used for the respective scales. Must have
the same length as <code>determinants</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>rightAnchors</code></td>
<td>
<p>The anchors to display on the left side of the left hand
panel. If the determinants were measured with one variable each, this can be
used to show the anchors that were used for the respective scales. Must have
the same length as <code>determinants</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>outputFile</code></td>
<td>
<p>The file to write the output to (the plot is not stored to
disk if <code>NULL</code>). The extension can be specified to change the file type.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>outputWidth, outputHeight, outputUnits</code></td>
<td>
<p>The width, height,
and units for the output file.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>outputParams</code></td>
<td>
<p>More advanced parameters for the output file. This can be
used to pass arguments to <code>ggplot2::ggsave()</code>, such as passing
<code>outputParams=list(type="cairo-png")</code> to use anti-aliasing when saving a PNG file.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>orderBy</code></td>
<td>
<p>Whether to sort the determinants. Set to <code>NULL</code> to not
sort at all; specify the name or index of one of the <code>target</code>s to sort
by the point estimates of the associations with that target variable. Use
<code>decreasing</code> to determine whether to sort in ascending or descending
order. For convenience, if <code>orderBy</code> is not <code>NULL</code>, but
<code>decreasing</code> is, the determinants are sorted in descending (decreasing)
order.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>decreasing</code></td>
<td>
<p>Whether to sort the determinants. Specify <code>NULL</code> to
not sort at all, <code>TRUE</code> to sort in descending order, and <code>FALSE</code>
to sort in ascending order. If <code>decreasing</code> is nor <code>NULL</code>, but
<code>orderBy</code> is <code>NULL</code>, the determinants are sorted by their means.
For convenience, if <code>orderBy</code> is not <code>NULL</code>, but <code>decreasing</code>
is, the determinants are sorted in descending (decreasing) order.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>numberSubQuestions</code></td>
<td>
<p>Whether or not to number the subquestions. If they
are numbered, they are numbered from the top to the bottom.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>generateColors</code></td>
<td>
<p>The colors to use to generate the gradients for
coloring the diamonds representing the confidence intervals. Has to be a
named list with two elements: <code>means</code> and <code>associations</code>,
specifying the desired colors for the means and associations, respectively.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>strokeColors</code></td>
<td>
<p>The palette to use to color the stroke of the confidence
intervals for the associations between the determinants and the targets.
Successive colors from this palette are used for the targets.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>vLines, vLineColors</code></td>
<td>
<p>In the association plot, vertical lines can
be plotted to facilitate interpretation. Specify their locations and
colors here, or set one or both to <code>NULL</code> to eliminate them.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>titlePrefix</code></td>
<td>
<p>Text to add before the list of target names and the
proportions of explained variance for each target. This plot title also
serves as legend to indicate which target 'gets' which each color.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>titleVarLabels</code></td>
<td>
<p>Optionally, variable labels to use in the plot title.
Has to be the exact same length as <code>targets</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>titleSuffix</code></td>
<td>
<p>Text to add after the list of target names and the
proportions of explained variance for each target.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>fullColorRange</code></td>
<td>
<p>If colors are specified, this can be used to specify
which values, for the determinant confidence intervals in the left hand
panel, are the minimum and maximum. This is useful if those scores are not
actually in the data (e.g. for extremely skewed distributions). If
<code>NULL</code>, the range of all individual scores on the determinants is used.
For the associations, <code>c(-1, 1)</code> is always used as
<code>fullColorRange</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>associationsAlpha</code></td>
<td>
<p>The alpha level (transparency) of the confidence
interval diamonds in the right hand plot. Value between 0 and 1, where 0
signifies complete transparency (i.e. invisibility) and 1 signifies complete
'opaqueness'.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>returnPlotOnly</code></td>
<td>
<p>Whether to return the entire object that is generated
(including all intermediate objects) or only the plot.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>drawPlot</code></td>
<td>
<p>Whether the draw the plot, or only return it.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>jitterWidth</code></td>
<td>
<p>How much to jitter the data points in the left hand plot.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>baseSize</code></td>
<td>
<p>This can be used to efficiently change the size of most plot
elements.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>dotSize</code></td>
<td>
<p>This is the size of the points used to show the individual
data points in the left hand plot.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>baseFontSize</code></td>
<td>
<p>This can be used to set the font size separately from
the <code>baseSize</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>theme</code></td>
<td>
<p>This is the theme that is used for the plots.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>xbreaks</code></td>
<td>
<p>Which breaks to use on the X axis (can be useful to override
<code>ggplot2</code>'s defaults).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>rsq</code></td>
<td>
<p>Whether to compute the R squared values.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>These arguments are passed on to
<code>biAxisDiamondPlot</code> (for the left panel) and
<code>diamondPlot</code> (for the right panel).  Note that all argument are
passed to both those functions.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>comparisonColors</code></td>
<td>
<p>Colors to use for the two groups in a
binary CIBER plot with one (dichotomous) target.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>categoryLabels</code></td>
<td>
<p>Labels for the two values of the target.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>determinantStructure</code></td>
<td>
<p>When using <code>detStructCIBER</code>, the
determinant structure as generated by <code>determinantStructure</code> is
included here. <code>determinants</code>, <code>targets</code>, <code>subQuestions</code>,
<code>leftAnchors</code>, and <code>rightAnchors</code> are then read from the
<code>determinantStructure</code> object. In other words: once a
<code>determinantStructure</code> has been generated, only <code>dat</code> and
<code>determinantStructure</code> have to be provided as argument to
generate a CIBER diamond plot.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>Details are explained in Crutzen &amp; Peters (2017).
</p>


<h3>Value</h3>

<p>Depending on the value of <code>returnPlotOnly</code>, either the plot
only (a <code>gtable</code> object) or an object containing most objects
created along the way (in which case the plot is stored in
<code>$output$plot</code>).
</p>
<p>The plot has <code>width</code> and <code>height</code> attributes which can be used
when saving the plot.
</p>


<h3>References</h3>

<p>Crutzen, R., Peters, G.-J. Y., &amp; Noijen, J. (2017). How to
Select Relevant Social-Cognitive Determinants and Use them in the
Development of Behaviour Change Interventions? Confidence Interval-Based
Estimation of Relevance. http://dx.doi.org/
</p>


<h3>See Also</h3>

<p><code>determinantStructure</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">### This example uses the determinant study Party Panel 17.1;
### see ?behaviorchange::BBC_data for more information.
data(BBC_pp17.1);
behaviorchange::CIBER(data=BBC_pp17.1,
                      determinants=c('epw_AttExpect_hearingDamage',
                                     'epw_AttExpect_highTone',
                                     'epw_AttExpect_musicVolume',
                                     'epw_AttExpect_musicFidelity',
                                     'epw_AttExpect_loudConversation',
                                     'epw_AttExpect_musicFocus',
                                     'epw_AttExpect_musicEnjoy'),
                      targets=c('epw_attitude'));

### With a binary target
data(BBC_pp17.1);
behaviorchange::binaryCIBER(data=BBC_pp17.1,
                            determinants=c('epGeneralBeliefs_loudnessPreference',
                                           'epGeneralBeliefs_loudnessGenre',
                                           'epGeneralBeliefs_loudnessTooMuch',
                                           'epGeneralBeliefs_priceFoam',
                                           'epGeneralBeliefs_priceSilicon',
                                           'epGeneralBeliefs_priceCustom'),
                            targets=c('epPossession'),
                            categoryLabels = c('no',
                                               'yes'));


</code></pre>


</div>