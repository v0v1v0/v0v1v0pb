<div class="container">

<table style="width: 100%;"><tr>
<td>colPointsLegend</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Legend for colPoints</h2>

<h3>Description</h3>

<p>Adds legends to plots created or enhanced with <code>colPoints</code>. <br><code>sf</code> plots set par(mar=c(0,0,1.2,0)) but then reset it to the values before.
<code>smallPlot</code> will hence also reset to that, so points added after
calling colpointsLegend will be wrong, unless the margins are set BEFORE sf plot.
<code>sf:::plot.sf</code> alternatively uses c(2.1, 2.1, 1.2, 0)  or  c(1, 1, 1.2, 1).
</p>


<h3>Usage</h3>

<pre><code class="language-R">colPointsLegend(
  z,
  Range = range(z, finite = TRUE),
  nbins = 100,
  colors = seqPal(nbins),
  bb = seqR(Range, length.out = nbins + 1),
  nlab = 5,
  at = pretty2(Range, nlab),
  labels = at,
  atgrey = NULL,
  adj = 0.5,
  x1 = 0.6,
  y1 = 0.88,
  x2 = 0.99,
  y2 = 0.99,
  outer = FALSE,
  xpd = NA,
  mar,
  mgp = c(1.8, 0.6, 0),
  bg = par("bg"),
  sborder = NA,
  resetfocus = TRUE,
  plottriangle = FALSE,
  triangle = 0.14,
  tricol = c(8, 1),
  density = NULL,
  lines = TRUE,
  atminmax = FALSE,
  horizontal = TRUE,
  labelpos = 1,
  titlepos = 3,
  title = "Legend",
  las = 1,
  x,
  y,
  index,
  above,
  below,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>z</code></td>
<td>
<p>Values of third dimension used in <code>colPoints</code>,
can be a matrix or a vector etc, but must be numeric</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>Range</code></td>
<td>
<p>Ends of color bar for method=equalinterval. DEFAULT: range(z, finite=TRUE)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>nbins</code></td>
<td>
<p>Number of classes (thus, colors). If <code>colors</code> is given,
<code>nbins</code> is overwritten with <code>length(colors)</code>. DEFAULT: 100</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>colors</code></td>
<td>
<p>Color vector. DEFAULT: <code>seqPal</code>
from yellow (lowest) to blue (highest value in Range)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>bb</code></td>
<td>
<p>Borders of bins for the legend (key). DEFAULT: seqR(Range, length.out=nbins+1)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>nlab, at, labels</code></td>
<td>
<p>Number of legend labels, their positions and labels.
DEFAULT: nlab=5, labels=at=pretty2(Range,nlab)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>atgrey</code></td>
<td>
<p>Positions for grey lines with no label, if given. DEFAULT: NULL</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>adj</code></td>
<td>
<p>label adjustment parallel to legend bar (only one number!). DEFAULT: 0.5</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>x1, x2, y1, y2</code></td>
<td>
<p>Relative coordinates [0:1] of inset plot, see <code>smallPlot</code>.
DEFAULT: x: 0.6-0.99, y: 0.88-0.99</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>outer</code></td>
<td>
<p>Logical: Should legend be relative to device instead of current figure?
use outer=TRUE when par(mfrow, oma) is set. DEFAULT: FALSE</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>xpd</code></td>
<td>
<p>Logical: should text be expanded outside of plotting region?
Must be NA if outer=TRUE. DEFAULT: NA</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>mar</code></td>
<td>
<p>Margins for <code>smallPlot</code>.
DEFAULT: internal calculations based on title, labelpos and titlepos.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>mgp</code></td>
<td>
<p>MarGinPlacement: distance of xlab/ylab, numbers and line from plot margin,
as in <code>par</code>, but with different defaults. DEFAULT: c(1.8, 0.6, 0)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>bg</code></td>
<td>
<p>Background behind key, labels and title. DEFAULT: par("bg")</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>sborder</code></td>
<td>
<p>Border around inset subplot. DEFAULT: NA</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>resetfocus</code></td>
<td>
<p>Reset focus to original plot?
Specifies where further low level plot commands are directed to. DEFAULT: TRUE</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>plottriangle</code></td>
<td>
<p>Should triangles be plotted at the end of the legend for values outside Range?
Vector of length two (for lower and upper, internally recycled).
If this argument is missing but triangle is given, this is set to TRUE. DEFAULT: FALSE</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>triangle</code></td>
<td>
<p>Percentage of bar length at lower and upper end for triangles
(can be a vector with two different values). DEFAULT: 0.14</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>tricol</code></td>
<td>
<p>Triangle colors for lower and upper end. DEFAULT: c(8,1)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>density</code></td>
<td>
<p>List of arguments passed to <code>kernel density estimation</code>.
Can also be FALSE to suppress KDE line drawing. DEFAULT: NULL</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>lines</code></td>
<td>
<p>Plot black lines in the color bar at <code>at</code>? DEFAULT: TRUE</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>atminmax</code></td>
<td>
<p>Should the extrema of the legend be added to <code>at</code>? DEFAULT: FALSE</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>horizontal</code></td>
<td>
<p>Horizontal bar? if FALSE, a vertical bar is drawn. DEFAULT: TRUE</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>labelpos</code></td>
<td>
<p>Position of labels relative to the bar.
Possible: 1 (below), 2 (left), 3 (above), 4 (right), 5(on top of bar). DEFAULT: 1</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>titlepos</code></td>
<td>
<p>Position of title -"-. DEFAULT: 3</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>title</code></td>
<td>
<p>Legend title. DEFAULT: "Legend"</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>las</code></td>
<td>
<p>LabelAxisStyle. DEFAULT: 1</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>x, y, index, above, below</code></td>
<td>
<p>Ignored arguments, so that you can pass the result from
<code>colPoints</code> via <code>do.call(colPointsLegend, cp_result)</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Further arguments passed to <code>text</code> and <code>strwidth</code>,
e.g. cex, srt, font, col. But NOT adj!</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>invisible list of par of <code>smallPlot</code>, adds legend bar to current plot
</p>


<h3>Note</h3>

<p><code>x1,x2,y1,y2,labelpos,titlepos,title</code> have different defaults when <code>horizontal=FALSE</code><br></p>


<h3>Author(s)</h3>

<p>Berry Boessenkool, <a href="mailto:berry-b@gmx.de">berry-b@gmx.de</a>, 2012-2014
</p>


<h3>See Also</h3>

<p><code>colPointsHist</code>, <code>colPoints</code> for real life example
</p>


<h3>Examples</h3>

<pre><code class="language-R">
z &lt;- rnorm(50)
plot(1:10)
colPointsLegend(z=z)
colPointsLegend(z=z, titlepos=2)
colPointsLegend(z=z, horiz=FALSE) # note the different defaults
# positioning relative to plot:
colPointsLegend(z=z, x1=0.05, x2=0.3, y1=0.7,y2=0.9, title="Booh!", density=FALSE)
# Denote values outside of Range wit a triangle:
colPointsLegend(z=z, Range=c(-1,3), x1=0.2, y1=0.4, y2=0.6, triangle=0.2)
colPointsLegend(z=z, horiz=FALSE, x1=0.7, y1=0.6, plottriangle=TRUE, density=FALSE)
?colPoints # example section for actual usage

</code></pre>


</div>