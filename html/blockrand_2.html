<div class="container">

<table style="width: 100%;"><tr>
<td>blockrand</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Generate a block randomization for a clinical trial </h2>

<h3>Description</h3>

<p>This function creates random assignments for clinical trials (or any
experiment where the subjects come one at a time).  The randomization
is done within blocks so that the balance between treatments stays
close to equal throughout the trial.
</p>


<h3>Usage</h3>

<pre><code class="language-R">blockrand(n, num.levels = 2, levels = LETTERS[seq(length = num.levels)],
id.prefix, stratum, block.sizes = 1:4, block.prefix,
uneq.beg=FALSE, uneq.mid=FALSE, uneq.min=0, uneq.maxit=10)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>n</code></td>
<td>
<p> The minimum number of subjects to randomize </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>num.levels</code></td>
<td>
<p> The number of treatments or factor levels to
randomize between </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>levels</code></td>
<td>
<p> A character vector of labels for the different
treatments or factor levels </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>id.prefix</code></td>
<td>
<p> Optional integer or character string to prefix the id
column values</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>stratum</code></td>
<td>
<p> Optional character string specifying the stratum being
generated</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>block.sizes</code></td>
<td>
<p> Vector of integers specifying the sizes of blocks
to use </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>block.prefix</code></td>
<td>
<p> Optional integer or character string to prefix
the block.id column </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>uneq.beg</code></td>
<td>
<p> Should an unequal block be used at the beginning of
the randomization </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>uneq.mid</code></td>
<td>
<p> Should an unequal block be used in the middle </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>uneq.min</code></td>
<td>
<p> what is the minimum difference between the most and
least common levels in an unequal block </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>uneq.maxit</code></td>
<td>
<p> maximum number of tries to get uneq.min difference </p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>This function will randomize subjects to the specified treatments
within sequential blocks.  The total number of randomizations may end
up being more than <code>n</code>.
</p>
<p>The final block sizes will actually be the product of
<code>num.levels</code> and <code>block.sizes</code> (e.g. if there are 2 levels
and the default block sizes are used (1:4) then the actual block sizes
will be randomly chosen from the set (2,4,6,8)).
</p>
<p>If <code>id.prefix</code> is not specified then the id column of the output
will be a sequence of integers from 1 to the number of rows.  If
<code>id.prefix</code> is numeric then the id column of the output will be a
sequence of integers starting at the value of <code>id.prefix</code>.  If
<code>id.prefix</code> is a character string then the numbers will be
converted to strings (zero padded) and have the prefix prepended.
</p>
<p>The <code>block.prefix</code> will be treated in the same way as the
<code>id.prefix</code> for identifying the blocks.  The one difference being
that the <code>block.id</code> will be converted to a factor in the final
data frame.
</p>
<p>If <code>uneq.beg</code> and/or <code>uneq.mid</code> are true then an additional
block will be used at the beginning and/or inserted in the middle that
is not balanced, this means that the final totals in each group may
not be exactly equal (but still similar).  This makes it more
difficult to anticipate future assignments as the numbers will not
return to equality at the end of each block.
</p>
<p>For stratified studies the <code>blockrand</code> function should run once
each for each stratum using the <code>stratum</code> argument to specify the
current stratum (and using <code>id.prefix</code> and <code>block.prefix</code> to
keep the id's unique).  The separate data frames can then be combined
using <code>rbind</code> if desired.
</p>


<h3>Value</h3>

<p>A data frame with the following columns:
</p>
<table>
<tr style="vertical-align: top;">
<td><code>id:</code></td>
<td>
<p>A unique identifier (number or character string) for each row</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>stratum:</code></td>
<td>
<p>Optional, if <code>stratum</code> argument is specfied it
will be replicated in this column</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>block.id:</code></td>
<td>
<p>An identifier for each block of the randomization,
this column will be a factor</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>block.size</code></td>
<td>
<p>The size of each block</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>treatment</code></td>
<td>
<p>The treatment assignment for each subject</p>
</td>
</tr>
</table>
<h3>Author(s)</h3>

<p> Greg Snow <a href="mailto:538280@gmail.com">538280@gmail.com</a></p>


<h3>References</h3>

<p>Schulz, K. and Grimes, D. (2002): Unequal group sizes in
randomized trials: guarding against guessing, The Lancet, 359, pp
966â€“970. </p>


<h3>See Also</h3>

 <p><code>plotblockrand</code>, <code>sample</code>, <code>rbind</code> </p>


<h3>Examples</h3>

<pre><code class="language-R">
## stratified by sex, 100 in stratum, 2 treatments
male &lt;- blockrand(n=100, id.prefix='M', block.prefix='M',stratum='Male')
female &lt;- blockrand(n=100, id.prefix='F', block.prefix='F',stratum='Female')

my.study &lt;- rbind(male,female)

## Not run: 
plotblockrand(my.study,'mystudy.pdf',
   top=list(text=c('My Study','Patient: %ID%','Treatment: %TREAT%'),
            col=c('black','black','red'),font=c(1,1,4)),
   middle=list(text=c("My Study","Sex: %STRAT%","Patient: %ID%"),
               col=c('black','blue','green'),font=c(1,2,3)),
   bottom="Call 123-4567 to report patient entry",
   cut.marks=TRUE)

## End(Not run)

</code></pre>


</div>