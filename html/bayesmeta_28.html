<div class="container">

<table style="width: 100%;"><tr>
<td>ess</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>
Effective sample size (ESS)
</h2>

<h3>Description</h3>

<p>This function computes the effective sample size (ESS) of a posterior
predictive distribution.
</p>


<h3>Usage</h3>

<pre><code class="language-R">  ess(object, ...)
  ## S3 method for class 'bayesmeta'
ess(object, uisd, method=c("elir", "vr", "pr", "mtm.pt"), ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>object</code></td>
<td>
<p>a <code>bayesmeta</code> object.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>uisd</code></td>
<td>
<p>the <em>unit infomation standard deviation</em>
(a single numerical value, <em>or</em> a <code>function</code> of the
parameter (<code class="reqn">\mu</code>)).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>method</code></td>
<td>
<p>a character string specifying the method to be used for
ESS computation. By default, the expected local-information-ratio
ESS (<code class="reqn">ESS_{ELIR}</code>) is returned.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>additional arguments</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>The information conveyed by a prior distribution may often be
quantified in terms of an <em>effective sample size
(ESS)</em>. Meta-analyses are commonly utilized to summarize
“historical” information in order to inform a future study,
leading to a <em>meta-analytic-predictive (MAP) prior</em> (Schmidli et
al., 2014). In the context of the normal-normal hierarchical model
(NNHM), the MAP prior results as the (posterior) predictive
distribution for a “new” study mean
<code class="reqn">\theta_{k+1}</code>. This function computes the ESS for the
posterior predictive distribution based on a <code>bayesmeta</code> object.
</p>
<p>Within the NNHM, the notion of an effective sample size requires the
specification of a <em>unit information standard deviation (UISD)</em>
(Roever et al., 2020); see also the ‘<code>uisd()</code>’
function's help page. The UISD <code class="reqn">\sigma_\mathrm{u}</code> here
determines the <em>Fisher information for one information unit</em>,
effectively assuming that a study's sample size <code class="reqn">n_i</code> and
standard error <code class="reqn">\sigma_i</code> are related simply as
</p>
<p style="text-align: center;"><code class="reqn">\sigma_i=\frac{\sigma_\mathrm{u}}{\sqrt{n_i}},</code>
</p>

<p>i.e., the squared standard error is inversely proportional to the
sample size. For the (possibly hypothetical) case of a sample size of
<code class="reqn">n_i=1</code>, the standard error then is equal to the UISD
<code class="reqn">\sigma_\mathrm{u}</code>.
</p>
<p>Specifying the UISD as a constant is often an approximation,
sometimes it is also possible to specify the UISD as a function of the
parameter (<code class="reqn">\mu</code>). For example, in case the outcome in
the meta-analyses are log-odds, then the UISD varies with the (log-)
odds and is given by <code class="reqn">2\,\mathrm{cosh}(\mu/2)</code>
(see also the example below).
</p>
<p>The ESS may be computed or approximated in several ways.
Possible choices here are:
</p>

<ul>
<li> <p><code>"elir"</code>: the <em>expected local-information-ratio (ELIR)</em> method (the default),
</p>
</li>
<li> <p><code>"vr"</code>: the <em>variance ratio (VR)</em> method,
</p>
</li>
<li> <p><code>"pr"</code>: the <em>precision ratio (PR)</em> method,
</p>
</li>
<li> <p><code>"mtm.pt"</code>: the <em>Morita-Thall-Mueller / Pennello-Thompson (MTM.PM)</em> method.
</p>
</li>
</ul>
<p>For more details on these see also Neuenschwander et al. (2020).
</p>


<h3>Value</h3>

<p>The effective sample size (ESS).
</p>


<h3>Author(s)</h3>

<p>Christian Roever <a href="mailto:christian.roever@med.uni-goettingen.de">christian.roever@med.uni-goettingen.de</a>
</p>


<h3>References</h3>

<p>B. Neuenschwander, S. Weber, H. Schmidli, A. O'Hagan.
Predictively consistent prior effective sample sizes.
<em>Biometrics</em>, <b>76</b>(2):578-587, 2020.
<a href="https://doi.org/10.1111/biom.13252">doi:10.1111/biom.13252</a>.
</p>
<p>H. Schmidli, S. Gsteiger, S. Roychoudhury, A. O'Hagan,
D. Spiegelhalter, B. Neuenschwander.
Robust meta-analytic-predictive priors in clinical trials with
historical control information.
<em>Biometrics</em>, <b>70</b>(4):1023-1032, 2014.
<a href="https://doi.org/10.1111/biom.12242">doi:10.1111/biom.12242</a>.
</p>
<p>C. Roever, R. Bender, S. Dias, C.H. Schmid, H. Schmidli, S. Sturtz,
S. Weber, T. Friede.
On weakly informative prior distributions for the heterogeneity
parameter in Bayesian random-effects meta-analysis.
<em>Research Synthesis Methods</em>, <b>12</b>(4):448-474, 2021.
<a href="https://doi.org/10.1002/jrsm.1475">doi:10.1002/jrsm.1475</a>.
</p>


<h3>See Also</h3>

<p><code>bayesmeta</code>, <code>uisd</code>.
</p>


<h3>Examples</h3>

<pre><code class="language-R"># load data set:
data("BaetenEtAl2013")
print(BaetenEtAl2013)

## Not run: 
# compute effect sizes (logarithmic odds) from the count data:
as &lt;- escalc(xi=events, ni=total, slab=study,
             measure="PLO", data=BaetenEtAl2013)

# estimate the unit information standard deviation (UISD):
uisd(as, individual=TRUE)
uisd(as)  # = 2.35

# perform meta-analysis
# (using uniform priors for effect and heterogeneity):
bm &lt;- bayesmeta(as)

# show forest plot:
forestplot(bm, zero=NA, xlab="log-odds")

# compute ESS_ELIR (based on fixed UISD):
ess(bm, uisd=2.35)  # = 45.7 patients

# compute ESS_ELIR based on UISD as a function of the log-odds:
uisdLogOdds &lt;- function(logodds)
{
  return(2 * cosh(logodds / 2))
}

# Note: in the present example, probabilities are
# at approximately 0.25, corresponding to odds of 1:3.
uisdLogOdds(log(1/3))
# The UISD value of 2.31 roughly matches the above empirical figure.

ess(bm, uisd=uisdLogOdds)  # = 43.4 patients

## End(Not run)
</code></pre>


</div>