<div class="container">

<table style="width: 100%;"><tr>
<td>abcd</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Acyclic Behavior Change Diagram</h2>

<h3>Description</h3>

<p>This function generates an acyclic behavior change diagram (ABCD)
from a specification in a google sheet or .csv file. An ABCD is
a logic model that illustrates the assumptions underlying a
behavior change intervention. Specifically, the ABCD shows the
assumed causal and structural assumptions, thereby showing what is
assumed to cause what (e.g. which elements of the intervention are
assumed to influence which aspects of the target population's
psychology?) and what is assumed to consist of what (e.g. which
determinants are assumed to contain which specific aspects of the
target population's psychology?).
</p>


<h3>Usage</h3>

<pre><code class="language-R">abcd(
  specs,
  specCols = c("bcps", "cnds", "apps", "sdts", "dets", "pobs", "behs"),
  localBackup = NULL,
  title = "Acyclic Behavior Change Diagram\n\n",
  outputFile = NULL,
  outputWidth = 3000,
  outputHeight = 1500,
  includeColNames = TRUE,
  maxLabelLength = 30,
  nodeFontSize = 10,
  edgeFontSize = 8,
  colNameFontSize = nodeFontSize,
  grayscale = FALSE,
  colorTheme = behaviorchange::opts$get("aabbcc"),
  penWidth = 1,
  silent = FALSE,
  returnGraphOnly = FALSE,
  returnSvgOnly = FALSE,
  columnWarning = TRUE,
  graphTheme = list(c("fontname", "Arial", "node")),
  regExReplacements = behaviorchange::opts$get("diagrammerSanitization")
)

## S3 method for class 'abcdiagram'
print(
  x,
  width = x$input$width,
  height = x$input$height,
  title = DiagrammeR::get_graph_name(x$output$graph),
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>specs</code></td>
<td>
<p>The specifications: either a google sheets URL,
the path to a local file, a character vector with both,
or a matrix or data frame</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>specCols</code></td>
<td>
<p>The order of the columns. This character vector
specified the order of the elements of an ABCD. In the default
order, from left to right, these are (see below for definitions
and more details):
</p>

<ul>
<li> <p><code>bcps</code> = <strong>Behavior Change Principles (BCPs)</strong>;
</p>
</li>
<li> <p><code>cnds</code> = <strong>Conditions for effectiveness</strong>;
</p>
</li>
<li> <p><code>apps</code> = <strong>Applications</strong>;
</p>
</li>
<li> <p><code>sdts</code> = <strong>Sub-determinants</strong>;
</p>
</li>
<li> <p><code>dets</code> = <strong>Determinants</strong>;
</p>
</li>
<li> <p><code>pobs</code> = <strong>Performance Objectives</strong>;
</p>
</li>
<li> <p><code>behs</code> = <strong>Behaviors</strong>;
</p>
</li>
</ul>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>localBackup</code></td>
<td>
<p>Whether to write the specifications
to a local backup</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>title</code></td>
<td>
<p>The title of the diagram</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>outputFile</code></td>
<td>
<p>If specified, the ABCD is written to
this file using DiagrammeR::export_graph.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>outputWidth, outputHeight</code></td>
<td>
<p>If an <code>outputFile</code> is
specified, these determine its width and height (in pixels)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>includeColNames</code></td>
<td>
<p>Whether to include the column names
as titles/legend for the entities in each 'column'
of the ABCD.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>maxLabelLength</code></td>
<td>
<p>At which width to word wrap the
labels.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>nodeFontSize, edgeFontSize, colNameFontSize</code></td>
<td>
<p>Font sizes of the nodes (i.e.
the text in boxes), edges (basically the conditions for effectiveness) and the
column names (at the bottom).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>grayscale</code></td>
<td>
<p>Whether to use the <code>colorTheme</code> or produce a grayscale ABCD.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>colorTheme</code></td>
<td>
<p>The color theme, a named list containing the colors,
each a character vector with three HTML (hex) color values. The list elements
have to be named <code>bcp</code>, <code>condition_for_effectiveness</code>, <code>application</code>,
<code>sub_determinant</code>, <code>determinant</code>, <code>sub_behavior</code>, and <code>target_behavior</code>, and
each must contain a named vector with two elements named <code>fill</code>, <code>stroke</code>,
and <code>text</code>, containing the color codes for the fill, stroke, and text,
respectively; see <code>behaviorchange::opts$get("aabbcc")</code> for an example.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>penWidth</code></td>
<td>
<p>The width of the pen to draw the strokes.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>silent</code></td>
<td>
<p>Whether to suppress (<code>TRUE</code>) or show
(<code>FALSE</code>) more detailed information.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>returnGraphOnly, returnSvgOnly</code></td>
<td>
<p>Whether to return the full results
object or only either the DiagrammeR::DiagrammeR graph or a one-value
character vector containing a Scalable Vector Graphic as produced by
<code>DiagrammeRsvg::export_svg()</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>columnWarning</code></td>
<td>
<p>Can be used to suppress the warning if the number of
columns is too large.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>graphTheme</code></td>
<td>
<p>Specific settings to apply to the graph
using <code>apply_graph_theme()</code>; a list of vectors, where each vector has
three elements: the setting, the value, and what to apply it to ('node',
'edge', or 'graph').</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>regExReplacements</code></td>
<td>
<p>A list of pairs of regular
expressions that will be applied to the specifications
before generating the ABCD. This can be used to sanitize
problematic characters (e.g. ', " and \).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>The ABCD object to print (as generated by a call to <code>abcd</code>).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>width, height</code></td>
<td>
<p>Width and height to use when printing the ABCD.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Any additional arguments are passed on to
<code>DiagrammeR::render_graph()</code>.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>Specifically, a full ABCD is a model that shows the following
elements:
</p>

<ul>
<li> <p><strong>Behavior Change Principles (BCPs)</strong>: The specific
psychological principles engaged to influence the relevant
sub-determinants, usually selected using the determinants
to which the sub-determinants 'belong'. These are also
known as methods of behavior change in the Intervention
Mapping framework, or behavior change techniques, BCTs,
in the Behavior Change Wheel approach. For a list of 99
BCPs, see Kok et al. (2016).
</p>
</li>
<li> <p><strong>Conditions for effectiveness</strong>: The conditions
that need to be met for a Behavior Change Principle (BCP) to
be effective. These conditions depend on the specific
underlying Evolutionary Learning Processes (ELPs) that the
BCP engages (Crutzen &amp; Peters, 2018). If the conditions for
effectiveness (called <em>parameters</em> for effectiveness in the
Intervention Mapping framework) are not met, the method will
likely not be effective, or at least, not achieve its
maximum effectiveness.
</p>
</li>
<li> <p><strong>Applications</strong>: Since BCP's describe aspects of
human psychology in general, they are necessarily formulated
on a generic level. Therefore, using them in an intervention
requires translating them to the specific target population,
culture, available means, and context. The result of this
translation is the application of the BCP. Multiple BCPs can
be combined into one application; and one BCP can be applied in
multiple applications (see Kok, 2014).
</p>
</li>
<li> <p><strong>Sub-determinants</strong>: Behavior change interventions
engage specific aspects of the human psychology (ideally, they
specifically, target those aspects found most important in
predicting the target behavior, as can be established with
<code>CIBER</code> plots. These aspects are
called sub-determinants (the Intervention Mapping framework
references <em>Change Objectives</em>, which are sub-determinants
formulated according to specific guidelines). In some
theoretical traditions, sub-determinants are called <em>beliefs</em>.
</p>
</li>
<li> <p><strong>Determinants</strong>: The overarching psychological constructs that
are defined as clusters of specific aspects of the human
psychology that explain humans' behavior (and are targeted
by behavior change interventions). Psychological theories
contain specific definitions of such determinants, and make
statements about how they relate to each other and to human
behavior. There are also theories (and exists empirical
evidence) on how these determinants can be changed (i.e. BCPs),
so althought the sub-determinants are what is targeted in an
intervention, the selection of feasible BCPs requires knowing
to which determinants those sub-determinants belong.
</p>
</li>
<li> <p><strong>Performance objectives</strong>: The specific sub-behaviors that often
underlie (or make up) the ultimate target behavior. These are
distinguished from the overarching target behavior because
the relevant determinants of these sub-behaviors can be
different: for example, the reasons why people do or do not
<em>buy</em> condoms can be very different from the reasons why they
do or do not <em>carry</em> condoms or why they do or do not
<em>negotiate</em> condom use with a sexual partner.
</p>
</li>
<li> <p><strong>Behavior</strong>: The ultimate target behavior of the intervention,
usually an umbrella that implicitly contains multiple
performance objectives.
</p>
</li>
</ul>
<p>For details, see Peters et al. (2019).
</p>


<h3>Value</h3>

<p>A list consisting of an <code>input</code>, <code>intermediate</code>, and
<code>output</code> list, where the ABCD is stored in the <code>output</code> list
as a DiagrammeR::DiagrammeR called <code>graph</code>.
</p>


<h3>Author(s)</h3>

<p>Gjalt-Jorn Peters, <a href="mailto:gjalt-jorn@a-bc.eu">gjalt-jorn@a-bc.eu</a>, with
contributions from Matti Heino and Sander Eggers.
</p>


<h3>References</h3>

<p>Crutzen, R., &amp; Peters, G.-J. Y. (2018). Evolutionary
learning processes as the foundation for behaviour change.
<em>Health Psychology Review,</em> 12(1), 43–57.
https://doi.org/10.1080/17437199.2017.1362569
</p>
<p>Kok, G. (2014). A practical guide to effective behavior
change: How to apply theory- and evidence-based behavior
change methods in an intervention. <em>European Health Psychologist</em>,
16(5), 156–170. https://doi.org/10.31234/osf.io/r78wh
</p>
<p>Kok, G., Gottlieb, N. H., Peters, G.-J. Y., Mullen,
P. D., Parcel, G. S., Ruiter, R. A. C., … Bartholomew,
L. K. (2016). A taxonomy of behavior change methods:
an Intervention Mapping approach. <em>Health Psychology
Review</em>, 10(3), 297–312.
https://doi.org/10.1080/17437199.2015.1077155
</p>
<p>Peters, G.-J. Y., et al. (2019) The core of
behavior change: introducing the Acyclic Behavior Change
Diagram to report and analyze interventions.
</p>


<h3>Examples</h3>

<pre><code class="language-R">### Load one of the ABCD matrices supplied
### with the behaviorchange package
data(abcd_specification_example_xtc);

### Create ABCD matrix (using 'print' to allow pkgdown() to print properly).
print(behaviorchange::abcd(abcd_specification_example_xtc));

### Other examples not executed during testing as creating ABCDs takes long

## Not run: 
### Change the appearance; note that many attributes are specified
### for specific elements, and element-level settings always override
### the global settings that can be specified here.
print(
  behaviorchange::abcd(
    abcd_specification_example_xtc,
    graphTheme = list(
      c("fontname", "Courier New", "node")
    )
  )
);

## End(Not run)

</code></pre>


</div>