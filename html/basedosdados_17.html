<div class="container">

<table style="width: 100%;"><tr>
<td>read_sql</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Query our datalake and get results in a tibble</h2>

<h3>Description</h3>

<p><code>read_sql</code> is given either a fully-written SQL query through the <code>query</code> argument or a valid table name through the <code>table</code> argument.
</p>


<h3>Usage</h3>

<pre><code class="language-R">read_sql(query, billing_project_id = get_billing_id())
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>query</code></td>
<td>
<p>a string containing a valid SQL query.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>billing_project_id</code></td>
<td>
<p>a string containing your billing project id. If you've run <code>set_billing_id</code> then feel free to leave this empty.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>A tibble containing the query's output.
</p>


<h3>Examples</h3>

<pre><code class="language-R">
## Not run: 

set_billing_id("&lt;your id here&gt;")

query &lt;- "SELECT
pib.id_municipio,
pop.ano,
pib.PIB / pop.populacao * 1000 as pib_per_capita
FROM `basedosdados.br_ibge_pib.municipio` as pib
JOIN `basedosdados.br_ibge_populacao.municipio` as pop
ON pib.id_municipio = pop.id_municipio
LIMIT 5 "

data &lt;- read_sql(query)

# in case you want to write your data on disk as a .xlsx, .csv or .Rds file.

library(writexl)
library(readr)

dir &lt;- tempdir()

write_xlsx(data, file.path(dir, "data.xlsx"))
write_csv(data, file.path(dir, "data.csv"))
saveRDS(data, file.path(dir, "data.Rds"))


## End(Not run)

</code></pre>


</div>