<div class="container">

<table style="width: 100%;"><tr>
<td>bm_RunModelsLoop</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Loop to compute all single species distribution models</h2>

<h3>Description</h3>

<p>This internal <span class="pkg">biomod2</span> function allows the user to compute all single 
species distribution models (asked by the <code>BIOMOD_Modeling</code> function).
</p>


<h3>Usage</h3>

<pre><code class="language-R">bm_RunModelsLoop(
  bm.format,
  weights,
  calib.lines,
  modeling.id,
  models,
  models.pa,
  bm.options,
  metric.eval,
  var.import,
  scale.models = TRUE,
  nb.cpu = 1,
  seed.val = NULL,
  do.progress = TRUE
)

bm_RunModel(
  model,
  run.name,
  dir.name = ".",
  modeling.id = "",
  bm.options,
  Data,
  weights.vec,
  calib.lines.vec,
  eval.data = NULL,
  metric.eval = c("ROC", "TSS", "KAPPA"),
  var.import = 0,
  scale.models = TRUE,
  nb.cpu = 1,
  seed.val = NULL,
  do.progress = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>bm.format</code></td>
<td>
<p>a <code>BIOMOD.formated.data</code> or <code>BIOMOD.formated.data.PA</code> 
object returned by the <code>BIOMOD_FormatingData</code> function</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>weights</code></td>
<td>
<p>a <code>matrix</code> containing observation weights for each pseudo-absence (or 
<code>allData</code>) dataset</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>calib.lines</code></td>
<td>
<p>a <code>matrix</code> containing calibration / validation lines for each 
pseudo-absence (or <code>allData</code>) x repetition (or <code>allRun</code>) combination that can be 
obtained with the <code>bm_CrossValidation</code> function</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>modeling.id</code></td>
<td>
<p>a <code>character</code> corresponding to the name (ID) of the simulation set 
(<em>a random number by default</em>)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>models</code></td>
<td>
<p>a <code>vector</code> containing model names to be computed, must be among 
<code>ANN</code>, <code>CTA</code>, <code>FDA</code>, <code>GAM</code>, <code>GBM</code>, <code>GLM</code>, <code>MARS</code>, 
<code>MAXENT</code>, <code>MAXNET</code>, <code>RF</code>, <code>SRE</code>, <code>XGBOOST</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>models.pa</code></td>
<td>
<p>(<em>optional, default</em> <code>NULL</code>) <br> 
A <code>list</code> containing for each model a <code>vector</code> defining which pseudo-absence datasets 
are to be used, must be among <code>colnames(bm.format@PA.table)</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>bm.options</code></td>
<td>
<p>a <code>BIOMOD.models.options</code> object returned by the
<code>bm_ModelingOptions</code> function</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>metric.eval</code></td>
<td>
<p>a <code>vector</code> containing evaluation metric names to be used, must 
be among <code>POD</code>, <code>FAR</code>, <code>POFD</code>, <code>SR</code>, <code>ACCURACY</code>, <code>BIAS</code>, 
<code>ROC</code>, <code>TSS</code>, <code>KAPPA</code>, <code>OR</code>, <code>ORSS</code>, <code>CSI</code>, <code>ETS</code>, 
<code>BOYCE</code>, <code>MPA</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>var.import</code></td>
<td>
<p>(<em>optional, default</em> <code>NULL</code>) <br> 
An <code>integer</code> corresponding to the number of permutations to be done for each variable to 
estimate variable importance</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>scale.models</code></td>
<td>
<p>(<em>optional, default</em> <code>FALSE</code>) <br> 
A <code>logical</code> value defining whether all models predictions should be scaled with a 
binomial GLM or not</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>nb.cpu</code></td>
<td>
<p>(<em>optional, default</em> <code>1</code>) <br> 
An <code>integer</code> value corresponding to the number of computing resources to be used to 
parallelize the single models computation</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>seed.val</code></td>
<td>
<p>(<em>optional, default</em> <code>NULL</code>) <br> 
An <code>integer</code> value corresponding to the new seed value to be set</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>do.progress</code></td>
<td>
<p>(<em>optional, default</em> <code>TRUE</code>) <br> 
A <code>logical</code> value defining whether the progress bar is to be rendered or not</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>model</code></td>
<td>
<p>a <code>character</code> corresponding to the model name to be computed, must be either 
<code>ANN</code>, <code>CTA</code>, <code>FDA</code>, <code>GAM</code>, <code>GBM</code>, <code>GLM</code>, <code>MARS</code>, 
<code>MAXENT</code>, <code>MAXNET</code>, <code>RF</code>, <code>SRE</code>, <code>XGBOOST</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>run.name</code></td>
<td>
<p>a <code>character</code> corresponding to the model to be run (sp.name + pa.id + 
run.id)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>dir.name</code></td>
<td>
<p>(<em>optional, default</em> <code>.</code>) <br>
A <code>character</code> corresponding to the modeling folder</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>Data</code></td>
<td>
<p>a <code>data.frame</code> containing observations, coordinates and environmental 
variables that can be obtained with the <code>get_species_data</code> function</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>weights.vec</code></td>
<td>
<p>a <code>vector</code> containing observation weights the concerned pseudo-absence 
(or <code>allData</code>) dataset</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>calib.lines.vec</code></td>
<td>
<p>a <code>vector</code> containing calibration / validation lines for the 
concerned pseudo-absence (or <code>allData</code>) x repetition (or <code>allRun</code>) combination</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>eval.data</code></td>
<td>
<p>(<em>optional, default</em> <code>NULL</code>) <br>
A <code>data.frame</code> containing validation observations, coordinates and environmental 
variables that can be obtained with the <code>get_eval_data</code> function</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>A <code>list</code> containing for each model a <code>list</code> containing the following elements :
</p>

<ul>
<li> <p><code>model</code> : the name of correctly computed model
</p>
</li>
<li> <p><code>calib.failure</code> : the name of incorrectly computed model
</p>
</li>
<li> <p><code>pred</code> : the prediction outputs for calibration data
</p>
</li>
<li> <p><code>pred.eval</code> : the prediction outputs for evaluation data
</p>
</li>
<li> <p><code>evaluation</code> : the evaluation outputs returned by the 
<code>bm_FindOptimStat</code> function
</p>
</li>
<li> <p><code>var.import</code> : the mean of variables importance returned by the 
<code>bm_VariablesImportance</code> function
</p>
</li>
</ul>
<h3>Author(s)</h3>

<p>Damien Georges
</p>


<h3>See Also</h3>

<p><code>rpart</code>, <code>prune</code>, <code>gbm</code>, 
<code>nnet</code>, <code>earth</code>, 
<code>fda</code>, <code>mars</code>, <code>maxnet</code>, 
<code>randomForest</code>, <code>xgboost</code>, 
<code>bm_ModelingOptions</code>, <code>BIOMOD_Modeling</code>, 
<code>bm_MakeFormula</code>, <code>bm_SampleFactorLevels</code>, 
<code>bm_FindOptimStat</code>, <code>bm_VariablesImportance</code>
</p>
<p>Other Secundary functions: 
<code>bm_BinaryTransformation()</code>,
<code>bm_CrossValidation()</code>,
<code>bm_FindOptimStat()</code>,
<code>bm_MakeFormula()</code>,
<code>bm_ModelingOptions()</code>,
<code>bm_PlotEvalBoxplot()</code>,
<code>bm_PlotEvalMean()</code>,
<code>bm_PlotRangeSize()</code>,
<code>bm_PlotResponseCurves()</code>,
<code>bm_PlotVarImpBoxplot()</code>,
<code>bm_PseudoAbsences()</code>,
<code>bm_SRE()</code>,
<code>bm_SampleBinaryVector()</code>,
<code>bm_SampleFactorLevels()</code>,
<code>bm_Tuning()</code>,
<code>bm_VariablesImportance()</code>
</p>


</div>