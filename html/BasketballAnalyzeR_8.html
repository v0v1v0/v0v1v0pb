<div class="container">

<table style="width: 100%;"><tr>
<td>expectedpts</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Plots expected points of shots as a function of the distance from the basket (default) or another variable</h2>

<h3>Description</h3>

<p>Plots expected points of shots as a function of the distance from the basket (default) or another variable
</p>


<h3>Usage</h3>

<pre><code class="language-R">expectedpts(
  data,
  var = "shot_distance",
  players = NULL,
  bw = 10,
  period.length = 12,
  palette = gg_color_hue,
  team = TRUE,
  col.team = "gray",
  col.hline = "black",
  xlab = NULL,
  x.range = "auto",
  title = NULL,
  legend = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>data</code></td>
<td>
<p>a data frame whose rows are field shots and with the following columns: <code>points</code>, <code>event_type</code>, <code>player</code> (only if the <code>players</code> argument is not <code>NULL</code>) and at least one of <code>playlength</code>, <code>periodTime</code>, <code>totalTime</code>, <code>shot_distance</code> (the column specified in <code>var</code>, see Details).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>var</code></td>
<td>
<p>character, a string giving the name of the numerical variable according to which the expected points are estimated; available options <code>"playlength"</code>, <code>"periodTime"</code>, <code>"totalTime"</code>, <code>"shot_distance"</code> (default).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>players</code></td>
<td>
<p>subset of players to be displayed (optional; it can be used only if the <code>player</code> column is present in <code>data</code>).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>bw</code></td>
<td>
<p>numeric, smoothing bandwidth of the kernel density estimator (see <code>ksmooth</code>).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>period.length</code></td>
<td>
<p>numeric, the length of a quarter in minutes (default: 12 minutes as in NBA).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>palette</code></td>
<td>
<p>color palette.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>team</code></td>
<td>
<p>logical; if <code>TRUE</code>, draws the expected points for all the shots in data.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>col.team</code></td>
<td>
<p>character, color of the expected points line for all the shots in data (default <code>"gray"</code>).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>col.hline</code></td>
<td>
<p>character, color of the dashed horizontal line (default <code>"black"</code>) denoting the expected points for all the shots in data, not conditional to the variable in the x-axis.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>xlab</code></td>
<td>
<p>character, x-axis label.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>x.range</code></td>
<td>
<p>numerical vector or character; available options: <code>NULL</code> (x-axis range defined by <code>ggplot2</code>, the default), <code>"auto"</code> (internally defined x-axis range), or a 2-component numerical vector (user-defined x-axis range).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>title</code></td>
<td>
<p>character, plot title.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>legend</code></td>
<td>
<p>logical, if <code>TRUE</code>, color legend is displayed (only when <code>players</code> is not <code>NULL</code>).</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>The <code>data</code> data frame could also be a play-by-play dataset provided that rows corresponding to events different from field shots have values different from <code>"shot"</code> or <code>"miss"</code> in the <code>even_type</code> variable.
</p>
<p>Required columns:
</p>

<ul><li> <p><code>event_type</code>, a factor with the following levels: <code>"shot"</code> for made field shots and <code>"miss"</code> for missed field shots
</p>
</li></ul>
<ul><li> <p><code>player</code>, a factor with the name of the player who made the shot
</p>
</li></ul>
<ul><li> <p><code>points</code>, a numeric variable (integer) with the points scored by made shots and <code>0</code> for missed shots
</p>
</li></ul>
<ul><li> <p><code>playlength</code>, a numeric variable with time between the shot and the immediately preceding event
</p>
</li></ul>
<ul><li> <p><code>periodTime</code>, a numeric variable with seconds played in the quarter when the shot is attempted
</p>
</li></ul>
<ul><li> <p><code>totalTime</code>, a numeric variable with seconds played in the whole match when the shot is attempted
</p>
</li></ul>
<ul><li> <p><code>shot_distance</code>, a numeric variable with the distance of the shooting player from the basket (in feet)
</p>
</li></ul>
<h3>Value</h3>

<p>A <code>ggplot2</code> plot
</p>


<h3>Author(s)</h3>

<p>Marco Sandri, Paola Zuccolotto, Marica Manisera (<a href="mailto:basketballanalyzer.help@unibs.it">basketballanalyzer.help@unibs.it</a>)
</p>


<h3>References</h3>

<p>P. Zuccolotto and M. Manisera (2020) Basketball Data Science: With Applications in R. CRC Press.
</p>


<h3>Examples</h3>

<pre><code class="language-R">PbP &lt;- PbPmanipulation(PbP.BDB)
PbP.GSW &lt;- subset(PbP, team=="GSW" &amp; !is.na(shot_distance))
plrys &lt;- c("Stephen Curry","Kevin Durant")
expectedpts(data=PbP.GSW, bw=10, players=plrys, col.team='dodgerblue',
        palette=colorRampPalette(c("gray","black")), col.hline="red")
</code></pre>


</div>