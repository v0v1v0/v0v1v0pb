<div class="container">

<table style="width: 100%;"><tr>
<td>biglasso-package</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Extending Lasso Model Fitting to Big Data</h2>

<h3>Description</h3>

<p>Extend lasso and elastic-net linear, logistic and cox regression models for
ultrahigh-dimensional, multi-gigabyte data sets that cannot be loaded into
available RAM. This package utilizes memory-mapped files to store the
massive data on the disk and only read those into memory whenever necessary
during model fitting. Moreover, some advanced feature screening rules are
proposed and implemented to accelerate the model fitting. As a result, this
package is much more memory- and computation-efficient and highly scalable
as compared to existing lasso-fitting packages such as
<a href="https://CRAN.R-project.org/package=glmnet">glmnet</a> and
<a href="https://CRAN.R-project.org/package=ncvreg">ncvreg</a>, thus allowing for
powerful big data analysis even with only an ordinary laptop.
</p>


<h3>Details</h3>


<table>
<tr>
<td style="text-align: left;"> Package: </td>
<td style="text-align: left;"> biglasso</td>
</tr>
<tr>
<td style="text-align: left;"> Type: </td>
<td style="text-align: left;"> Package</td>
</tr>
<tr>
<td style="text-align: left;"> Version: </td>
<td style="text-align: left;">
1.4-1</td>
</tr>
<tr>
<td style="text-align: left;"> Date: </td>
<td style="text-align: left;"> 2021-01-29</td>
</tr>
<tr>
<td style="text-align: left;"> License: </td>
<td style="text-align: left;"> GPL-3</td>
</tr>
</table>
<p>Penalized regression models, in particular the lasso, have been extensively
applied to analyzing high-dimensional data sets. However, due to the memory
limit, existing R packages are not capable of fitting lasso models for
ultrahigh-dimensional, multi-gigabyte data sets which have been increasingly
seen in many areas such as genetics, biomedical imaging, genome sequencing
and high-frequency finance.
</p>
<p>This package aims to fill the gap by extending lasso model fitting to Big
Data in R. Version &gt;= 1.2-3 represents a major redesign where the source
code is converted into C++ (previously in C), and new feature screening
rules, as well as OpenMP parallel computing, are implemented. Some key
features of <code>biglasso</code> are summarized as below: </p>
 <ol>
<li>
<p> it
utilizes memory-mapped files to store the massive data on the disk, only
loading data into memory when necessary during model fitting. Consequently,
it's able to seamlessly data-larger-than-RAM cases. </p>
</li>
<li>
<p> it is built upon
pathwise coordinate descent algorithm with warm start, active set cycling,
and feature screening strategies, which has been proven to be one of fastest
lasso solvers. </p>
</li>
<li>
<p> in incorporates our newly developed hybrid and adaptive
screening that outperform state-of-the-art screening rules such as
the sequential strong rule (SSR) and the sequential EDPP rule (SEDPP) with
additional 1.5x to 4x speedup. </p>
</li>
<li>
<p> the implementation is designed to be as
memory-efficient as possible by eliminating extra copies of the data created
by other R packages, making it at least 2x more memory-efficient than
<code>glmnet</code>. </p>
</li>
<li>
<p> the underlying computation is implemented in C++, and
parallel computing with OpenMP is also supported. </p>
</li>
</ol>
<p><strong>For more information:</strong>
</p>

<ul>
<li>
<p> Benchmarking results: <a href="https://github.com/pbreheny/biglasso">https://github.com/pbreheny/biglasso</a>
</p>
</li>
<li>
<p> Tutorial: <a href="https://pbreheny.github.io/biglasso/articles/biglasso.html">https://pbreheny.github.io/biglasso/articles/biglasso.html</a>
</p>
</li>
<li>
<p> Technical paper: <a href="https://arxiv.org/abs/1701.05936">https://arxiv.org/abs/1701.05936</a>
</p>
</li>
</ul>
<h3>Note</h3>

<p>The input design matrix X must be a <code>bigmemory::big.matrix()</code> object.
This can be created by the function <code>as.big.matrix</code> in the R package
<a href="https://CRAN.R-project.org//package=bigmemory">bigmemory</a>.
If the data (design matrix) is very large (e.g. 10 GB) and stored in an external
file, which is often the case for big data, X can be created by calling the
function <code>setupX()</code>.
<strong>In this case, there are several restrictions about the data file:</strong>
</p>
 <ol>
<li>
<p> the data file must be a well-formated ASCII-file, with
each row corresponding to an observation and each column a variable; </p>
</li>
<li>
<p>the data file must contain only one single type. Current version only
supports <code>double</code> type; </p>
</li>
<li>
<p> the data file must contain only numeric
variables. If there are categorical variables, the user needs to create
dummy variables for each categorical varable (by adding additional columns).</p>
</li>
</ol>
<p>Future versions will try to address these restrictions.
</p>
<p>Denote the number of observations and variables be, respectively, <code>n</code>
and <code>p</code>. It's worth noting that the package is more suitable for wide
data (ultrahigh-dimensional, <code style="white-space: pre;">⁠p &gt;&gt; n⁠</code>) as compared to long data
(<code style="white-space: pre;">⁠n &gt;&gt; p⁠</code>). This is because the model fitting algorithm takes advantage
of sparsity assumption of high-dimensional data. To just give the user some
ideas, below are some benchmarking results of the total computing time (in
seconds) for solving lasso-penalized linear regression along a sequence of
100 values of the tuning parameter. In all cases, assume 20 non-zero
coefficients equal +/- 2 in the true model. (Based on Version 1.2-3,
screening rule "SSR-BEDPP" is used)
</p>
 <ul>
<li>
<p> For wide data case (<code>p &gt; n</code>), <code style="white-space: pre;">⁠n = 1,000⁠</code>:
</p>

<table>
<tr>
<td style="text-align: center;"> <code>p</code> </td>
<td style="text-align: center;"> 1,000 </td>
<td style="text-align: center;"> 10,000 </td>
<td style="text-align: center;"> 100,000 </td>
<td style="text-align: center;"> 1,000,000
</td>
</tr>
<tr>
<td style="text-align: center;"> Size of <code>X</code> </td>
<td style="text-align: center;"> 9.5 MB </td>
<td style="text-align: center;"> 95 MB </td>
<td style="text-align: center;"> 950 MB </td>
<td style="text-align: center;"> 9.5 GB </td>
</tr>
<tr>
<td style="text-align: center;">
Elapsed time (s) </td>
<td style="text-align: center;"> 0.11 </td>
<td style="text-align: center;"> 0.83 </td>
<td style="text-align: center;"> 8.47 </td>
<td style="text-align: center;"> 85.50 </td>
</tr>
<tr>
<td style="text-align: center;"> </td>
</tr>
</table>
<p>%</p>
</li>
<li>
<p> For long data case (<code style="white-space: pre;">⁠n &gt;&gt; p⁠</code>), <code style="white-space: pre;">⁠p = 1,000⁠</code>:
%</p>

<table>
<tr>
<td style="text-align: center;">
%<code>n</code> </td>
<td style="text-align: center;"> 1,000 </td>
<td style="text-align: center;"> 10,000 </td>
<td style="text-align: center;"> 100,000 </td>
<td style="text-align: center;"> 1,000,000 </td>
</tr>
<tr>
<td style="text-align: center;">
%Size of <code>X</code> </td>
<td style="text-align: center;"> 9.5 MB </td>
<td style="text-align: center;"> 95 MB </td>
<td style="text-align: center;"> 950 MB </td>
<td style="text-align: center;"> 9.5 GB </td>
</tr>
<tr>
<td style="text-align: center;">
%Elapsed time (s) </td>
<td style="text-align: center;"> 2.50 </td>
<td style="text-align: center;"> 11.43 </td>
<td style="text-align: center;"> 83.69 </td>
<td style="text-align: center;"> 1090.62 </td>
</tr>
<tr>
<td style="text-align: center;"> %</td>
</tr>
</table>
</li>
</ul>
<h3>Author(s)</h3>

<p>Yaohui Zeng, Chuyi Wang, Tabitha Peter, and Patrick Breheny
</p>


<h3>References</h3>

 <ul>
<li>
<p> Zeng, Y., and Breheny, P. (2017). The biglasso
Package: A Memory- and Computation-Efficient Solver for Lasso Model Fitting
with Big Data in R. <a href="https://arxiv.org/abs/1701.05936">https://arxiv.org/abs/1701.05936</a>.  </p>
</li>
<li>
<p>Tibshirani, R., Bien, J., Friedman, J., Hastie, T., Simon, N., Taylor, J.,
and Tibshirani, R. J. (2012). Strong rules for discarding predictors in
lasso-type problems. <em>Journal of the Royal Statistical Society: Series
B (Statistical Methodology)</em>, <strong>74</strong>(2), 245-266.  </p>
</li>
<li>
<p> Wang, J.,
Zhou, J., Wonka, P., and Ye, J. (2013). Lasso screening rules via dual
polytope projection. <em>In Advances in Neural Information Processing
Systems</em>, pp. 1070-1078.  </p>
</li>
<li>
<p> Xiang, Z. J., and Ramadge, P. J. (2012).
Fast lasso screening tests based on correlations. <em>In Acoustics, Speech
and Signal Processing (ICASSP), 2012 IEEE International Conference on</em> (pp.
2137-2140). IEEE.  </p>
</li>
<li>
<p> Wang, J., Zhou, J., Liu, J., Wonka, P., and Ye, J.
(2014). A safe screening rule for sparse logistic regression. <em>In
Advances in Neural Information Processing Systems</em>, pp. 1053-1061.  </p>
</li>
</ul>
<h3>Examples</h3>

<pre><code class="language-R">## Not run: 
## Example of reading data from external big data file, fit lasso model, 
## and run cross validation in parallel

# simulated design matrix, 1000 observations, 500,000 variables, ~ 5GB
# there are 10 true variables with non-zero coefficient 2.
xfname &lt;- 'x_e3_5e5.txt' 
yfname &lt;- 'y_e3_5e5.txt' # response vector
time &lt;- system.time(
  X &lt;- setupX(xfname, sep = '\t') # create backing files (.bin, .desc)
)
print(time) # ~ 7 minutes; this is just one-time operation
dim(X)

# the big.matrix then can be retrieved by its descriptor file (.desc) in any new R session. 
rm(X)
xdesc &lt;- 'x_e3_5e5.desc' 
X &lt;- attach.big.matrix(xdesc)
dim(X)

y &lt;- as.matrix(read.table(yfname, header = F))
time.fit &lt;- system.time(
  fit &lt;- biglasso(X, y, family = 'gaussian', screen = 'Hybrid')
)
print(time.fit) # ~ 44 seconds for fitting a lasso model along the entire solution path

# cross validation in parallel
seed &lt;- 1234
time.cvfit &lt;- system.time(
  cvfit &lt;- cv.biglasso(X, y, family = 'gaussian', screen = 'Hybrid', 
                       seed = seed, ncores = 4, nfolds = 10)
)
print(time.cvfit) # ~ 3 minutes for 10-fold cross validation
plot(cvfit)
summary(cvfit)

## End(Not run)

</code></pre>


</div>