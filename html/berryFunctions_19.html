<div class="container">

<table style="width: 100%;"><tr>
<td>climateGraph</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>climate graph after Walter and Lieth</h2>

<h3>Description</h3>

<p>Draw a climate diagram by the standards of Walter and Lieth.
</p>


<h3>Usage</h3>

<pre><code class="language-R">climateGraph(temp, rain,
  main = "StatName\n52\U{00B0}24' N / 12\U{00B0}58' E\n42 m aSL",
  units = c("\U{00B0}C", "mm"), labs = substr(month.abb, 1, 1), 
  textprop = 0.25, ylim = range(temp, rain/2), compress = FALSE,
  ticklab = -8:30 * 10, ticklin = -15:60 * 5, box = TRUE,
  mar = c(1.5, 2.3, 4.5, 0.2), keeppar = TRUE, colrain = "blue",
  coltemp = "red", lwd = 2, arghumi = NULL, argarid = NULL,
  argcomp = NULL, arggrid = NULL, argtext = NULL, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>temp</code></td>
<td>
<p>monthly temperature mean in degrees C</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>rain</code></td>
<td>
<p>monthly rain sum in mm (12 values)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>main</code></td>
<td>
<p>location info as character string. can have \n.
DEFAULT: "StatName\n52d 24' N / 12d 58' E\n42 m aSL"</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>units</code></td>
<td>
<p>units used for labeling. DEFAULT: c("d C", "mm")</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>labs</code></td>
<td>
<p>labels for x axis. DEFAULT: J,F,M,A,M,J,J,A,S,O,N,D</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>textprop</code></td>
<td>
<p>proportion of graphic that is used for writing the values
in a table to the right. DEFAULT: 0.25</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ylim</code></td>
<td>
<p>limit for y axis in temp units. DEFAULT: range(temp, rain/2)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>compress</code></td>
<td>
<p>should rain&gt;100 mm be compressed with adjusted labeling?
(not recommended for casual visualization!). DEFAULT: FALSE</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ticklab</code></td>
<td>
<p>positions for vertical labeling. DEFAULT: -8:30*10</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ticklin</code></td>
<td>
<p>positions for horizontal line drawing. DEFAULT: -15:60*5</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>box</code></td>
<td>
<p>draw box along outer margins of graph? DEFAULT: TRUE</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>mar</code></td>
<td>
<p>plot margins. DEFAULT: c(1.5,2.3,4.5,0.2)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>keeppar</code></td>
<td>
<p>Keep the changed graphical parameters? DEFAULT: TRUE</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>colrain</code></td>
<td>
<p>Color for rain line and axis labels. DEFAULT: "blue"</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>coltemp</code></td>
<td>
<p>color for temperature line and axis labels. DEFAULT: "red"</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>lwd</code></td>
<td>
<p>line width of actual temp and rain lines. DEFAULT: 2</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>arghumi</code></td>
<td>
<p>List of arguments for humid <code>polygon</code>,
like density, angle. DEFAULT: NULL (internal x,y, col, border)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>argarid</code></td>
<td>
<p>List of arguments for arid area. DEFAULT: NULL</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>argcomp</code></td>
<td>
<p>List of arguments for compressed rainfall polygon. DEFAULT: NULL</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>arggrid</code></td>
<td>
<p>List of arguments for background grid lines. DEFAULT: NULL</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>argtext</code></td>
<td>
<p>List of arguments for text at right hand if textprop&gt;0. DEFAULT: NULL</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>further arguments passed to plot, like col.main</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>None. Plots data and table.
</p>


<h3>Author(s)</h3>

<p>Berry Boessenkool, <a href="mailto:berry-b@gmx.de">berry-b@gmx.de</a>, June 2013
</p>


<h3>References</h3>

<p>Heinrich Walter, Helmut Lieth: Klimadiagramm-Weltatlas. Gustav Fischer Verlag, Jena 1967
</p>


<h3>See Also</h3>

<p><code>diagwl</code> in package <code>climatol</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">
temp &lt;- c(-9.3,-8.2,-2.8,6.3,13.4,16.8,18.4,17,11.7,5.6,-1,-5.9)#
rain &lt;- c(46,46,36,30,31,21,26,57,76,85,59,46)

climateGraph(temp, rain)
climateGraph(temp, rain, textprop=0.6)
climateGraph(temp, rain, mar=c(2,3,4,3), textprop=0) # no table written to the right
# vertical lines instead of filled polygon:
climateGraph(temp, rain, arghumi=list(density=15, angle=90))
# fill color for arid without transparency:
climateGraph(temp, rain, argarid=list(col="gold"))
# for the Americans - axes should be different, though!:
climateGraph(temp, rain, units=c("\U{00B0}F","in"))

rain2 &lt;- c(23, 11, 4, 2, 10, 53, 40, 15, 21, 25, 29, 22)
# fix ylim if you want to compare diagrams of different stations:
climateGraph(temp, rain2, ylim=c(-15, 50)) # works with two arid phases as well

op &lt;- par(mfrow=c(2,1)) # mulipanel plot
climateGraph(temp, rain, argtext=list(cex=0.7))
climateGraph(temp, rain2, argtext=list(cex=0.7))
par(op)

rain &lt;- c(54, 23, 5, 2, 5, 70, 181, 345, 265, 145, 105, 80) # with extrema
climateGraph(temp, rain) # August can be visually compared to June
climateGraph(temp, rain, compress=TRUE)
# compressing extrema enables a better view of the temperature,
# but heigths of rain cannot be visually compared anymore
climateGraph(temp, rain, compress=TRUE, ylim=c(-10, 90))
# needs ylim in linearly continued temp units
climateGraph(temp, rain, compress=TRUE, argcomp=list(density=30, col="green"))

# example with (fake) weekly relative soil moisture (RSM) added:
temp &lt;- c(-9.3,-8.2,-2.8,6.3,13.4,16.8,18.4,17,11.7,5.6,-1,-5.9)
rain &lt;- c(46,46,36,30,31,21,26,57,76,85,59,46)
set.seed(3)
soil &lt;- berryFunctions::rescale( cumsum(rnorm(52)), from=1, to=100)
xsoil &lt;- seq(1, 12, length.out=52)

climateGraph(temp, rain, ylim=c(-10, 50) ) # ylim for RSM 0:100 on second axis
lines(xsoil, soil/2, lwd=5, col="orange")

mtext(paste("Relative\nsoil moisture\n\U00D8", round(mean(soil), 1), "%"), 
      side=3, col="orange", line=1, adj=0.99)


## Not run: 
pdf("ClimateGraph.pdf")
climateGraph(temp, rain, main="Another Station\nlocated somewhere else")
dev.off()
openFile("ClimateGraph.pdf")
unlink("ClimateGraph.pdf")

# further German reading:
browseURL("https://www.klimadiagramme.de/all.html")


# Climate Graphs for the USA:
NOOAlink &lt;- "https://www1.ncdc.noaa.gov/pub/data/normals/1981-2010/"
browseURL(NOOAlink)
# Find your Station here:
browseURL(paste0(NOOAlink,"/station-inventories/allstations.txt"))

# Data from Roseburg, Oregon:
download.file(destfile="Roseburg.txt", url=paste0("https://www1.ncdc.noaa.gov/",
          "pub/data/normals/1981-2010/products/station/USC00357331.normals.txt"))
RT &lt;- read.table(file="Roseburg.txt", skip=11, nrows=1, as.is=TRUE)[1,-1]
RT &lt;- ( as.numeric(substr(RT,1,3))/10   - 32) * 5/9     # converted to degrees C
RP &lt;- read.table(file="Roseburg.txt", skip=580, nrows=1, as.is=TRUE)[1,-1]
RP &lt;-  as.numeric(substr(RP,1,nchar(RP)-1))/100*25.4
meta &lt;- read.table(file="Roseburg.txt", nrows=5, as.is=TRUE, sep=":")
meta &lt;- paste(meta[1,2], paste(meta[3:4 ,2], collapse=" /"), meta[5,2], sep="\n")
unlink("Roseburg.txt")

climateGraph(RT, RP, main=meta)
climateGraph(RT, RP, main=meta, compress=TRUE)


# Climate Graphs for Germany:
browseURL("https://github.com/brry/rdwd#rdwd")
link &lt;- rdwd::selectDWD("Potsdam", res="monthly", var="kl", per="h")
file &lt;- rdwd::dataDWD(link, dir=tempdir(), read=FALSE)
clim &lt;- rdwd::readDWD(file)
rdwd::readVars(file)
temp &lt;- tapply(clim$MO_TT, INDEX=format(clim$MESS_DATUM, "%m"), FUN=mean, na.rm=FALSE)
precsums &lt;- tapply(clim$MO_RR, INDEX=format(clim$MESS_DATUM, "%Y-%m"), FUN=sum)
eachmonth &lt;- format(strptime(paste(names(precsums),"01"), "%Y-%m %d"),"%m")
prec &lt;- tapply(precsums, eachmonth, FUN=mean, na.rm=TRUE)
meta &lt;- paste("Potsdam\n", paste(range(clim$MESS_DATUM, na.rm=TRUE), 
                                 collapse=" to "), "\n", sep="")

climateGraph(temp, prec, main=meta, ylim=c(-2, 45))
# Add Quartiles (as in boxplots): numerically sorted, 50% of the data lie inbetween
TQ &lt;- tapply(clim$MO_TT, INDEX=format(clim$MESS_DATUM, "%m"), FUN=quantile)
TQ &lt;- sapply(TQ, I)
arrows(x0=1:12, y0=TQ["25%",], y1=TQ["75%",], angle=90, code=3, col=2, len=0.1)
#
PQ &lt;- tapply(precsums, eachmonth, FUN=quantile, na.rm=TRUE)
PQ &lt;- sapply(PQ, I)
arrows(x0=1:12, y0=PQ["25%",]/2, y1=PQ["75%",]/2, angle=90, code=3, col=4, len=0, lwd=3, lend=1)
mtext("IQR shown als lines", col=8, at=6.5, line=0.7, cex=1.2, font=2)


# Comparison to diagram in climatol
# library2("climatol") # commented out to avoid dah error in dataStr testing
# data(datcli)
# diagwl(datcli,est="Example station",alt=100,per="1961-90",mlab="en")


## End(Not run)

</code></pre>


</div>