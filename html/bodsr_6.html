<div class="container">

<table style="width: 100%;"><tr>
<td>get_location_xml</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Return XML vehicle location data from the 'BODS' API</h2>

<h3>Description</h3>

<p>Return XML vehicle location data from the 'BODS' API
</p>


<h3>Usage</h3>

<pre><code class="language-R">get_location_xml(
  api_key = Sys.getenv("BODS_KEY"),
  bounding_box = NULL,
  noc = NULL,
  vehicle_ref = NULL,
  line_ref = NULL,
  producer_ref = NULL,
  origin_ref = NULL,
  destination_ref = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>api_key</code></td>
<td>
<p>API key for the 'BODS' dataset passed as a string. Can be obtained from <a href="https://data.bus-data.dft.gov.uk/api/">the 'BODS' API login</a></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>bounding_box</code></td>
<td>
<p>vector of four numerics. Limit results to location data
for vehicles within the rectangular boundingBox
you set using co-ordinates [minLatitude, maxLatitude, minLongitude, maxLongitude].
Defaults to NULL.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>noc</code></td>
<td>
<p>string or vector of strings. Limit results to fares data sets for specified National Operator Codes.
A full lookup of NOC to bus operator names can be seen using noc_lookup().
Defaults to NULL.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>vehicle_ref</code></td>
<td>
<p>string. Limit results to bus location data with the
specified vehicle_ref. This is a unique reference for the vehicle that is
consistent and is generated by the vehicle equipment. Defaults to NULL.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>line_ref</code></td>
<td>
<p>string. Limit results to bus location data with the
specified line_ref. Defaults to NULL.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>producer_ref</code></td>
<td>
<p>string. Limit results to bus location data with the
specified producer_ref. Defaults to NULL.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>origin_ref</code></td>
<td>
<p>string. Limit results to bus location data with the
specified origin reference. Accepts any National Public Transport Access Nodes (NaPTAN) value,
which can be found <a href="https://www.data.gov.uk/dataset/ff93ffc1-6656-47d8-9155-85ea0b8f2251/national-public-transport-access-nodes-naptan">the NaPTAN access nodes dataset</a>.
Defaults to NULL.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>destination_ref</code></td>
<td>
<p>string. Limit results to bus location data with the
specified destination reference. Accepts any National Public Transport Access Nodes (NaPTAN) value,
which can be found <a href="https://www.data.gov.uk/dataset/ff93ffc1-6656-47d8-9155-85ea0b8f2251/national-public-transport-access-nodes-naptan">the NaPTAN access nodes dataset</a>.
Defaults to NULL.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>Returns bus location data in XML SIRI-VM format. More detail on this format can be found <a href="https://data.bus-data.dft.gov.uk/guidance/requirements/?section=dataformats">the 'BODS' data formats documentation</a>
</p>


<h3>Examples</h3>

<pre><code class="language-R">
## Not run: 
#Before running these examples, ensure you have an API key saved

##Return unfiltered data from XML API
get_location_xml()

#Return data for vehicle reference "BUSC" only
get_location_xml(vehicle_ref = "BUSC")

#Return data for specified origin
get_location_xml(origin_ref = "21024515")


## End(Not run)
</code></pre>


</div>