<div class="container">

<table style="width: 100%;"><tr>
<td>run_expectancy_code</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2><strong>Generate run expectancy and related measures from Baseball Savant data</strong></h2>

<h3>Description</h3>

<p>These functions allow a user to generate run expectancy and related measures and variables from Baseball Savant data. Measures and variables will be added to the data frame.
</p>


<h3>Usage</h3>

<pre><code class="language-R">run_expectancy_code(df, level = "plate appearance")
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>df</code></td>
<td>
<p>A data frame generated from Baseball Savant.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>level</code></td>
<td>
<p>Whether you want run expectancy calculated at the plate appearance or pitch level. Defaults to plate appearance.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>Returns a tibble with the following columns:</p>

<table>
<tr>
<td style="text-align: left;">
   col_name </td>
<td style="text-align: left;"> types </td>
</tr>
<tr>
<td style="text-align: left;">
   pitch_type </td>
<td style="text-align: left;"> character </td>
</tr>
<tr>
<td style="text-align: left;">
   game_date </td>
<td style="text-align: left;"> Date </td>
</tr>
<tr>
<td style="text-align: left;">
   release_speed </td>
<td style="text-align: left;"> numeric </td>
</tr>
<tr>
<td style="text-align: left;">
   release_pos_x </td>
<td style="text-align: left;"> numeric </td>
</tr>
<tr>
<td style="text-align: left;">
   release_pos_z </td>
<td style="text-align: left;"> numeric </td>
</tr>
<tr>
<td style="text-align: left;">
   player_name </td>
<td style="text-align: left;"> character </td>
</tr>
<tr>
<td style="text-align: left;">
   batter </td>
<td style="text-align: left;"> numeric </td>
</tr>
<tr>
<td style="text-align: left;">
   pitcher </td>
<td style="text-align: left;"> numeric </td>
</tr>
<tr>
<td style="text-align: left;">
   events </td>
<td style="text-align: left;"> character </td>
</tr>
<tr>
<td style="text-align: left;">
   description </td>
<td style="text-align: left;"> character </td>
</tr>
<tr>
<td style="text-align: left;">
   spin_dir </td>
<td style="text-align: left;"> logical </td>
</tr>
<tr>
<td style="text-align: left;">
   spin_rate_deprecated </td>
<td style="text-align: left;"> logical </td>
</tr>
<tr>
<td style="text-align: left;">
   break_angle_deprecated </td>
<td style="text-align: left;"> logical </td>
</tr>
<tr>
<td style="text-align: left;">
   break_length_deprecated </td>
<td style="text-align: left;"> logical </td>
</tr>
<tr>
<td style="text-align: left;">
   zone </td>
<td style="text-align: left;"> numeric </td>
</tr>
<tr>
<td style="text-align: left;">
   des </td>
<td style="text-align: left;"> character </td>
</tr>
<tr>
<td style="text-align: left;">
   game_type </td>
<td style="text-align: left;"> character </td>
</tr>
<tr>
<td style="text-align: left;">
   stand </td>
<td style="text-align: left;"> character </td>
</tr>
<tr>
<td style="text-align: left;">
   p_throws </td>
<td style="text-align: left;"> character </td>
</tr>
<tr>
<td style="text-align: left;">
   home_team </td>
<td style="text-align: left;"> character </td>
</tr>
<tr>
<td style="text-align: left;">
   away_team </td>
<td style="text-align: left;"> character </td>
</tr>
<tr>
<td style="text-align: left;">
   type </td>
<td style="text-align: left;"> character </td>
</tr>
<tr>
<td style="text-align: left;">
   hit_location </td>
<td style="text-align: left;"> integer </td>
</tr>
<tr>
<td style="text-align: left;">
   bb_type </td>
<td style="text-align: left;"> character </td>
</tr>
<tr>
<td style="text-align: left;">
   balls </td>
<td style="text-align: left;"> integer </td>
</tr>
<tr>
<td style="text-align: left;">
   strikes </td>
<td style="text-align: left;"> integer </td>
</tr>
<tr>
<td style="text-align: left;">
   game_year </td>
<td style="text-align: left;"> integer </td>
</tr>
<tr>
<td style="text-align: left;">
   pfx_x </td>
<td style="text-align: left;"> numeric </td>
</tr>
<tr>
<td style="text-align: left;">
   pfx_z </td>
<td style="text-align: left;"> numeric </td>
</tr>
<tr>
<td style="text-align: left;">
   plate_x </td>
<td style="text-align: left;"> numeric </td>
</tr>
<tr>
<td style="text-align: left;">
   plate_z </td>
<td style="text-align: left;"> numeric </td>
</tr>
<tr>
<td style="text-align: left;">
   on_3b </td>
<td style="text-align: left;"> numeric </td>
</tr>
<tr>
<td style="text-align: left;">
   on_2b </td>
<td style="text-align: left;"> numeric </td>
</tr>
<tr>
<td style="text-align: left;">
   on_1b </td>
<td style="text-align: left;"> numeric </td>
</tr>
<tr>
<td style="text-align: left;">
   outs_when_up </td>
<td style="text-align: left;"> integer </td>
</tr>
<tr>
<td style="text-align: left;">
   inning </td>
<td style="text-align: left;"> numeric </td>
</tr>
<tr>
<td style="text-align: left;">
   inning_topbot </td>
<td style="text-align: left;"> character </td>
</tr>
<tr>
<td style="text-align: left;">
   hc_x </td>
<td style="text-align: left;"> numeric </td>
</tr>
<tr>
<td style="text-align: left;">
   hc_y </td>
<td style="text-align: left;"> numeric </td>
</tr>
<tr>
<td style="text-align: left;">
   tfs_deprecated </td>
<td style="text-align: left;"> logical </td>
</tr>
<tr>
<td style="text-align: left;">
   tfs_zulu_deprecated </td>
<td style="text-align: left;"> logical </td>
</tr>
<tr>
<td style="text-align: left;">
   fielder_2 </td>
<td style="text-align: left;"> numeric </td>
</tr>
<tr>
<td style="text-align: left;">
   umpire </td>
<td style="text-align: left;"> logical </td>
</tr>
<tr>
<td style="text-align: left;">
   sv_id </td>
<td style="text-align: left;"> character </td>
</tr>
<tr>
<td style="text-align: left;">
   vx0 </td>
<td style="text-align: left;"> numeric </td>
</tr>
<tr>
<td style="text-align: left;">
   vy0 </td>
<td style="text-align: left;"> numeric </td>
</tr>
<tr>
<td style="text-align: left;">
   vz0 </td>
<td style="text-align: left;"> numeric </td>
</tr>
<tr>
<td style="text-align: left;">
   ax </td>
<td style="text-align: left;"> numeric </td>
</tr>
<tr>
<td style="text-align: left;">
   ay </td>
<td style="text-align: left;"> numeric </td>
</tr>
<tr>
<td style="text-align: left;">
   az </td>
<td style="text-align: left;"> numeric </td>
</tr>
<tr>
<td style="text-align: left;">
   sz_top </td>
<td style="text-align: left;"> numeric </td>
</tr>
<tr>
<td style="text-align: left;">
   sz_bot </td>
<td style="text-align: left;"> numeric </td>
</tr>
<tr>
<td style="text-align: left;">
   hit_distance_sc </td>
<td style="text-align: left;"> numeric </td>
</tr>
<tr>
<td style="text-align: left;">
   launch_speed </td>
<td style="text-align: left;"> numeric </td>
</tr>
<tr>
<td style="text-align: left;">
   launch_angle </td>
<td style="text-align: left;"> numeric </td>
</tr>
<tr>
<td style="text-align: left;">
   effective_speed </td>
<td style="text-align: left;"> numeric </td>
</tr>
<tr>
<td style="text-align: left;">
   release_spin_rate </td>
<td style="text-align: left;"> numeric </td>
</tr>
<tr>
<td style="text-align: left;">
   release_extension </td>
<td style="text-align: left;"> numeric </td>
</tr>
<tr>
<td style="text-align: left;">
   game_pk </td>
<td style="text-align: left;"> numeric </td>
</tr>
<tr>
<td style="text-align: left;">
   pitcher_1 </td>
<td style="text-align: left;"> numeric </td>
</tr>
<tr>
<td style="text-align: left;">
   fielder_2_1 </td>
<td style="text-align: left;"> numeric </td>
</tr>
<tr>
<td style="text-align: left;">
   fielder_3 </td>
<td style="text-align: left;"> numeric </td>
</tr>
<tr>
<td style="text-align: left;">
   fielder_4 </td>
<td style="text-align: left;"> numeric </td>
</tr>
<tr>
<td style="text-align: left;">
   fielder_5 </td>
<td style="text-align: left;"> numeric </td>
</tr>
<tr>
<td style="text-align: left;">
   fielder_6 </td>
<td style="text-align: left;"> numeric </td>
</tr>
<tr>
<td style="text-align: left;">
   fielder_7 </td>
<td style="text-align: left;"> numeric </td>
</tr>
<tr>
<td style="text-align: left;">
   fielder_8 </td>
<td style="text-align: left;"> numeric </td>
</tr>
<tr>
<td style="text-align: left;">
   fielder_9 </td>
<td style="text-align: left;"> numeric </td>
</tr>
<tr>
<td style="text-align: left;">
   release_pos_y </td>
<td style="text-align: left;"> numeric </td>
</tr>
<tr>
<td style="text-align: left;">
   estimated_ba_using_speedangle </td>
<td style="text-align: left;"> numeric </td>
</tr>
<tr>
<td style="text-align: left;">
   estimated_woba_using_speedangle </td>
<td style="text-align: left;"> numeric </td>
</tr>
<tr>
<td style="text-align: left;">
   woba_value </td>
<td style="text-align: left;"> numeric </td>
</tr>
<tr>
<td style="text-align: left;">
   woba_denom </td>
<td style="text-align: left;"> integer </td>
</tr>
<tr>
<td style="text-align: left;">
   babip_value </td>
<td style="text-align: left;"> integer </td>
</tr>
<tr>
<td style="text-align: left;">
   iso_value </td>
<td style="text-align: left;"> integer </td>
</tr>
<tr>
<td style="text-align: left;">
   launch_speed_angle </td>
<td style="text-align: left;"> integer </td>
</tr>
<tr>
<td style="text-align: left;">
   at_bat_number </td>
<td style="text-align: left;"> numeric </td>
</tr>
<tr>
<td style="text-align: left;">
   pitch_number </td>
<td style="text-align: left;"> numeric </td>
</tr>
<tr>
<td style="text-align: left;">
   pitch_name </td>
<td style="text-align: left;"> character </td>
</tr>
<tr>
<td style="text-align: left;">
   home_score </td>
<td style="text-align: left;"> numeric </td>
</tr>
<tr>
<td style="text-align: left;">
   away_score </td>
<td style="text-align: left;"> numeric </td>
</tr>
<tr>
<td style="text-align: left;">
   bat_score </td>
<td style="text-align: left;"> numeric </td>
</tr>
<tr>
<td style="text-align: left;">
   fld_score </td>
<td style="text-align: left;"> numeric </td>
</tr>
<tr>
<td style="text-align: left;">
   post_away_score </td>
<td style="text-align: left;"> numeric </td>
</tr>
<tr>
<td style="text-align: left;">
   post_home_score </td>
<td style="text-align: left;"> numeric </td>
</tr>
<tr>
<td style="text-align: left;">
   post_bat_score </td>
<td style="text-align: left;"> numeric </td>
</tr>
<tr>
<td style="text-align: left;">
   post_fld_score </td>
<td style="text-align: left;"> numeric </td>
</tr>
<tr>
<td style="text-align: left;">
   if_fielding_alignment </td>
<td style="text-align: left;"> character </td>
</tr>
<tr>
<td style="text-align: left;">
   of_fielding_alignment </td>
<td style="text-align: left;"> character </td>
</tr>
<tr>
<td style="text-align: left;">
   spin_axis </td>
<td style="text-align: left;"> numeric </td>
</tr>
<tr>
<td style="text-align: left;">
   delta_home_win_exp </td>
<td style="text-align: left;"> numeric </td>
</tr>
<tr>
<td style="text-align: left;">
   delta_run_exp </td>
<td style="text-align: left;"> numeric </td>
</tr>
<tr>
<td style="text-align: left;">
   final_pitch_game </td>
<td style="text-align: left;"> numeric </td>
</tr>
<tr>
<td style="text-align: left;">
   final_pitch_at_bat </td>
<td style="text-align: left;"> numeric </td>
</tr>
<tr>
<td style="text-align: left;">
   runs_scored_on_pitch </td>
<td style="text-align: left;"> numeric </td>
</tr>
<tr>
<td style="text-align: left;">
   bat_score_after </td>
<td style="text-align: left;"> numeric </td>
</tr>
<tr>
<td style="text-align: left;">
   final_pitch_inning </td>
<td style="text-align: left;"> numeric </td>
</tr>
<tr>
<td style="text-align: left;">
   bat_score_start_inning </td>
<td style="text-align: left;"> numeric </td>
</tr>
<tr>
<td style="text-align: left;">
   bat_score_end_inning </td>
<td style="text-align: left;"> numeric </td>
</tr>
<tr>
<td style="text-align: left;">
   cum_runs_in_inning </td>
<td style="text-align: left;"> numeric </td>
</tr>
<tr>
<td style="text-align: left;">
   runs_to_end_inning </td>
<td style="text-align: left;"> numeric </td>
</tr>
<tr>
<td style="text-align: left;">
   count_base_out_state </td>
<td style="text-align: left;"> character </td>
</tr>
<tr>
<td style="text-align: left;">
   avg_re </td>
<td style="text-align: left;"> numeric </td>
</tr>
<tr>
<td style="text-align: left;">
   next_count_base_out_state </td>
<td style="text-align: left;"> character </td>
</tr>
<tr>
<td style="text-align: left;">
   next_avg_re </td>
<td style="text-align: left;"> numeric </td>
</tr>
<tr>
<td style="text-align: left;">
   change_re </td>
<td style="text-align: left;"> numeric </td>
</tr>
<tr>
<td style="text-align: left;">
   re24 </td>
<td style="text-align: left;"> numeric </td>
</tr>
<tr>
<td style="text-align: left;">
</td>
</tr>
</table>
<h3>Examples</h3>

<pre><code class="language-R">
 try({
   df &lt;- statcast_search(start_date = "2016-04-06", end_date = "2016-04-15", 
                         playerid = 621043, player_type = 'batter') 
   run_expectancy_code(df, level = "plate appearances")
 })

</code></pre>


</div>